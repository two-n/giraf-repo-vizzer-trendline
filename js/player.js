/*
 RequireJS 2.1.8 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

//     Underscore.js 1.5.1
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*! jQuery v2.0.3 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery-2.0.3.min.map
*/

//
// showdown.js -- A javascript port of Markdown.
//
// Copyright (c) 2007 John Fraser.
//
// Original Markdown Copyright (c) 2004-2005 John Gruber
//   <http://daringfireball.net/projects/markdown/>
//
// Redistributable under a BSD-style open source license.
// See license.txt for more information.
//
// The full source distribution is at:
//
//        A A L
//        T C A
//        T K B
//
//   <http://www.attacklab.net/>
//

var requirejs,require,define;(function(Z){function H(e){return"[object Function]"===L.call(e)}function I(e){return"[object Array]"===L.call(e)}function y(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function M(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function l(e,t){return s(e,t)&&e[t]}function F(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function Q(e,t,n,r){return t&&F(t,function(t,i){if(n||!s(e,i))r&&"string"!=typeof t?(e[i]||(e[i]={}),Q(e[i],t,n,r)):e[i]=t}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function aa(e){throw e}function ba(e){if(!e)return e;var t=Z;return y(e.split("."),function(e){t=t[e]}),t}function A(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ha(e){function t(e,t,n){var r,i,s,o,u,a,f,c=t&&t.split("/");r=c;var h=N.map,p=h&&h["*"];if(e&&"."===e.charAt(0))if(t){r=l(N.pkgs,t)?c=[t]:c.slice(0,c.length-1),t=e=r.concat(e.split("/"));for(r=0;t[r];r+=1)if(i=t[r],"."===i)t.splice(r,1),r-=1;else if(".."===i){if(1===r&&(".."===t[2]||".."===t[0]))break;0<r&&(t.splice(r-1,2),r-=2)}r=l(N.pkgs,t=e[0]),e=e.join("/"),r&&e===t+"/"+r.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&h&&(c||p)){t=e.split("/");for(r=t.length;0<r;r-=1){s=t.slice(0,r).join("/");if(c)for(i=c.length;0<i;i-=1)if(n=l(h,c.slice(0,i).join("/")))if(n=l(n,s)){o=n,u=r;break}if(o)break;!a&&p&&l(p,s)&&(a=l(p,s),f=r)}!o&&a&&(o=a,u=f),o&&(t.splice(0,u,o),e=t.join("/"))}return e}function n(e){z&&y(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===S.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=l(N.paths,e);if(t&&I(t)&&1<t.length)return n(e),t.shift(),S.require.undef(e),S.require([e]),!0}function i(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,n,r,s){var o,u,a=null,f=n?n.name:null,c=e,h=!0,p="";return e||(h=!1,e="_@r"+(B+=1)),e=i(e),a=e[0],e=e[1],a&&(a=t(a,f,s),u=l(_,a)),e&&(a?p=u&&u.normalize?u.normalize(e,function(e){return t(e,f,s)}):t(e,f,s):(p=t(e,f,s),e=i(p),a=e[0],p=e[1],r=!0,o=S.nameToUrl(p))),r=a&&!u&&!r?"_unnormalized"+(q+=1):"",{prefix:a,name:p,parentMap:n,unnormalized:!!r,url:o,originalName:c,isDefine:h,id:(a?a+"!"+p:p)+r}}function a(e){var t=e.id,n=l(C,t);return n||(n=C[t]=new S.Module(e)),n}function f(e,t,n){var r=e.id,i=l(C,r);s(_,r)&&(!i||i.defineEmitComplete)?"defined"===t&&n(_[r]):(i=a(e),i.error&&"error"===t)?n(i.error):i.on(t,n)}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(y(n,function(t){if(t=l(C,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&j.onError(e)}function h(){R.length&&(ia.apply(M,[M.length-1,0].concat(R)),R=[])}function p(e){delete C[e],delete k[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,y(e.depMaps,function(r,i){var s=r.id,o=l(C,s);o&&!e.depMatched[i]&&!n[s]&&(l(t,s)?(e.defineDep(i,_[s]),e.check()):d(o,t,n))}),n[r]=!0)}function v(){var e,t,i,s,o=(i=1e3*N.waitSeconds)&&S.startTime+i<(new Date).getTime(),u=[],a=[],f=!1,l=!0;if(!w){w=!0,F(k,function(i){e=i.map,t=e.id;if(i.enabled&&(e.isDefine||a.push(i),!i.error))if(!i.inited&&o)r(t)?f=s=!0:(u.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(f=!0,!e.prefix))return l=!1});if(o&&u.length)return i=A("timeout","Load timeout for modules: "+u,null,u),i.contextName=S.contextName,c(i);l&&y(a,function(e){d(e,{},{})}),(!o||s)&&f&&(z||da)&&!T&&(T=setTimeout(function(){T=0,v()},50)),w=!1}}function m(e){s(_,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function g(e){var e=e.currentTarget||e.srcElement,t=S.onScriptLoad;return e.detachEvent&&!W?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=S.onScriptError,(!e.detachEvent||W)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function b(){var e;for(h();M.length;){e=M.shift();if(null===e[0])return c(A("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}}var w,E,S,x,T,N={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},C={},k={},L={},M=[],_={},D={},B=1,q=1;return x={require:function(e){return e.require?e.require:e.require=S.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?e.exports:e.exports=_[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t=l(N.pkgs,e.map.id);return(t?l(N.config,e.map.id+"/"+t.main):l(N.config,e.map.id))||{}},exports:_[e.map.id]}}},E=function(e){this.events=l(L,e.id)||{},this.map=e,this.shim=l(N.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},E.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,S.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();S.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;D[e]||(D[e]=!0,S.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(H(i)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{r=S.execCb(n,i,t,r)}catch(s){e=s}else r=S.execCb(n,i,t,r);this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?r=t.exports:void 0===r&&this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(_[n]=r,j.onResourceLoad)&&j.onResourceLoad(S,this.map,this.depMaps),p(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=o(e.prefix);this.depMaps.push(r),f(r,"defined",u(this,function(r){var i,h;h=this.map.name;var d=this.map.parentMap?this.map.parentMap.name:null,v=S.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(r.normalize&&(h=r.normalize(h,function(e){return t(e,d,!0)})||""),r=o(e.prefix+"!"+h,this.map.parentMap),f(r,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),h=l(C,r.id))this.depMaps.push(r),this.events.error&&h.on("error",u(this,function(e){this.emit("error",e)})),h.enable()}else i=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],F(C,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&p(e.map.id)}),c(e)}),i.fromText=u(this,function(t,r){var u=e.name,f=o(u),l=O;r&&(t=r),l&&(O=!1),a(f),s(N.config,n)&&(N.config[u]=N.config[n]);try{j.exec(t)}catch(h){return c(A("fromtexteval","fromText eval for "+n+" failed: "+h,h,[n]))}l&&(O=!0),this.depMaps.push(f),S.completeLoad(u),v([u],i)}),r.load(e.name,v,i,N)})),S.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(e,t){var n,r;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e;if(n=l(x,e.id)){this.depExports[t]=n(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&f(e,"error",u(this,this.errback))}n=e.id,r=C[n],!s(x,n)&&r&&!r.enabled&&S.enable(e,this)})),F(this.pluginMaps,u(this,function(e){var t=l(C,e.id);t&&!t.enabled&&S.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){y(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},S={config:N,contextName:e,registry:C,defined:_,urlFetched:D,defQueue:M,Module:E,makeModuleMap:o,nextTick:j.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=N.pkgs,n=N.shim,r={paths:!0,config:!0,map:!0};F(e,function(e,t){r[t]?"map"===t?(N.map||(N.map={}),Q(N[t],e,!0,!0)):Q(N[t],e,!0):N[t]=e}),e.shim&&(F(e.shim,function(e,t){I(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=S.makeShimExports(e)),n[t]=e}),N.shim=n),e.packages&&(y(e.packages,function(e){e="string"==typeof e?{name:e}:e,t[e.name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ja,"").replace(ea,"")}}),N.pkgs=t),F(C,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&S.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(Z,arguments)),t||e.exports&&ba(e.exports)}},makeRequire:function(n,r){function i(t,u,f){var l,h;return r.enableBuildCallback&&u&&H(u)&&(u.__requireJsBuild=!0),"string"==typeof t?H(u)?c(A("requireargs","Invalid require call"),f):n&&s(x,t)?x[t](C[n.id]):j.get?j.get(S,t,n,i):(l=o(t,n,!1,!0),l=l.id,s(_,l)?_[l]:c(A("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(b(),S.nextTick(function(){b(),h=a(o(null,n)),h.skipMap=r.skipMap,h.init(t,u,f,{enabled:!0}),v()}),i)}return r=r||{},Q(i,{isBrowser:z,toUrl:function(e){var r,i=e.lastIndexOf("."),s=e.split("/")[0];return-1!==i&&("."!==s&&".."!==s||1<i)&&(r=e.substring(i,e.length),e=e.substring(0,i)),S.nameToUrl(t(e,n&&n.id,!0),r,!0)},defined:function(e){return s(_,o(e,n,!1,!0).id)},specified:function(e){return e=o(e,n,!1,!0).id,s(_,e)||s(C,e)}}),n||(i.undef=function(e){h();var t=o(e,n,!0),r=l(C,e);delete _[e],delete D[t.url],delete L[e],r&&(r.events.defined&&(L[e]=r.events),p(e))}),i},enable:function(e){l(C,e.id)&&a(e).enable()},completeLoad:function(e){var t,n,i=l(N.shim,e)||{},o=i.exports;for(h();M.length;){n=M.shift();if(null===n[0]){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);m(n)}n=l(C,e);if(!t&&!s(_,e)&&n&&!n.inited){if(N.enforceDefine&&(!o||!ba(o)))return r(e)?void 0:c(A("nodefine","No define call for "+e,null,[e]));m([e,i.deps||[],i.exportsFn])}v()},nameToUrl:function(e,t,n){var r,i,s,o,u,a;if(j.jsExtRegExp.test(e))o=e+(t||"");else{r=N.paths,i=N.pkgs,o=e.split("/");for(u=o.length;0<u;u-=1){if(a=o.slice(0,u).join("/"),s=l(i,a),a=l(r,a)){I(a)&&(a=a[0]),o.splice(0,u,a);break}if(s){e=e===s.name?s.location+"/"+s.main:s.location,o.splice(0,u,e);break}}o=o.join("/"),o+=t||(/\?/.test(o)||n?"":".js"),o=("/"===o.charAt(0)||o.match(/^[\w\+\.\-]+:/)?"":N.baseUrl)+o}return N.urlArgs?o+((-1===o.indexOf("?")?"?":"&")+N.urlArgs):o},load:function(e,t){j.load(S,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))P=null,e=g(e),S.completeLoad(e.id)},onScriptError:function(e){var t=g(e);if(!r(t.id))return c(A("scripterror","Script error for: "+t.id,e,[t.id]))}},S.require=S.makeRequire(),S}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z="undefined"!=typeof window&&!!navigator&&!!window.document,da=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),E={},t={},R=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(H(requirejs))return;t=requirejs,requirejs=void 0}"undefined"!=typeof require&&!H(require)&&(t=require,require=void 0),j=requirejs=function(e,t,n,r){var i,s="_";return!I(e)&&"string"!=typeof e&&(i=e,I(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=l(E,s))||(r=E[s]=j.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},j.config=function(e){return j(e)},j.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=j),j.version="2.1.8",j.jsExtRegExp=/^\/|:|\?|\.js$/,j.isBrowser=z,w=j.s={contexts:E,newContext:ha},j({}),y(["toUrl","undef","defined","specified"],function(e){j[e]=function(){var t=E._;return t.require[e].apply(t,arguments)}}),z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0])&&(x=w.head=C.parentNode),j.onError=aa,j.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},j.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=j.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!W?(O=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,K=r,C?x.insertBefore(r,C):x.appendChild(r),K=null,r;if(da)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(A("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&M(document.getElementsByTagName("script"),function(e){x||(x=e.parentNode);if(J=e.getAttribute("data-main"))return q=J,t.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",t.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),t.deps=t.deps?t.deps.concat(q):[q],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),I(t)||(n=t,t=null),!t&&H(n)&&(t=[],n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),O&&((r=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return P=e}),r=P),r&&(e||(e=r.getAttribute("data-requiremodule")),i=E[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},j.exec=function(b){return eval(b)},j(t)}})(this),define("vendor/require",function(){}),!function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.1";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(r>n||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(null==t?x.identity:t);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;u||n.leading!==!1||(u=f);var l=t-(f-u);return r=this,i=arguments,0>=l?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):o||n.trailing===!1||(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i=null;return function(){var s=this,o=arguments,u=function(){i=null,n||(r=e.apply(s,o))},a=n&&!i;return clearTimeout(i),i=setTimeout(u,t),a&&(r=e.apply(s,o)),r}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if("[object Array]"==i){if(a=e.length,l=a==t.length)for(;a--&&(l=M(e[a],t[a],n,r)););}else{for(var c in e)if(x.has(e,c)&&(a++,!(l=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),"function"!=typeof /./&&(x.isFunction=function(e){return"function"==typeof e}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(){define("models/dataset",["underscore"],function(e){var t,n;return n=[],t=function(r,i){var s,o,u,a,f,l,c,h,p,d,v,m;o=[],o.keyframes={},s={},o.push=function(e){var t,r,i,u,a,f,l,c,h,p,d,v,m;if(e){e.name!=null&&(s[e.name]=e),r=(f=e.value)!=null?f:e.min,t=(l=e.value)!=null?l:e.max,r!=null&&t!=null&&(o.min=Math.min(r,(c=o.min)!=null?c:r),o.max=Math.max(t,(h=o.max)!=null?h:t)),a=(p=e.seq)!=null?p:e.seqMin,u=(d=e.seq)!=null?d:e.seqMax,a!=null&&u!=null&&(o.seqMin=Math.min(a,(v=o.seqMin)!=null?v:a),o.seqMax=Math.max(u,(m=o.seqMax)!=null?m:u)),e.seq!=null&&(i=Number(e.seq));if(i!=null&&!e.isGap){if(o.keyframes[String(i)]!=null)throw new Error("A member can't exist twice in a single sequential dataset.");o.keyframes[String(i)]=o.length}}return n.push.call(o,e)},o.byName=function(e){return s[e]},o.select=function(n,i){return i==null&&(i=1),r=i>1?e.map(o,function(e){return e.select(n,i-1)}):n.at!=null?[o.nearest(n.at)]:n.name!=null?[o.byName(n.name)]:n.names!=null?e.map(n.names,function(e){return o.byName(e)}):void 0,e.extend(t(r),{name:o.name,displayName:o.displayName,isSequential:o.isSequential,meta:o.meta})},o.transpose=function(n,r){var i,s,u,a;n==null&&(n=function(){return!0}),r==null&&(r=!0),s=t([]),e.each(o,function(i,u){var a,f,l,c,h,p,d,v;for(f=p=0,v=i.length;p<v;f=++p){h=i[f],a=s.byName(h.name);if(a==null){if(!n(h,u))continue;s.push(a=t([],{name:h.name,displayName:h.displayName,isSequential:h.isSequential,headers:h.headers,index:h.index,meta:h.meta}));if(u>0&&r)for(l=d=0;0<=u?d<u:d>u;l=0<=u?++d:--d)c=o[l],a.push(t([],{name:c.name,displayName:c.displayName,isSequential:c.isSequential,headers:c.headers,index:c.index,meta:c.meta}))}a.push(e.isArray(h)?t(h,{name:i.name,displayName:i.displayName,isSequential:i.isSequential,headers:i.headers,index:i.index,meta:i.meta}):h)}return null});for(u=0,a=s.length;u<a;u++)i=s[u],s.seqMin=i.seqMin,s.seqMax=i.seqMax;return s},o.binaryNearest=function(e){var t,n,r,i,s,u,a;i=0,n=o.length-1,a=null,u=null;while(i<=n){s=o[i],r=o[n],a=(i+n)/2|0,u=o[a],u.binaryNearest!=null&&(u=u.binaryNearest(e));if(i===n)return u;if(s.isGap&&s.gap===r.gap)return s.gap.end;if(n-i===1)return t=(e-s.seq)/(o[n].seq-s.seq),t<.5?s:r;if(u.seq<e)i=a;else{if(!(u.seq>e))return u;n=a}}return null},o.nearest=function(e){var t,n,r;return e=Number(e),isNaN(e)?o[o.length-1]:(t=o.keyframes[String(e)],t==null?((r=o[0])!=null?r.seq:void 0)==null?(n=o.reduce(function(t,n){return n.nearest!=null&&(n=n.nearest(e)),n==null?t:t!=null&&Math.abs(t.seq-e)<Math.abs(e-n.seq)?t:n},null),o.keyframes[String(e)]=n):(n=o.binaryNearest(e),t=n.index,o.keyframes[String(e)]=t):isNaN(t)?n=t:n=o[t],n)},i&&e.extend(o,i);for(a=0,f=r.length;a<f;a++){u=r[a];if(u==null||u.length===0)continue;u.isGapEnd?(u.seq=u.gap.after.seq,o.meta.gaps==="step"?u.value=(l=u.gap.before)!=null?l.value:void 0:o.meta.gaps==="connect"?u.value=(c=u.gap.after)!=null?c.value:void 0:u.value=null):u.isGap&&(o.meta.gaps==="step"?(u.seq=(h=u.gap.after)!=null?h.seq:void 0,u.value=(p=u.gap.before)!=null?p.value:void 0):o.meta.gaps==="connect"?(u.seq=(d=u.gap.before)!=null?d.seq:void 0,u.value=(v=u.gap.before)!=null?v.value:void 0):(u.seq=(m=u.gap.before)!=null?m.seq:void 0,u.value=null)),o.push(u||t([]))}return o},t.parse=function(n,r,i){var s,o,u,a,f,l;return r==null&&(r=0),l=[0,1,2],u=l[0],o=l[1],s=l[2],t(function(){var l,c,h;h=[];for(a=l=0,c=n.length;l<c;a=++l){f=n[a];switch(r){case u:i=t.parse(f.rows[0].slice(1),2),h.push(e.extend(t.parse(f.rows.slice(1),1,i),{name:f.name}));break;case o:h.push(e.extend(t.parse(f.slice(1),2,i),{name:t.aliasNameFn(f[0])||f[0],displayName:f[0]}));break;case s:i==null?h.push({seq:f,name:String(f),index:a}):h.push({value:f,seq:i[a].seq,name:i[a].name,header:i[a],index:a});break;default:h.push(void 0)}}return h}())},t.aliasNameFn=e.identity,t.aliasName=function(e){return t.aliasNameFn=e,t},t})}.call(this),function(e,undefined){function j(e){var t=e.length,n=x.type(e);return x.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function A(e){var t=D[e]={};return x.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function F(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=x.expando+Math.random()}function P(e,t,n){var r;if(n===undefined&&1===e.nodeType)if(r="data-"+t.replace(O,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:H.test(n)?JSON.parse(n):n}catch(i){}L.set(e,t,n)}else n=undefined;return n}function U(){return!0}function Y(){return!1}function V(){try{return o.activeElement}catch(e){}}function Z(e,t){while((e=e[t])&&1!==e.nodeType);return e}function et(e,t,n){if(x.isFunction(t))return x.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return x.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(G.test(t))return x.filter(t,e,n);t=x.filter(t,e)}return x.grep(e,function(e){return g.call(t,e)>=0!==n})}function pt(e,t){return x.nodeName(e,"table")&&x.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ht(e){var t=ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function dt(e,t){var n=e.length,r=0;for(;n>r;r++)q.set(e[r],"globalEval",!t||q.get(t[r],"globalEval"))}function gt(e,t){var n,r,i,s,o,u,a,f;if(1===t.nodeType){if(q.hasData(e)&&(s=q.access(e),o=q.set(t,s),f=s.events)){delete o.handle,o.events={};for(i in f)for(n=0,r=f[i].length;r>n;n++)x.event.add(t,i,f[i][n])}L.hasData(e)&&(u=L.access(e),a=x.extend({},u),L.set(t,a))}}function mt(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return t===undefined||t&&x.nodeName(e,t)?x.merge([e],n):n}function yt(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ot.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function At(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Dt.length;while(i--)if(t=Dt[i]+n,t in e)return t;return r}function Lt(e,t){return e=t||e,"none"===x.css(e,"display")||!x.contains(e.ownerDocument,e)}function qt(t){return e.getComputedStyle(t,null)}function Ht(e,t){var n,r,i,s=[],o=0,u=e.length;for(;u>o;o++)r=e[o],r.style&&(s[o]=q.get(r,"olddisplay"),n=r.style.display,t?(s[o]||"none"!==n||(r.style.display=""),""===r.style.display&&Lt(r)&&(s[o]=q.access(r,"olddisplay",Rt(r.nodeName)))):s[o]||(i=Lt(r),(n&&"none"!==n||!i)&&q.set(r,"olddisplay",i?n:x.css(r,"display"))));for(o=0;u>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?s[o]||"":"none"));return e}function Ot(e,t,n){var r=Tt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Ft(e,t,n,r,i){var s=n===(r?"border":"content")?4:"width"===t?1:0,o=0;for(;4>s;s+=2)"margin"===n&&(o+=x.css(e,n+jt[s],!0,i)),r?("content"===n&&(o-=x.css(e,"padding"+jt[s],!0,i)),"margin"!==n&&(o-=x.css(e,"border"+jt[s]+"Width",!0,i))):(o+=x.css(e,"padding"+jt[s],!0,i),"padding"!==n&&(o+=x.css(e,"border"+jt[s]+"Width",!0,i)));return o}function Pt(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,s=qt(e),o=x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,s);if(0>=i||null==i){if(i=vt(e,t,s),(0>i||null==i)&&(i=e.style[t]),Ct.test(i))return i;r=o&&(x.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+Ft(e,t,n||(o?"border":"content"),r,s)+"px"}function Rt(e){var t=o,n=Nt[e];return n||(n=Mt(e,t),"none"!==n&&n||(xt=(xt||x("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(xt[0].contentWindow||xt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=Mt(e,t),xt.detach()),Nt[e]=n),n}function Mt(e,t){var n=x(t.createElement(e)).appendTo(t.body),r=x.css(n[0],"display");return n.remove(),r}function _t(e,t,n,r){var i;if(x.isArray(t))x.each(t,function(t,i){n||$t.test(e)?r(e,i):_t(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==x.type(t))r(e,t);else for(i in t)_t(e+"["+i+"]",t[i],n,r)}function un(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(w)||[];if(x.isFunction(n))while(r=s[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function ln(e,t,n,r){function o(u){var a;return i[u]=!0,x.each(e[u]||[],function(e,u){var f=u(t,n,r);return"string"!=typeof f||s||i[f]?s?!(a=f):undefined:(t.dataTypes.unshift(f),o(f),!1)}),a}var i={},s=e===on;return o(t.dataTypes[0])||!i["*"]&&o("*")}function cn(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)t[n]!==undefined&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}function pn(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while("*"===a[0])a.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in u)if(u[i]&&u[i].test(r)){a.unshift(i);break}if(a[0]in n)s=a[0];else{for(i in n){if(!a[0]||e.converters[i+" "+a[0]]){s=i;break}o||(o=i)}s=s||o}return s?(s!==a[0]&&a.unshift(s),n[s]):undefined}function fn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift())if("*"===s)s=a;else if("*"!==a&&a!==s){if(o=f[a+" "+s]||f["* "+s],!o)for(i in f)if(u=i.split(" "),u[1]===s&&(o=f[a+" "+u[0]]||f["* "+u[0]])){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}return{state:"success",data:t}}function En(){return setTimeout(function(){xn=undefined}),xn=x.now()}function Sn(e,t,n){var r,i=(Nn[t]||[]).concat(Nn["*"]),s=0,o=i.length;for(;o>s;s++)if(r=i[s].call(n,t,e))return r}function jn(e,t,n){var r,i,s=0,o=kn.length,u=x.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=xn||En(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;a>o;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),1>s&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:xn||En(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;for(Dn(l,f.opts.specialEasing);o>s;s++)if(r=kn[s].call(f,e,l,f.opts))return r;return x.map(l,Sn,f),x.isFunction(f.opts.start)&&f.opts.start.call(e,f),x.fx.timer(x.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Dn(e,t){var n,r,i,s,o;for(n in e)if(r=x.camelCase(n),i=t[r],s=e[n],x.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=x.cssHooks[r],o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function An(e,t,n){var r,i,s,o,u,a,f=this,l={},c=e.style,h=e.nodeType&&Lt(e),p=q.get(e,"fxshow");n.queue||(u=x._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,x.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[c.overflow,c.overflowX,c.overflowY],"inline"===x.css(e,"display")&&"none"===x.css(e,"float")&&(c.display="inline-block")),n.overflow&&(c.overflow="hidden",f.always(function(){c.overflow=n.overflow[0],c.overflowX=n.overflow[1],c.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],wn.exec(i)){if(delete t[r],s=s||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!p||p[r]===undefined)continue;h=!0}l[r]=p&&p[r]||x.style(e,r)}if(!x.isEmptyObject(l)){p?"hidden"in p&&(h=p.hidden):p=q.access(e,"fxshow",{}),s&&(p.hidden=!h),h?x(e).show():f.done(function(){x(e).hide()}),f.done(function(){var t;q.remove(e,"fxshow");for(t in l)x.style(e,t,l[t])});for(r in l)o=Sn(h?p[r]:0,r,f),r in p||(p[r]=o.start,h&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function Ln(e,t,n,r,i){return new Ln.prototype.init(e,t,n,r,i)}function qn(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=jt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function Hn(e){return x.isWindow(e)?e:9===e.nodeType&&e.defaultView}var t,n,r=typeof undefined,i=e.location,o=e.document,s=o.documentElement,a=e.jQuery,u=e.$,l={},c=[],p="2.0.3",f=c.concat,h=c.push,d=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,x=function(e,n){return new x.fn.init(e,n,t)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^-ms-/,N=/-([\da-z])/gi,E=function(e,t){return t.toUpperCase()},S=function(){o.removeEventListener("DOMContentLoaded",S,!1),e.removeEventListener("load",S,!1),x.ready()};x.fn=x.prototype={jquery:p,constructor:x,init:function(e,t,n){var r,i;if(!e)return this;if("string"==typeof e){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof x?t[0]:t,x.merge(this,x.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),C.test(r[1])&&x.isPlainObject(t))for(r in t)x.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=o.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):x.isFunction(e)?n.ready(e):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),x.makeArray(e,this))},selector:"",length:0,toArray:function(){return d.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return x.each(this,e,t)},ready:function(e){return x.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},x.fn.init.prototype=x.fn,x.extend=x.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;for("boolean"==typeof o&&(f=o,o=arguments[1]||{},u=2),"object"==typeof o||x.isFunction(o)||(o={}),a===u&&(o=this,--u);a>u;u++)if(null!=(e=arguments[u]))for(t in e)n=o[t],r=e[t],o!==r&&(f&&r&&(x.isPlainObject(r)||(i=x.isArray(r)))?(i?(i=!1,s=n&&x.isArray(n)?n:[]):s=n&&x.isPlainObject(n)?n:{},o[t]=x.extend(f,s,r)):r!==undefined&&(o[t]=r));return o},x.extend({expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===x&&(e.$=u),t&&e.jQuery===x&&(e.jQuery=a),x},isReady:!1,readyWait:1,holdReady:function(e){e?x.readyWait++:x.ready(!0)},ready:function(e){(e===!0?--x.readyWait:x.isReady)||(x.isReady=!0,e!==!0&&--x.readyWait>0||(n.resolveWith(o,[x]),x.fn.trigger&&x(o).trigger("ready").off("ready")))},isFunction:function(e){return"function"===x.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if("object"!==x.type(e)||e.nodeType||x.isWindow(e))return!1;try{if(e.constructor&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=x.buildFragment([e],t,i),i&&x(i).remove(),x.merge([],r.childNodes))},parseJSON:JSON.parse,parseXML:function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&x.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){var t,n=eval;e=x.trim(e),e&&(1===e.indexOf("use strict")?(t=o.createElement("script"),t.text=e,o.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(k,"ms-").replace(N,E)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=j(e);if(n){if(o){for(;s>i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(o){for(;s>i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:function(e){return null==e?"":v.call(e)},makeArray:function(e,t){var n=t||[];return null!=e&&(j(Object(e))?x.merge(n,"string"==typeof e?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:g.call(t,e,n)},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;n>i;i++)e[r++]=t[i];else while(t[i]!==undefined)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;for(n=!!n;o>s;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=j(e),u=[];if(o)for(;s>i;i++)r=t(e[i],i,n),null!=r&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(u[u.length]=r);return f.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),x.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(t||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||x.guid++,i):undefined},access:function(e,t,n,r,i,s,o){var u=0,a=e.length,f=null==n;if("object"===x.type(n)){i=!0;for(u in n)x.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined&&(i=!0,x.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(x(e),n)})),t))for(;a>u;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)));return i?e:f?t.call(e):a?t(e[0],n):s},now:Date.now,swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),x.ready.promise=function(t){return n||(n=x.Deferred(),"complete"===o.readyState?setTimeout(x.ready):(o.addEventListener("DOMContentLoaded",S,!1),e.addEventListener("load",S,!1))),n.promise(t)},x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),t=x(o),function(e,t){function ot(e,t,n,i){var s,o,u,a,f,l,p,m,g,E;if((t?t.ownerDocument||t:w)!==h&&c(t),t=t||h,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(d&&!i){if(s=Z.exec(e))if(u=s[1]){if(9===a){if(o=t.getElementById(u),!o||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&y(t,o)&&o.id===u)return n.push(o),n}else{if(s[2])return H.apply(n,t.getElementsByTagName(e)),n;if((u=s[3])&&r.getElementsByClassName&&t.getElementsByClassName)return H.apply(n,t.getElementsByClassName(u)),n}if(r.qsa&&(!v||!v.test(e))){if(m=p=b,g=t,E=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){l=mt(e),(p=t.getAttribute("id"))?m=p.replace(nt,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=l.length;while(f--)l[f]=m+gt(l[f]);g=$.test(e)&&t.parentNode||t,E=l.join(",")}if(E)try{return H.apply(n,g.querySelectorAll(E)),n}catch(S){}finally{p||t.removeAttribute("id")}}}return Nt(e.replace(W,"$1"),t,n,i)}function ut(){function t(n,r){return e.push(n+=" ")>s.cacheLength&&delete t[e.shift()],t[n]=r}var e=[];return t}function at(e){return e[b]=!0,e}function ft(e){var t=h.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function lt(e,t){var n=e.split("|"),r=e.length;while(r--)s.attrHandle[n[r]]=t}function ct(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||O)-(~e.sourceIndex||O);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function pt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function dt(e){return at(function(t){return t=+t,at(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function vt(){}function mt(e,t){var n,r,i,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=s.preFilter;while(u){(!n||(r=X.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=V.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(W," ")}),u=u.slice(n.length));for(o in s.filter)!(r=G[o].exec(u))||f[o]&&!(r=f[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ot.error(e):N(e,a).slice(0)}function gt(e){var t=0,n=e.length,r="";for(;n>t;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,s=n&&"parentNode"===r,o=S++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||s)return e(t,n,i)}:function(t,n,u){var a,f,l,c=E+" "+o;if(u){while(t=t[r])if((1===t.nodeType||s)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||s)if(l=t[b]||(t[b]={}),(f=l[r])&&f[0]===c){if((a=f[1])===!0||a===i)return a===!0}else if(f=l[r]=[c],f[1]=e(t,n,u)||i,f[1]===!0)return!0}}function bt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=null!=t;for(;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function Et(e,t,n,r,i,s){return r&&!r[b]&&(r=Et(r)),i&&!i[b]&&(i=Et(i,s)),at(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||Tt(t||"*",u.nodeType?[u]:u,[]),m=!e||!s&&t?v:wt(v,h,e,u,a),g=n?i||(s?e:d||r)?[]:o:m;if(n&&n(m,g,u,a),r){f=wt(g,p),r(f,[],u,a),l=f.length;while(l--)(c=f[l])&&(g[p[l]]=!(m[p[l]]=c))}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?j.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=wt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):H.apply(o,g)})}function St(e){var t,n,r,i=e.length,o=s.relative[e[0].type],u=o||s.relative[" "],a=o?1:0,l=yt(function(e){return e===t},u,!0),c=yt(function(e){return j.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;i>a;a++)if(n=s.relative[e[a].type])h=[yt(bt(h),n)];else{if(n=s.filter[e[a].type].apply(null,e[a].matches),n[b]){for(r=++a;i>r;r++)if(s.relative[e[r].type])break;return Et(a>1&&bt(h),a>1&&gt(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(W,"$1"),n,r>a&&St(e.slice(a,r)),i>r&&St(e=e.slice(r)),i>r&&gt(e))}h.push(n)}return bt(h)}function xt(e,t){var n=0,r=t.length>0,o=e.length>0,u=function(u,a,l,c,p){var d,v,m,g=[],y=0,b="0",w=u&&[],S=null!=p,x=f,T=u||o&&s.find.TAG("*",p&&a.parentNode||a),N=E+=null==x?1:Math.random()||.1;for(S&&(f=a!==h&&a,i=n);null!=(d=T[b]);b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){c.push(d);break}S&&(E=N,i=++n)}r&&((d=!m&&d)&&y--,u&&w.push(d))}if(y+=b,r&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)w[b]||g[b]||(g[b]=D.call(c));g=wt(g)}H.apply(c,g),S&&!u&&g.length>0&&y+t.length>1&&ot.uniqueSort(c)}return S&&(E=N,f=x),w};return r?at(u):u}function Tt(e,t,n){var r=0,i=t.length;for(;i>r;r++)ot(e,t[r],n);return n}function Nt(e,t,n,i){var o,u,f,l,c,h=mt(e);if(!i&&1===h.length){if(u=h[0]=h[0].slice(0),u.length>2&&"ID"===(f=u[0]).type&&r.getById&&9===t.nodeType&&d&&s.relative[u[1].type]){if(t=(s.find.ID(f.matches[0].replace(rt,it),t)||[])[0],!t)return n;e=e.slice(u.shift().value.length)}o=G.needsContext.test(e)?0:u.length;while(o--){if(f=u[o],s.relative[l=f.type])break;if((c=s.find[l])&&(i=c(f.matches[0].replace(rt,it),$.test(u[0].type)&&t.parentNode||t))){if(u.splice(o,1),e=i.length&&gt(u),!e)return H.apply(n,i),n;break}}}return a(e,h)(i,t,!d,n,$.test(e)),n}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b="sizzle"+ -(new Date),w=e.document,E=0,S=0,T=ut(),N=ut(),C=ut(),k=!1,L=function(e,t){return e===t?(k=!0,0):0},A=typeof t,O=1<<31,M={}.hasOwnProperty,_=[],D=_.pop,P=_.push,H=_.push,B=_.slice,j=_.indexOf||function(e){var t=0,n=this.length;for(;n>t;t++)if(this[t]===e)return t;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",R=q.replace("w","w#"),U="\\["+I+"*("+q+")"+I+"*(?:([*^$|!~]?=)"+I+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+R+")|)|)"+I+"*\\]",z=":("+q+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+U.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+I+"+|((?:^|[^\\\\])(?:\\\\.)*)"+I+"+$","g"),X=RegExp("^"+I+"*,"+I+"*"),V=RegExp("^"+I+"*([>+~]|"+I+")"+I+"*"),$=RegExp(I+"*[+~]"),J=RegExp("="+I+"*([^\\]'\"]*)"+I+"*\\]","g"),K=RegExp(z),Q=RegExp("^"+R+"$"),G={ID:RegExp("^#("+q+")"),CLASS:RegExp("^\\.("+q+")"),TAG:RegExp("^("+q.replace("w","w*")+")"),ATTR:RegExp("^"+U),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+I+"*(even|odd|(([+-]|)(\\d*)n|)"+I+"*(?:([+-]|)"+I+"*(\\d+)|))"+I+"*\\)|)","i"),bool:RegExp("^(?:"+F+")$","i"),needsContext:RegExp("^"+I+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+I+"*((?:-\\d)?\\d*)"+I+"*\\)|)(?=[^-]|$)","i")},Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/'|\\/g,rt=RegExp("\\\\([\\da-f]{1,6}"+I+"?|("+I+")|.)","ig"),it=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{H.apply(_=B.call(w.childNodes),w.childNodes),_[w.childNodes.length].nodeType}catch(st){H={apply:_.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}u=ot.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},r=ot.support={},c=ot.setDocument=function(e){var n=e?e.ownerDocument||e:w,i=n.defaultView;return n!==h&&9===n.nodeType&&n.documentElement?(h=n,p=n.documentElement,d=!u(n),i&&i.attachEvent&&i!==i.top&&i.attachEvent("onbeforeunload",function(){c()}),r.attributes=ft(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=ft(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=ft(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=ft(function(e){return p.appendChild(e).id=b,!n.getElementsByName||!n.getElementsByName(b).length}),r.getById?(s.find.ID=function(e,t){if(typeof t.getElementById!==A&&d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){return e.getAttribute("id")===t}}):(delete s.find.ID,s.filter.ID=function(e){var t=e.replace(rt,it);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),s.find.TAG=r.getElementsByTagName?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){while(n=s[i++])1===n.nodeType&&r.push(n);return r}return s},s.find.CLASS=r.getElementsByClassName&&function(e,n){return typeof n.getElementsByClassName!==A&&d?n.getElementsByClassName(e):t},m=[],v=[],(r.qsa=Y.test(n.querySelectorAll))&&(ft(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+I+"*(?:value|"+F+")"),e.querySelectorAll(":checked").length||v.push(":checked")}),ft(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&v.push("[*^$]="+I+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(r.matchesSelector=Y.test(g=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ft(function(e){r.disconnectedMatch=g.call(e,"div"),g.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&RegExp(v.join("|")),m=m.length&&RegExp(m.join("|")),y=Y.test(p.contains)||p.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},L=p.compareDocumentPosition?function(e,t){if(e===t)return k=!0,0;var i=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return i?1&i||!r.sortDetached&&t.compareDocumentPosition(e)===i?e===n||y(w,e)?-1:t===n||y(w,t)?1:l?j.call(l,e)-j.call(l,t):0:4&i?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(e===t)return k=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:l?j.call(l,e)-j.call(l,t):0;if(s===o)return ct(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)a.unshift(r);while(u[i]===a[i])i++;return i?ct(u[i],a[i]):u[i]===w?-1:a[i]===w?1:0},n):h},ot.matches=function(e,t){return ot(e,null,null,t)},ot.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&c(e),t=t.replace(J,"='$1']"),!(!r.matchesSelector||!d||m&&m.test(t)||v&&v.test(t)))try{var n=g.call(e,t);if(n||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return ot(t,h,null,[e]).length>0},ot.contains=function(e,t){return(e.ownerDocument||e)!==h&&c(e),y(e,t)},ot.attr=function(e,n){(e.ownerDocument||e)!==h&&c(e);var i=s.attrHandle[n.toLowerCase()],o=i&&M.call(s.attrHandle,n.toLowerCase())?i(e,n,!d):t;return o===t?r.attributes||!d?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null:o},ot.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},ot.uniqueSort=function(e){var t,n=[],i=0,s=0;if(k=!r.detectDuplicates,l=!r.sortStable&&e.slice(0),e.sort(L),k){while(t=e[s++])t===e[s]&&(i=n.push(s));while(i--)e.splice(n[i],1)}return e},o=ot.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},s=ot.selectors={cacheLength:50,createPseudo:at,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(rt,it),e[3]=(e[4]||e[5]||"").replace(rt,it),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ot.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ot.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return G.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&K.test(r)&&(n=mt(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(rt,it).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=RegExp("(^|"+I+")"+e+"("+I+"|$)"))&&T(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ot.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){l=m[b]||(m[b]={}),f=l[e]||[],p=f[0]===E&&f[1],h=f[0]===E&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(1===c.nodeType&&++h&&c===t){l[e]=[E,p,h];break}}else if(y&&(f=(t[b]||(t[b]={}))[e])&&f[0]===E)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++h&&(y&&((c[b]||(c[b]={}))[e]=[E,h]),c===t))break;return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=s.pseudos[e]||s.setFilters[e.toLowerCase()]||ot.error("unsupported pseudo: "+e);return r[b]?r(t):r.length>1?(n=[e,e,"",t],s.setFilters.hasOwnProperty(e.toLowerCase())?at(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=j.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:at(function(e){var t=[],n=[],r=a(e.replace(W,"$1"));return r[b]?at(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:at(function(e){return function(t){return ot(e,t).length>0}}),contains:at(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:at(function(e){return Q.test(e||"")||ot.error("unsupported lang: "+e),e=e.replace(rt,it).toLowerCase(),function(t){var n;do if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!s.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:dt(function(){return[0]}),last:dt(function(e,t){return[t-1]}),eq:dt(function(e,t,n){return[0>n?n+t:n]}),even:dt(function(e,t){var n=0;for(;t>n;n+=2)e.push(n);return e}),odd:dt(function(e,t){var n=1;for(;t>n;n+=2)e.push(n);return e}),lt:dt(function(e,t,n){var r=0>n?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:dt(function(e,t,n){var r=0>n?n+t:n;for(;t>++r;)e.push(r);return e})}},s.pseudos.nth=s.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})s.pseudos[n]=ht(n);for(n in{submit:!0,reset:!0})s.pseudos[n]=pt(n);vt.prototype=s.filters=s.pseudos,s.setFilters=new vt,a=ot.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=mt(e)),n=t.length;while(n--)s=St(t[n]),s[b]?r.push(s):i.push(s);s=C(e,xt(i,r))}return s},r.sortStable=b.split("").sort(L).join("")===b,r.detectDuplicates=k,c(),r.sortDetached=ft(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),ft(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||lt("type|href|height|width",function(e,n,r){return r?t:e.getAttribute(n,"type"===n.toLowerCase()?1:2)}),r.attributes&&ft(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||lt("value",function(e,n,r){return r||"input"!==e.nodeName.toLowerCase()?t:e.defaultValue}),ft(function(e){return null==e.getAttribute("disabled")})||lt(F,function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&i.specified?i.value:e[n]===!0?n.toLowerCase():null}),x.find=ot,x.expr=ot.selectors,x.expr[":"]=x.expr.pseudos,x.unique=ot.uniqueSort,x.text=ot.getText,x.isXMLDoc=ot.isXML,x.contains=ot.contains}(e);var D={};x.Callbacks=function(e){e="string"==typeof e?D[e]||A(e):x.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(h){for(t=e.memory&&h,n=!0,o=i||0,i=0,s=u.length,r=!0;u&&s>o;o++)if(u[o].apply(h[0],h[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(a?a.length&&f(a.shift()):t?u=[]:l.disable())},l={add:function(){if(u){var n=u.length;(function o(t){x.each(t,function(t,n){var r=x.type(n);"function"===r?e.unique&&l.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})})(arguments),r?s=u.length:t&&(i=n,f(t))}return this},remove:function(){return u&&x.each(arguments,function(e,t){var n;while((n=x.inArray(t,u,n))>-1)u.splice(n,1),r&&(s>=n&&s--,o>=n&&o--)}),this},has:function(e){return e?x.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],s=0,this},disable:function(){return u=a=t=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,t||l.disable(),this},locked:function(){return!a},fireWith:function(e,t){return!u||n&&!a||(t=t||[],t=[e,t.slice?t.slice():t],r?a.push(t):f(t)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!n}};return l},x.extend({Deferred:function(e){var t=[["resolve","done",x.Callbacks("once memory"),"resolved"],["reject","fail",x.Callbacks("once memory"),"rejected"],["notify","progress",x.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return x.Deferred(function(n){x.each(t,function(t,s){var o=s[0],u=x.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&x.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?x.extend(e,r):r}},i={};return r.pipe=r.then,x.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=1!==r||e&&x.isFunction(e.promise)?r:0,s=1===i?e:x.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1)for(u=Array(r),a=Array(r),f=Array(r);r>t;t++)n[t]&&x.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i;return i||s.resolveWith(f,n),s.promise()}}),x.support=function(t){var n=o.createElement("input"),r=o.createDocumentFragment(),i=o.createElement("div"),s=o.createElement("select"),u=s.appendChild(o.createElement("option"));return n.type?(n.type="checkbox",t.checkOn=""!==n.value,t.optSelected=u.selected,t.reliableMarginRight=!0,t.boxSizingReliable=!0,t.pixelPosition=!1,n.checked=!0,t.noCloneChecked=n.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!u.disabled,n=o.createElement("input"),n.value="t",n.type="radio",t.radioValue="t"===n.value,n.setAttribute("checked","t"),n.setAttribute("name","t"),r.appendChild(n),t.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,t.focusinBubbles="onfocusin"in e,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===i.style.backgroundClip,x(function(){var n,r,s="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(i),i.innerHTML="",i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",x.swap(u,null!=u.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===i.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,r=i.appendChild(o.createElement("div")),r.style.cssText=i.style.cssText=s,r.style.marginRight=r.style.width="0",i.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),u.removeChild(n))}),t):t}({});var L,q,H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,O=/([A-Z])/g;F.uid=1,F.accepts=function(e){return e.nodeType?1===e.nodeType||9===e.nodeType:!0},F.prototype={key:function(e){if(!F.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=F.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,x.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),s=this.cache[i];if("string"==typeof t)s[t]=n;else if(x.isEmptyObject(s))x.extend(this.cache[i],t);else for(r in t)s[r]=t[r];return s},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},access:function(e,t,n){var r;return t===undefined||t&&"string"==typeof t&&n===undefined?(r=this.get(e,t),r!==undefined?r:this.get(e,x.camelCase(t))):(this.set(e,t,n),n!==undefined?n:t)},remove:function(e,t){var n,r,i,s=this.key(e),o=this.cache[s];if(t===undefined)this.cache[s]={};else{x.isArray(t)?r=t.concat(t.map(x.camelCase)):(i=x.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(w)||[])),n=r.length;while(n--)delete o[r[n]]}},hasData:function(e){return!x.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}},L=new F,q=new F,x.extend({acceptData:F.accepts,hasData:function(e){return L.hasData(e)||q.hasData(e)},data:function(e,t,n){return L.access(e,t,n)},removeData:function(e,t){L.remove(e,t)},_data:function(e,t,n){return q.access(e,t,n)},_removeData:function(e,t){q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i=this[0],s=0,o=null;if(e===undefined){if(this.length&&(o=L.get(i),1===i.nodeType&&!q.get(i,"hasDataAttrs"))){for(n=i.attributes;n.length>s;s++)r=n[s].name,0===r.indexOf("data-")&&(r=x.camelCase(r.slice(5)),P(i,r,o[r]));q.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){L.set(this,e)}):x.access(this,function(t){var n,r=x.camelCase(e);if(i&&t===undefined){if(n=L.get(i,e),n!==undefined)return n;if(n=L.get(i,r),n!==undefined)return n;if(n=P(i,r,undefined),n!==undefined)return n}else this.each(function(){var n=L.get(this,r);L.set(this,r,t),-1!==e.indexOf("-")&&n!==undefined&&L.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){L.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=q.get(e,t),n&&(!r||x.isArray(n)?r=q.access(e,t,x.makeArray(n)):r.push(n)),r||[]):undefined},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),r=n.length,i=n.shift(),s=x._queueHooks(e,t),o=function(){x.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q.get(e,n)||q.access(e,n,{empty:x.Callbacks("once memory").add(function(){q.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),n>arguments.length?x.queue(this[0],e):t===undefined?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},delay:function(e,t){return e=x.fx?x.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};"string"!=typeof e&&(t=e,e=undefined),e=e||"fx";while(o--)n=q.get(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var R,M,W=/[\t\r\n\f]/g,$=/\r/g,B=/^(?:input|select|textarea|button)$/i;x.fn.extend({attr:function(e,t){return x.access(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})},prop:function(e,t){return x.access(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a="string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(w)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):" ")){s=0;while(i=t[s++])0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=x.trim(r)}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=0===arguments.length||"string"==typeof e&&e;if(x.isFunction(e))return this.each(function(t){x(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(w)||[];u>o;o++)if(n=this[o],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(W," "):"")){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?x.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):x.isFunction(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n){var t,i=0,s=x(this),o=e.match(w)||[];while(t=o[i++])s.hasClass(t)?s.removeClass(t):s.addClass(t)}else(n===r||"boolean"===n)&&(this.className&&q.set(this,"__className__",this.className),this.className=this.className||e===!1?"":q.get(this,"__className__")||"")})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(W," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];if(arguments.length)return r=x.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,x(this).val()):e,null==i?i="":"number"==typeof i?i+="":x.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,i,"value")!==undefined||(this.value=i))});if(i)return t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,"string"==typeof n?n.replace($,""):null==n?"":n)}}),x.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s="select-one"===e.type||0>i,o=s?null:[],u=s?i+1:r.length,a=0>i?u:s?i:0;for(;u>a;a++)if(n=r[a],!(!n.selected&&a!==i||(x.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&x.nodeName(n.parentNode,"optgroup"))){if(t=x(n).val(),s)return t;o.push(t)}return o},set:function(e,t){var n,r,i=e.options,s=x.makeArray(t),o=i.length;while(o--)r=i[o],(r.selected=x.inArray(x(r).val(),s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}},attr:function(e,t,n){var i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===r?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(t=t.toLowerCase(),i=x.attrHooks[t]||(x.expr.match.bool.test(t)?M:R)),n===undefined?i&&"get"in i&&null!==(s=i.get(e,t))?s:(s=x.find.attr(e,t),null==s?undefined:s):null!==n?i&&"set"in i&&(s=i.set(e,n,t))!==undefined?s:(e.setAttribute(t,n+""),n):(x.removeAttr(e,t),undefined))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(w);if(s&&1===e.nodeType)while(n=s[i++])r=x.propFix[n]||n,x.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!x.support.radioValue&&"radio"===t&&x.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!x.isXMLDoc(e),s&&(t=x.propFix[t]||t,i=x.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||B.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),M={set:function(e,t,n){return t===!1?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=x.expr.attrHandle[t]||x.find.attr;x.expr.attrHandle[t]=function(e,t,r){var i=x.expr.attrHandle[t],s=r?undefined:(x.expr.attrHandle[t]=undefined)!=n(e,t,r)?t.toLowerCase():null;return x.expr.attrHandle[t]=i,s}}),x.support.optSelected||(x.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){return x.isArray(t)?e.checked=x.inArray(x(e).val(),t)>=0:undefined}},x.support.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var I=/^key/,z=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,X=/^([^.]*)(?:\.(.+)|)$/;x.event={global:{},add:function(e,t,n,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=q.get(e);if(g){n.handler&&(o=n,n=o.handler,s=o.selector),n.guid||(n.guid=x.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof x===r||e&&x.event.triggered===e.type?undefined:x.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||"").match(w)||[""],l=t.length;while(l--)a=X.exec(t[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),d&&(h=x.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=x.event.special[d]||{},c=x.extend({type:d,origType:m,data:i,handler:n,guid:n.guid,selector:s,needsContext:s&&x.expr.match.needsContext.test(s),namespace:v.join(".")},o),(p=f[d])||(p=f[d]=[],p.delegateCount=0,h.setup&&h.setup.call(e,i,v,u)!==!1||e.addEventListener&&e.addEventListener(d,u,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),x.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=q.hasData(e)&&q.get(e);if(m&&(a=m.events)){t=(t||"").match(w)||[""],f=t.length;while(f--)if(u=X.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort(),p){c=x.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],!i&&v!==l.origType||n&&n.guid!==l.guid||u&&!u.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&(c.teardown&&c.teardown.call(e,d,m.handle)!==!1||x.removeEvent(e,p,m.handle),delete a[p])}else for(p in a)x.event.remove(e,p+t[f],n,r,!0);x.isEmptyObject(a)&&(delete m.handle,q.remove(e,"events"))}},trigger:function(t,n,r,i){var s,u,a,f,l,c,h,p=[r||o],d=y.call(t,"type")?t.type:t,v=y.call(t,"namespace")?t.namespace.split("."):[];if(u=a=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!_.test(d+x.event.triggered)&&(d.indexOf(".")>=0&&(v=d.split("."),d=v.shift(),v.sort()),l=0>d.indexOf(":")&&"on"+d,t=t[x.expando]?t:new x.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=v.join("."),t.namespace_re=t.namespace?RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:x.makeArray(n,[t]),h=x.event.special[d]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!x.isWindow(r)){for(f=h.delegateType||d,_.test(f+d)||(u=u.parentNode);u;u=u.parentNode)p.push(u),a=u;a===(r.ownerDocument||o)&&p.push(a.defaultView||a.parentWindow||e)}s=0;while((u=p[s++])&&!t.isPropagationStopped())t.type=s>1?f:h.bindType||d,c=(q.get(u,"events")||{})[t.type]&&q.get(u,"handle"),c&&c.apply(u,n),c=l&&u[l],c&&x.acceptData(u)&&c.apply&&c.apply(u,n)===!1&&t.preventDefault();return t.type=d,i||t.isDefaultPrevented()||h._default&&h._default.apply(p.pop(),n)!==!1||!x.acceptData(r)||l&&x.isFunction(r[d])&&!x.isWindow(r)&&(a=r[l],a&&(r[l]=null),x.event.triggered=d,r[d](),x.event.triggered=undefined,a&&(r[l]=a)),t.result}},dispatch:function(e){e=x.event.fix(e);var t,n,r,i,s,o=[],u=d.call(arguments),a=(q.get(this,"events")||{})[e.type]||[],f=x.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,e)!==!1){o=x.event.handlers.call(this,e,a),t=0;while((i=o[t++])&&!e.isPropagationStopped()){e.currentTarget=i.elem,n=0;while((s=i.handlers[n++])&&!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,r=((x.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,u),r!==undefined&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()))}return f.postDispatch&&f.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||"click"!==e.type))for(;a!==this;a=a.parentNode||this)if(a.disabled!==!0||"click"!==e.type){for(r=[],n=0;u>n;n++)s=t[n],i=s.selector+" ",r[i]===undefined&&(r[i]=s.needsContext?x(i,this).index(a)>=0:x.find(i,this,null,[a]).length),r[i]&&r.push(s);r.length&&o.push({elem:a,handlers:r})}return t.length>u&&o.push({elem:this,handlers:t.slice(u)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||o,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||s===undefined||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[x.expando])return e;var t,n,r,i=e.type,s=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=z.test(i)?this.mouseHooks:I.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new x.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=o),3===e.target.nodeType&&(e.target=e.target.parentNode),u.filter?u.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==V()&&this.focus?(this.focus(),!1):undefined},delegateType:"focusin"},blur:{trigger:function(){return this===V()&&this.blur?(this.blur(),!1):undefined},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&x.nodeName(this,"input")?(this.click(),!1):undefined},_default:function(e){return x.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=x.extend(new x.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?x.event.trigger(i,null,t):x.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},x.Event=function(e,t){return this instanceof x.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.getPreventDefault&&e.getPreventDefault()?U:Y):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||x.now(),this[x.expando]=!0,undefined):new x.Event(e,t)},x.Event.prototype={isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=U,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=U,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=U,this.stopPropagation()}},x.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!x.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),x.support.focusinBubbles||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){x.event.simulate(t,e.target,x.event.fix(e),!0)};x.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),x.fn.extend({on:function(e,t,n,r,i){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=undefined);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=undefined):null==r&&("string"==typeof t?(r=n,n=undefined):(r=n,n=t,t=undefined)),r===!1)r=Y;else if(!r)return this;return 1===i&&(s=r,r=function(e){return x().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=x.guid++)),this.each(function(){x.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=undefined),n===!1&&(n=Y),this.each(function(){x.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?x.event.trigger(e,t,n,!0):undefined}});var G=/^.[^:#\[\.,]*$/,J=/^(?:parents|prev(?:Until|All))/,Q=x.expr.match.needsContext,K={children:!0,contents:!0,next:!0,prev:!0};x.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;i>t;t++)if(x.contains(r[t],this))return!0}));for(t=0;i>t;t++)x.find(e,r[t],n);return n=this.pushStack(i>1?x.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){var e=0;for(;n>e;e++)if(x.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(et(this,e||[],!0))},filter:function(e){return this.pushStack(et(this,e||[],!1))},is:function(e){return!!et(this,"string"==typeof e&&Q.test(e)?x(e):e||[],!1).length},closest:function(e,t){var n,r=0,i=this.length,s=[],o=Q.test(e)||"string"!=typeof e?x(e,t||this.context):0;for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(11>n.nodeType&&(o?o.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){n=s.push(n);break}return this.pushStack(s.length>1?x.unique(s):s)},index:function(e){return e?"string"==typeof e?g.call(x(e),this[0]):g.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?x(e,t):x.makeArray(e&&e.nodeType?[e]:e),r=x.merge(this.get(),n);return this.pushStack(x.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x.dir(e,"parentNode")},parentsUntil:function(e,t,n){return x.dir(e,"parentNode",n)},next:function(e){return Z(e,"nextSibling")},prev:function(e){return Z(e,"previousSibling")},nextAll:function(e){return x.dir(e,"nextSibling")},prevAll:function(e){return x.dir(e,"previousSibling")},nextUntil:function(e,t,n){return x.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return x.dir(e,"previousSibling",n)},siblings:function(e){return x.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return x.sibling(e.firstChild)},contents:function(e){return e.contentDocument||x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(K[e]||x.unique(i),J.test(e)&&i.reverse()),this.pushStack(i)}}),x.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,t,n){var r=[],i=n!==undefined;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,nt=/<([\w:]+)/,rt=/<|&#?\w+;/,it=/<(?:script|style|link)/i,ot=/^(?:checkbox|radio)$/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^$|\/(?:java|ecma)script/i,ut=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ct={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ct.optgroup=ct.option,ct.tbody=ct.tfoot=ct.colgroup=ct.caption=ct.thead,ct.th=ct.td,x.fn.extend({text:function(e){return x.access(this,function(e){return e===undefined?x.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=pt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?x.filter(e,this):this,i=0;for(;null!=(n=r[i]);i++)t||1!==n.nodeType||x.cleanData(mt(n)),n.parentNode&&(t&&x.contains(n.ownerDocument,n)&&dt(mt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(mt(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return x.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!it.test(e)&&!ct[(nt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(tt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(x.cleanData(mt(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=x.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),x(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=f.apply([],e);var r,i,s,o,u,a,l=0,c=this.length,h=this,p=c-1,d=e[0],v=x.isFunction(d);if(v||!(1>=c||"string"!=typeof d||x.support.checkClone)&&st.test(d))return this.each(function(r){var i=h.eq(r);v&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(r=x.buildFragment(e,this[0].ownerDocument,!1,!n&&this),i=r.firstChild,1===r.childNodes.length&&(r=i),i)){for(s=x.map(mt(r,"script"),ft),o=s.length;c>l;l++)u=r,l!==p&&(u=x.clone(u,!0,!0),o&&x.merge(s,mt(u,"script"))),t.call(this[l],u,l);if(o)for(a=s[s.length-1].ownerDocument,x.map(s,ht),l=0;o>l;l++)u=s[l],at.test(u.type||"")&&!q.access(u,"globalEval")&&x.contains(a,u)&&(u.src?x._evalUrl(u.src):x.globalEval(u.textContent.replace(lt,"")))}return this}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,r=[],i=x(e),s=i.length-1,o=0;for(;s>=o;o++)n=o===s?this:this.clone(!0),x(i[o])[t](n),h.apply(r,n.get());return this.pushStack(r)}}),x.extend({clone:function(e,t,n){var r,i,s,o,u=e.cloneNode(!0),a=x.contains(e.ownerDocument,e);if(!(x.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(o=mt(u),s=mt(e),r=0,i=s.length;i>r;r++)yt(s[r],o[r]);if(t)if(n)for(s=s||mt(e),o=o||mt(u),r=0,i=s.length;i>r;r++)gt(s[r],o[r]);else gt(e,u);return o=mt(u,"script"),o.length>0&&dt(o,!a&&mt(e,"script")),u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l=0,c=e.length,h=t.createDocumentFragment(),p=[];for(;c>l;l++)if(i=e[l],i||0===i)if("object"===x.type(i))x.merge(p,i.nodeType?[i]:i);else if(rt.test(i)){s=s||h.appendChild(t.createElement("div")),o=(nt.exec(i)||["",""])[1].toLowerCase(),u=ct[o]||ct._default,s.innerHTML=u[1]+i.replace(tt,"<$1></$2>")+u[2],f=u[0];while(f--)s=s.lastChild;x.merge(p,s.childNodes),s=h.firstChild,s.textContent=""}else p.push(t.createTextNode(i));h.textContent="",l=0;while(i=p[l++])if((!r||-1===x.inArray(i,r))&&(a=x.contains(i.ownerDocument,i),s=mt(h.appendChild(i),"script"),a&&dt(s),n)){f=0;while(i=s[f++])at.test(i.type||"")&&n.push(i)}return h},cleanData:function(e){var t,n,r,i,s,o,u=x.event.special,a=0;for(;(n=e[a])!==undefined;a++){if(F.accepts(n)&&(s=n[q.expando],s&&(t=q.cache[s]))){if(r=Object.keys(t.events||{}),r.length)for(o=0;(i=r[o])!==undefined;o++)u[i]?x.event.remove(n,i):x.removeEvent(n,i,t.handle);q.cache[s]&&delete q.cache[s]}delete L.cache[n[L.expando]]}},_evalUrl:function(e){return x.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),x.fn.extend({wrapAll:function(e){var t;return x.isFunction(e)?this.each(function(t){x(this).wrapAll(e.call(this,t))}):(this[0]&&(t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return x.isFunction(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=x.isFunction(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){x.nodeName(this,"body")||x(this).replaceWith(this.childNodes)}).end()}});var vt,xt,bt=/^(none|table(?!-c[ea]).+)/,wt=/^margin/,Tt=RegExp("^("+b+")(.*)$","i"),Ct=RegExp("^("+b+")(?!px)[a-z%]+$","i"),kt=RegExp("^([+-])=("+b+")","i"),Nt={BODY:"block"},Et={position:"absolute",visibility:"hidden",display:"block"},St={letterSpacing:0,fontWeight:400},jt=["Top","Right","Bottom","Left"],Dt=["Webkit","O","Moz","ms"];x.fn.extend({css:function(e,t){return x.access(this,function(e,t,n){var r,i,s={},o=0;if(x.isArray(t)){for(r=qt(e),i=t.length;i>o;o++)s[t[o]]=x.css(e,t[o],!1,r);return s}return n!==undefined?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)},show:function(){return Ht(this,!0)},hide:function(){return Ht(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Lt(this)?x(this).show():x(this).hide()})}}),x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=vt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,u=x.camelCase(t),a=e.style;return t=x.cssProps[u]||(x.cssProps[u]=At(a,u)),o=x.cssHooks[t]||x.cssHooks[u],n===undefined?o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t]:(s=typeof n,"string"===s&&(i=kt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(x.css(e,t)),s="number"),null==n||"number"===s&&isNaN(n)||("number"!==s||x.cssNumber[u]||(n+="px"),x.support.clearCloneStyle||""!==n||0!==t.indexOf("background")||(a[t]="inherit"),o&&"set"in o&&(n=o.set(e,n,r))===undefined||(a[t]=n)),undefined)}},css:function(e,t,n,r){var i,s,o,u=x.camelCase(t);return t=x.cssProps[u]||(x.cssProps[u]=At(e.style,u)),o=x.cssHooks[t]||x.cssHooks[u],o&&"get"in o&&(i=o.get(e,!0,n)),i===undefined&&(i=vt(e,t,r)),"normal"===i&&t in St&&(i=St[t]),""===n||n?(s=parseFloat(i),n===!0||x.isNumeric(s)?s||0:i):i}}),vt=function(e,t,n){var r,i,s,o=n||qt(e),u=o?o.getPropertyValue(t)||o[t]:undefined,a=e.style;return o&&(""!==u||x.contains(e.ownerDocument,e)||(u=x.style(e,t)),Ct.test(u)&&wt.test(t)&&(r=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=u,u=o.width,a.width=r,a.minWidth=i,a.maxWidth=s)),u},x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&bt.test(x.css(e,"display"))?x.swap(e,Et,function(){return Pt(e,t,r)}):Pt(e,t,r):undefined},set:function(e,n,r){var i=r&&qt(e);return Ot(e,n,r?Ft(e,t,r,x.support.boxSizing&&"border-box"===x.css(e,"boxSizing",!1,i),i):0)}}}),x(function(){x.support.reliableMarginRight||(x.cssHooks.marginRight={get:function(e,t){return t?x.swap(e,{display:"inline-block"},vt,[e,"marginRight"]):undefined}}),!x.support.pixelPosition&&x.fn.position&&x.each(["top","left"],function(e,t){x.cssHooks[t]={get:function(e,n){return n?(n=vt(e,t),Ct.test(n)?x(e).position()[t]+"px":n):undefined}}})}),x.expr&&x.expr.filters&&(x.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight},x.expr.filters.visible=function(e){return!x.expr.filters.hidden(e)}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var r=0,i={},s="string"==typeof n?n.split(" "):[n];for(;4>r;r++)i[e+jt[r]+t]=s[r]||s[r-2]||s[0];return i}},wt.test(e)||(x.cssHooks[e+t].set=Ot)});var Wt=/%20/g,$t=/\[\]$/,Bt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,zt=/^(?:input|select|textarea|keygen)/i;x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&zt.test(this.nodeName)&&!It.test(e)&&(this.checked||!ot.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:x.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(Bt,"\r\n")}}):{name:t.name,value:n.replace(Bt,"\r\n")}}).get()}}),x.param=function(e,t){var n,r=[],i=function(e,t){t=x.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=x.ajaxSettings&&x.ajaxSettings.traditional),x.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)_t(n,e[n],t,i);return r.join("&").replace(Wt,"+")},x.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Xt,Ut,Yt=x.now(),Vt=/\?/,Gt=/#.*$/,Jt=/([?&])_=[^&]*/,Qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zt=/^(?:GET|HEAD)$/,en=/^\/\//,tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,nn=x.fn.load,rn={},on={},sn="*/".concat("*");try{Ut=i.href}catch(an){Ut=o.createElement("a"),Ut.href="",Ut=Ut.href}Xt=tn.exec(Ut.toLowerCase())||[],x.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u),e=e.slice(0,u)),x.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(i="POST"),o.length>0&&x.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ut,type:"GET",isLocal:Kt.test(Xt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":x.parseJSON,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?cn(cn(e,x.ajaxSettings),t):cn(x.ajaxSettings,e)},ajaxPrefilter:un(rn),ajaxTransport:un(on),ajax:function(e,t){function T(e,t,s,u){var f,m,g,b,w,S=t;2!==y&&(y=2,o&&clearTimeout(o),n=undefined,i=u||"",E.readyState=e>0?4:0,f=e>=200&&300>e||304===e,s&&(b=pn(l,E,s)),b=fn(l,b,E,f),f?(l.ifModified&&(w=E.getResponseHeader("Last-Modified"),w&&(x.lastModified[r]=w),w=E.getResponseHeader("etag"),w&&(x.etag[r]=w)),204===e||"HEAD"===l.type?S="nocontent":304===e?S="notmodified":(S=b.state,m=b.data,g=b.error,f=!g)):(g=S,(e||!S)&&(S="error",0>e&&(e=0))),E.status=e,E.statusText=(t||S)+"",f?p.resolveWith(c,[m,S,E]):p.rejectWith(c,[E,S,g]),E.statusCode(v),v=undefined,a&&h.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?m:g]),d.fireWith(c,[E,S]),a&&(h.trigger("ajaxComplete",[E,l]),--x.active||x.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=x.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?x(c):x.event,p=x.Deferred(),d=x.Callbacks("once memory"),v=l.statusCode||{},m={},g={},y=0,b="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!s){s={};while(t=Qt.exec(i))s[t[1].toLowerCase()]=t[2]}t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=g[n]=g[n]||e,m[e]=t),this},overrideMimeType:function(e){return y||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)v[t]=[v[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||b;return n&&n.abort(t),T(0,t),this}};if(p.promise(E).complete=d.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||Ut)+"").replace(Gt,"").replace(en,Xt[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=x.trim(l.dataType||"*").toLowerCase().match(w)||[""],null==l.crossDomain&&(u=tn.exec(l.url.toLowerCase()),l.crossDomain=!(!u||u[1]===Xt[1]&&u[2]===Xt[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Xt[3]||("http:"===Xt[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=x.param(l.data,l.traditional)),ln(rn,l,t,E),2===y)return E;a=l.global,a&&0===x.active++&&x.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Zt.test(l.type),r=l.url,l.hasContent||(l.data&&(r=l.url+=(Vt.test(r)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Jt.test(r)?r.replace(Jt,"$1_="+Yt++):r+(Vt.test(r)?"&":"?")+"_="+Yt++)),l.ifModified&&(x.lastModified[r]&&E.setRequestHeader("If-Modified-Since",x.lastModified[r]),x.etag[r]&&E.setRequestHeader("If-None-Match",x.etag[r])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+sn+"; q=0.01":""):l.accepts["*"]);for(f in l.headers)E.setRequestHeader(f,l.headers[f]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&2!==y){b="abort";for(f in{success:1,error:1,complete:1})E[f](l[f]);if(n=ln(on,l,t,E)){E.readyState=1,a&&h.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{y=1,n.send(m,T)}catch(S){if(!(2>y))throw S;T(-1,S)}}else T(-1,"No Transport");return E}return E.abort()},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return x.isFunction(n)&&(i=i||r,r=n,n=undefined),x.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=x("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}});var hn=[],dn=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=hn.pop()||x.expando+"_"+Yt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&dn.test(t.data)&&"data");return u||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=x.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(dn,"$1"+i):t.jsonp!==!1&&(t.url+=(Vt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||x.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,hn.push(i)),o&&x.isFunction(s)&&s(o[0]),o=s=undefined}),"script"):undefined}),x.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var gn=x.ajaxSettings.xhr(),mn={0:200,1223:204},yn=0,vn={};e.ActiveXObject&&x(e).on("unload",function(){for(var e in vn)vn[e]();vn=undefined}),x.support.cors=!!gn&&"withCredentials"in gn,x.support.ajax=gn=!!gn,x.ajaxTransport(function(e){var t;return x.support.cors||gn&&!e.crossDomain?{send:function(n,r){var i,s,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete vn[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status||404,o.statusText):r(mn[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:undefined,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=vn[s=yn++]=t("abort"),o.send(e.hasContent&&e.data||null)},abort:function(){t&&t()}}:undefined});var xn,bn,wn=/^(?:toggle|show|hide)$/,Tn=RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),Cn=/queueHooks$/,kn=[An],Nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Tn.exec(t),s=i&&i[3]||(x.cssNumber[e]?"":"px"),o=(x.cssNumber[e]||"px"!==s&&+r)&&Tn.exec(x.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,x.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&1!==u&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};x.Animation=x.extend(jn,{tweener:function(e,t){x.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;i>r;r++)n=e[r],Nn[n]=Nn[n]||[],Nn[n].unshift(t)},prefilter:function(e,t){t?kn.unshift(e):kn.push(e)}}),x.Tween=Ln,Ln.prototype={constructor:Ln,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ln.propHooks[this.prop];return e&&e.get?e.get(this):Ln.propHooks._default.get(this)},run:function(e){var t,n=Ln.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ln.propHooks._default.set(this),this}},Ln.prototype.init.prototype=Ln.prototype,Ln.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=x.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[x.cssProps[e.prop]]||x.cssHooks[e.prop])?x.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Ln.propHooks.scrollTop=Ln.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(qn(t,!0),e,r,i)}}),x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Lt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),s=x.speed(t,n,r),o=function(){var t=jn(this,x.extend({},e),s);(i||q.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=x.timers,o=q.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&Cn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&x.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=x.timers,o=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each({slideDown:qn("show"),slideUp:qn("hide"),slideToggle:qn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||x.isFunction(e)&&e,duration:e,easing:n&&t||t&&!x.isFunction(t)&&t};return r.duration=x.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){x.isFunction(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},x.timers=[],x.fx=Ln.prototype.init,x.fx.tick=function(){var e,t=x.timers,n=0;for(xn=x.now();t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||x.fx.stop(),xn=undefined},x.fx.timer=function(e){e()&&x.timers.push(e)&&x.fx.start()},x.fx.interval=13,x.fx.start=function(){bn||(bn=setInterval(x.fx.tick,x.fx.interval))},x.fx.stop=function(){clearInterval(bn),bn=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fx.step={},x.expr&&x.expr.filters&&(x.expr.filters.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length}),x.fn.offset=function(e){if(arguments.length)return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,i=this[0],s={top:0,left:0},o=i&&i.ownerDocument;if(o)return t=o.documentElement,x.contains(t,i)?(typeof i.getBoundingClientRect!==r&&(s=i.getBoundingClientRect()),n=Hn(o),{top:s.top+n.pageYOffset-t.clientTop,left:s.left+n.pageXOffset-t.clientLeft}):s},x.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=x.css(e,"position"),c=x(e),h={};"static"===l&&(e.style.position="relative"),u=c.offset(),s=x.css(e,"top"),a=x.css(e,"left"),f=("absolute"===l||"fixed"===l)&&(s+a).indexOf("auto")>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),x.isFunction(t)&&(t=t.call(e,n,u)),null!=t.top&&(h.top=t.top-u.top+o),null!=t.left&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},x.fn.extend({position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===x.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),x.nodeName(e[0],"html")||(r=e.offset()),r.top+=x.css(e[0],"borderTopWidth",!0),r.left+=x.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-x.css(n,"marginTop",!0),left:t.left-r.left-x.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s;while(e&&!x.nodeName(e,"html")&&"static"===x.css(e,"position"))e=e.offsetParent;return e||s})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;x.fn[t]=function(i){return x.access(this,function(t,i,s){var o=Hn(t);return s===undefined?o?o[n]:t[i]:(o?o.scrollTo(r?e.pageXOffset:s,r?s:e.pageYOffset):t[i]=s,undefined)},t,i,arguments.length,null)}}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(r,i){var s=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return x.access(this,function(t,n,r){var i;return x.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?x.css(t,n,o):x.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),x.fn.size=function(){return this.length},x.fn.andSelf=x.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=x:"function"==typeof define&&define.amd&&define("jquery",[],function(){return x}),"object"==typeof e&&"object"==typeof e.document&&(e.jQuery=e.$=x)}(window),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="1.0.0";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender||e.$,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=o.Events={on:function(e,t,n){if(!l(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!l(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,a,f,c,h;if(!this._events||!l(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,f=o.length;a<f;a++){e=o[a];if(s=this._events[e]){this._events[e]=r=[];if(t||n)for(c=0,h=s.length;c<h;c++)i=s[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!l(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return this;var i=!t&&!n;typeof t=="object"&&(n=this),e&&((r={})[e._listenerId]=e);for(var s in r)r[s].off(t,n,this),i&&delete this._listeners[s];return this}},f=/\s+/,l=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(f.test(n)){var s=n.split(f);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},c=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},h={listenTo:"on",listenToOnce:"once"};u.each(h,function(e,t){a[t]=function(t,n,r){var i=this._listeners||(this._listeners={}),s=t._listenerId||(t._listenerId=u.uniqueId("l"));return i[s]=t,typeof n=="object"&&(r=this),t[e](n,r,this),this}}),a.bind=a.on,a.unbind=a.off,u.extend(o,a);var p=o.Model=function(e,t){var n,r=e||{};t||(t={}),this.cid=u.uniqueId("c"),this.attributes={},u.extend(this,u.pick(t,d)),t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)},d=["url","urlRoot","collection"];u.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o=this.attributes;e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t;if(r&&(!n||!n.wait)&&!this.set(r,n))return!1;n=u.extend({validate:!0},n);if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},o,r)),n.parse===void 0&&(n.parse=!0);var a=this,f=n.success;return n.success=function(e){a.attributes=o;var t=a.parse(e,n);n.wait&&(t=u.extend(r||{},t));if(u.isObject(t)&&!a.set(t,n))return!1;f&&f(a,e,n),a.trigger("sync",a,e,n)},j(this,n),i=this.isNew()?"create":n.patch?"patch":"update",i==="patch"&&(n.attrs=r),s=this.sync(i,this,n),r&&n.wait&&(this.attributes=o),s},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)};if(this.isNew())return e.success(),!1;j(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||B();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return this._validate({},u.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,u.extend(t||{},{validationError:n})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];u.each(v,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.attributes),u[e].apply(u,t)}});var m=o.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};u.extend(m.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){return this.set(e,u.defaults(t||{},y))},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},set:function(e,t){t=u.defaults(t||{},g),t.parse&&(e=this.parse(e,t)),u.isArray(e)||(e=e?[e]:[]);var n,i,o,a,f,l,c=t.at,h=this.comparator&&c==null&&t.sort!==!1,p=u.isString(this.comparator)?this.comparator:null,d=[],v=[],m={};for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(e[n],t)))continue;(f=this.get(o))?(t.remove&&(m[f.cid]=!0),t.merge&&(f.set(o.attributes,t),h&&!l&&f.hasChanged(p)&&(l=!0))):t.add&&(d.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o))}if(t.remove){for(n=0,i=this.length;n<i;++n)m[(o=this.models[n]).cid]||v.push(o);v.length&&this.remove(v,t)}d.length&&(h&&(l=!0),this.length+=d.length,c!=null?s.apply(this.models,[c,0].concat(d)):r.apply(this.models,d)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=d.length;n<i;n++)(o=d[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return u.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)},pluck:function(e){return u.invoke(this.models,"get",e)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(i){t.wait&&n.add(e,t),r&&r(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(b,function(e){m.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var w=["groupBy","countBy","sortBy"];u.each(w,function(e){m.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var E=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];u.extend(E.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)continue;var r=t.match(S),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,x)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}}),o.sync=function(e,t,n){var r=T[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||B()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1),i.type==="PATCH"&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled)&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,a,n),a};var T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var N=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,L=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(N.prototype,a,{initialize:function(){},route:function(e,t,n){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(t)&&(n=t,t=""),n||(n=this[t]);var r=this;return o.history.route(e,function(i){var s=r._extractParameters(e,i);n&&n.apply(r,s),r.trigger.apply(r,["route:"+t].concat(s)),r.trigger("route",t,s),o.history.trigger("route",r,t,s)}),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;this.routes=u.result(this,"routes");var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(C,"(?:$1)?").replace(k,function(e,t){return t?e:"([^/]+)"}).replace(L,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return u.map(n,function(e){return e?decodeURIComponent(e):null})}});var O=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,D=/msie [\w.]+/,P=/\/$/;O.started=!1,u.extend(O.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(P,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(M,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=D.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(_,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(M,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!O.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new O;var H=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};p.extend=m.extend=N.extend=E.extend=O.extend=H;var B=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}.call(this),define("backbone",["underscore","jquery"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),function(){define("models/db",["models/dataset","backbone","underscore"],function(e,t,n){return function(){var r;return r=e([]),n.extend(r,t.Events),r.toJSON=function(){return r.map(function(e){return{name:e.name,displayName:e.displayName,id:e.id,data:e.rawJson}})},r.add=function(e){return r.push(e),r.trigger("add",e)},r.remove=function(e){var t,i;return typeof e=="string"?t=r.byName[e]:t=e,i=n.indexOf(r,t),r.splice(i,1),r.trigger("remove",t)},r.update=function(e,t){return t.name!=null&&delete this.byName[e.name],n.extend(e,t),t.name!=null&&(this.byName[e.name]=e),r.trigger("update",e)},r}})}.call(this),!function(){function e(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function t(e){return null!=e&&!isNaN(e)}function n(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function r(e){return e.length}function i(e){for(var t=1;e*t%1;)t*=10;return t}function s(e,t){try{for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}catch(r){e.prototype=t}}function o(){}function u(e){return ou+e in this}function a(e){return e=ou+e,e in this&&delete this[e]}function f(){var e=[];return this.forEach(function(t){e.push(t)}),e}function l(){var e=0;for(var t in this)t.charCodeAt(0)===uu&&++e;return e}function c(){for(var e in this)if(e.charCodeAt(0)===uu)return!1;return!0}function h(){}function p(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function d(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var n=0,r=au.length;r>n;++n){var i=au[n]+t;if(i in e)return i}}function v(){}function m(){}function g(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new o;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function y(){Xo.event.preventDefault()}function b(){for(var e,t=Xo.event;e=t.sourceEvent;)t=e;return t}function w(e){for(var t=new m,n=0,r=arguments.length;++n<r;)t[arguments[n]]=g(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=Xo.event;i.target=e,Xo.event=i,t[i.type].apply(n,r)}finally{Xo.event=s}}},t}function E(e){return lu(e,vu),e}function S(e){return"function"==typeof e?e:function(){return cu(e,this)}}function x(e){return"function"==typeof e?e:function(){return hu(e,this)}}function T(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=Xo.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function N(e){return e.trim().replace(/\s+/g," ")}function C(e){return new RegExp("(?:^|\\s+)"+Xo.requote(e)+"(?:\\s+|$)","g")}function k(e){return(e+"").trim().split(/^|\s+/)}function L(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=k(e).map(A);var i=e.length;return"function"==typeof t?r:n}function A(e){var t=C(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",N(i+" "+e))):n.setAttribute("class",N(i.replace(t," ")))}}function O(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function M(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function _(e){return"function"==typeof e?e:(e=Xo.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,e)}}function D(e){return{__data__:e}}function P(e){return function(){return du(this,e)}}function H(t){return arguments.length||(t=e),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function B(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function j(e){return lu(e,gu),e}function F(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function I(){var e=this.__transition__;e&&++e.active}function q(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,$o(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+Xo.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=R;u>0&&(e=e.substring(0,u));var f=bu.get(e);return f&&(e=f,a=U),u?t?i:r:t?v:s}function R(e,t){return function(n){var r=Xo.event;Xo.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{Xo.event=r}}}function U(e,t){var n=R(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function z(){var e=".dragsuppress-"+ ++Eu,t="click"+e,n=Xo.select(Qo).on("touchmove"+e,y).on("dragstart"+e,y).on("selectstart"+e,y);if(wu){var r=Ko.style,i=r[wu];r[wu]="none"}return function(s){function o(){n.on(t,null)}n.on(e,null),wu&&(r[wu]=i),s&&(n.on(t,function(){y(),o()},!0),setTimeout(o,0))}}function W(e,t){t.changedTouches&&(t=t.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();if(0>Su&&(Qo.scrollX||Qo.scrollY)){n=Xo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=n[0][0].getScreenCTM();Su=!i.f&&!i.e,n.remove()}return Su?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}function X(){return Xo.event.changedTouches[0].identifier}function V(){return Xo.event.target}function $(){return Qo}function J(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function Q(e){return e>1?0:-1>e?xu:Math.acos(e)}function G(e){return e>1?Nu:-1>e?-Nu:Math.asin(e)}function Y(e){return((e=Math.exp(e))-1/e)/2}function Z(e){return((e=Math.exp(e))+1/e)/2}function et(e){return((e=Math.exp(2*e))-1)/(e+1)}function tt(e){return(e=Math.sin(e/2))*e}function nt(){}function rt(e,t,n){return this instanceof rt?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof rt?new rt(e.h,e.s,e.l):gt(""+e,yt,rt):new rt(e,t,n)}function it(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,new pt(i(e+120),i(e),i(e-120))}function st(e,t,n){return this instanceof st?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof st?new st(e.h,e.c,e.l):e instanceof ut?ft(e.l,e.a,e.b):ft((e=bt((e=Xo.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new st(e,t,n)}function ot(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ut(n,Math.cos(e*=Lu)*t,Math.sin(e)*t)}function ut(e,t,n){return this instanceof ut?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof ut?new ut(e.l,e.a,e.b):e instanceof st?ot(e.l,e.c,e.h):bt((e=pt(e)).r,e.g,e.b):new ut(e,t,n)}function at(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=lt(i)*Iu,r=lt(r)*qu,s=lt(s)*Ru,new pt(ht(3.2404542*i-1.5371385*r-.4985314*s),ht(-0.969266*i+1.8760108*r+.041556*s),ht(.0556434*i-.2040259*r+1.0572252*s))}function ft(e,t,n){return e>0?new st(Math.atan2(n,t)*Au,Math.sqrt(t*t+n*n),e):new st(0/0,0/0,e)}function lt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ct(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ht(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function pt(e,t,n){return this instanceof pt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof pt?new pt(e.r,e.g,e.b):gt(""+e,pt,it):new pt(e,t,n)}function dt(e){return new pt(e>>16,255&e>>8,255&e)}function vt(e){return dt(e)+""}function mt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function gt(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Et(i[0]),Et(i[1]),Et(i[2]))}return(s=Wu.get(e))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.substring(1),16))||(4===e.length?(o=(3840&s)>>4,o=o>>4|o,u=240&s,u=u>>4|u,a=15&s,a=a<<4|a):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function yt(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),new rt(r,i,a)}function bt(e,t,n){e=wt(e),t=wt(t),n=wt(n);var r=ct((.4124564*e+.3575761*t+.1804375*n)/Iu),i=ct((.2126729*e+.7151522*t+.072175*n)/qu),s=ct((.0193339*e+.119192*t+.9503041*n)/Ru);return ut(116*i-16,500*(r-i),200*(i-s))}function wt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Et(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function St(e){return"function"==typeof e?e:function(){return e}}function xt(e){return e}function Tt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Nt(t,n,e,r)}}function Nt(e,t,n,r){function i(){var e,t=a.status;if(!t&&a.responseText||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return o.error.call(s,r),void 0}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=Xo.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!Qo.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=Xo.event;Xo.event=e;try{o.progress.call(s,a)}finally{Xo.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat($o(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},Xo.rebind(s,o,"on"),null==r?s:s.get(Ct(r))}function Ct(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function kt(){var e=Lt(),t=At()-e;t>24?(isFinite(t)&&(clearTimeout(Ju),Ju=setTimeout(kt,t)),$u=0):($u=1,Qu(kt))}function Lt(){var e=Date.now();for(Ku=Xu;Ku;)e>=Ku.t&&(Ku.f=Ku.c(e-Ku.t)),Ku=Ku.n;return e}function At(){for(var e,t=Xu,n=1/0;t;)t.f?t=e?e.n=t.n:Xu=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return Vu=e,n}function Ot(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Mt(e,t){var n=Math.pow(10,3*su(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function _t(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r?function(e){for(var t=e.length,i=[],s=0,o=r[0];t>0&&o>0;)i.push(e.substring(t-=o,t+o)),o=r[s=(s+1)%r.length];return i.reverse().join(n)}:xt;return function(e){var n=Yu.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="=",c&&(l-=Math.floor((l-1)/4))),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=Zu.get(p)||Dt;var y=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):u;if(0>d){var a=Xo.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var b=e.lastIndexOf("."),w=0>b?e:e.substring(0,b),E=0>b?"":t+e.substring(b+1);!f&&c&&(w=s(w));var S=v.length+w.length+E.length+(y?0:i.length),x=l>S?(new Array(S=l-S+1)).join(r):"";return y&&(w=s(x+w)),i+=v,e=w+E,("<"===o?i+e+x:">"===o?x+i+e:"^"===o?x.substring(0,S>>=1)+i+e+x.substring(S):i+(y?e:x+e))+n}}}function Dt(e){return e+""}function Pt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ht(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ta(n-1)),1),n}function s(e,n){return t(e=new ta(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{ta=Pt;var r=new Pt;return r._=e,o(r,t,n)}finally{ta=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=Bt(e);return a.floor=a,a.round=Bt(r),a.ceil=Bt(i),a.offset=Bt(s),a.range=u,e}function Bt(e){return function(t,n){try{ta=Pt;var r=new Pt;return r._=t,e(r,n)._}finally{ta=Date}}}function jt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.substring(a,u)),null!=(i=ra[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.substring(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&ta!==Pt,o=new(s?Pt:ta);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+Math.floor(r.Z/100),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in ra?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.substring(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.substring(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.substring(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.substring(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.substring(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ta=Pt;var t=new ta;return t._=e,r(t)}finally{ta=Date}}var r=t(e);return n.parse=function(e){try{ta=Pt;var t=r.parse(e);return t&&t._}finally{ta=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=rn;var b=Xo.map(),w=It(v),E=qt(v),S=It(m),x=qt(m),T=It(g),N=qt(g),C=It(y),k=qt(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Ft(e.getDate(),t,2)},e:function(e,t){return Ft(e.getDate(),t,2)},H:function(e,t){return Ft(e.getHours(),t,2)},I:function(e,t){return Ft(e.getHours()%12||12,t,2)},j:function(e,t){return Ft(1+ea.dayOfYear(e),t,3)},L:function(e,t){return Ft(e.getMilliseconds(),t,3)},m:function(e,t){return Ft(e.getMonth()+1,t,2)},M:function(e,t){return Ft(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Ft(e.getSeconds(),t,2)},U:function(e,t){return Ft(ea.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ft(ea.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Ft(e.getFullYear()%100,t,2)},Y:function(e,t){return Ft(e.getFullYear()%1e4,t,4)},Z:tn,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:Kt,e:Kt,H:Gt,I:Gt,j:Qt,L:en,m:Jt,M:Yt,p:l,S:Zt,U:Ut,w:Rt,W:zt,x:a,X:f,y:Xt,Y:Wt,Z:Vt,"%":nn};return t}function Ft(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function It(e){return new RegExp("^(?:"+e.map(Xo.requote).join("|")+")","i")}function qt(e){for(var t=new o,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Rt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ut(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n));return r?(e.U=+r[0],n+r[0].length):-1}function zt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n));return r?(e.W=+r[0],n+r[0].length):-1}function Wt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.y=$t(+r[0]),n+r[0].length):-1}function Vt(e,t,n){return/^[+-]\d{4}$/.test(t=t.substring(n,n+5))?(e.Z=-t,n+5):-1}function $t(e){return e+(e>68?1900:2e3)}function Jt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Qt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function Gt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Yt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Zt(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function en(e,t,n){ia.lastIndex=0;var r=ia.exec(t.substring(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function tn(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=~~(su(t)/60),i=su(t)%60;return n+Ft(r,"0",2)+Ft(i,"0",2)}function nn(e,t,n){sa.lastIndex=0;var r=sa.exec(t.substring(n,n+1));return r?n+r[0].length:-1}function rn(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function sn(){}function on(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function un(e,t){e&&fa.hasOwnProperty(e.type)&&fa[e.type](e,t)}function an(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function fn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)an(e[n],t,1);t.polygonEnd()}function ln(){function e(e,t){e*=Lu,t=t*Lu/2+xu/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);ca.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;ha.point=function(o,u){ha.point=e,r=(t=o)*Lu,i=Math.cos(u=(n=u)*Lu/2+xu/4),s=Math.sin(u)},ha.lineEnd=function(){e(t,n)}}function cn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function dn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function mn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function gn(e){return[Math.atan2(e[1],e[0]),G(e[2])]}function yn(e,t){return su(e[0]-t[0])<Cu&&su(e[1]-t[1])<Cu}function bn(e,t){e*=Lu;var n=Math.cos(t*=Lu);wn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function wn(e,t,n){++pa,va+=(e-va)/pa,ma+=(t-ma)/pa,ga+=(n-ga)/pa}function En(){function e(e,i){e*=Lu;var s=Math.cos(i*=Lu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);da+=f,ya+=f*(t+(t=o)),ba+=f*(n+(n=u)),wa+=f*(r+(r=a)),wn(t,n,r)}var t,n,r;Ta.point=function(i,s){i*=Lu;var o=Math.cos(s*=Lu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),Ta.point=e,wn(t,n,r)}}function Sn(){Ta.point=bn}function xn(){function e(e,t){e*=Lu;var n=Math.cos(t*=Lu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-Q(p)/h,v=Math.atan2(h,p);Ea+=d*f,Sa+=d*l,xa+=d*c,da+=v,ya+=v*(r+(r=o)),ba+=v*(i+(i=u)),wa+=v*(s+(s=a)),wn(r,i,s)}var t,n,r,i,s;Ta.point=function(o,u){t=o,n=u,Ta.point=e,o*=Lu;var a=Math.cos(u*=Lu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),wn(r,i,s)},Ta.lineEnd=function(){e(t,n),Ta.lineEnd=Sn,Ta.point=bn}}function Tn(){return!0}function Nn(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(yn(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return i.lineEnd(),void 0}var a=new kn(n,e,null,!0),f=new kn(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new kn(r,e,null,!1),f=new kn(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Cn(s),Cn(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Cn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function kn(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ln(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(An))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=Xo.merge(p);var e=_n(g,d);p.length?(E||(s.polygonStart(),E=!0),Nn(p,Mn,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=On(),w=t(b),E=!1;return y}}function An(e){return e.length>1}function On(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:v,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Mn(e,t){return((e=e.x)[0]<0?e[1]-Nu-Cu:Nu-e[1])-((t=t.x)[0]<0?t[1]-Nu-Cu:Nu-t[1])}function _n(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;ca.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+xu/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+xu/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>xu,N=d*b;if(ca.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Tu:E,T^h>=n^g>=n){var C=pn(cn(c),cn(e));mn(C);var k=pn(i,C);mn(k);var L=(T^E>=0?-1:1)*G(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Cu>s||Cu>s&&0>ca)^1&o}function Dn(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?xu:-xu,a=su(s-n);su(a-xu)<Cu?(e.point(n,r=(r+o)/2>0?Nu:-Nu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=xu&&(su(n-i)<Cu&&(n-=i*Cu),su(s-u)<Cu&&(s-=u*Cu),r=Pn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Pn(e,t,n,r){var i,s,o=Math.sin(e-n);return su(o)>Cu?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function Hn(e,t,n,r){var i;if(null==e)i=n*Nu,r.point(-xu,i),r.point(0,i),r.point(xu,i),r.point(xu,0),r.point(xu,-i),r.point(0,-i),r.point(-xu,-i),r.point(-xu,0),r.point(-xu,i);else if(su(e[0]-t[0])>Cu){var s=e[0]<t[0]?xu:-xu;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Bn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?xu:-xu),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(yn(n,p)||yn(d,p))&&(d[0]+=Cu,d[1]+=Cu,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&yn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=cn(e),i=cn(t),o=[1,0,0],u=pn(r,i),a=hn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=pn(o,u),d=vn(o,c),v=vn(u,h);dn(d,v);var m=p,g=hn(d,m),y=hn(m,m),b=g*g-y*(hn(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=vn(m,(-g-w)/y);if(dn(E,d),E=gn(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=su(k-xu)<Cu,A=L||Cu>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(su(E[0]-x)<Cu?N:C):N<=E[1]&&E[1]<=C:k>xu^(x<=E[0]&&E[0]<=T)){var O=vn(m,(-g+w)/y);return dn(O,d),[E,gn(O)]}}}function i(t,n){var r=o?e:xu-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=su(s)>Cu,a=lr(e,6*Lu);return Ln(t,n,a,o?[0,-e]:[-xu,e-xu])}function jn(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function Fn(e,t,n,r){function i(r,i){return su(r[0]-e)<Cu?i>0?0:3:su(r[0]-n)<Cu?i>0?2:1:su(r[1]-t)<Cu?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&K(f,s,e)>0&&++t:s[1]<=r&&K(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=0/0}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-Ca,Math.min(Ca,e)),t=Math.max(-Ca,Math.min(Ca,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=On(),L=jn(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=Xo.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&Nn(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function In(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function qn(e){var t=0,n=xu/3,r=nr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*xu/180,n=e[1]*xu/180):[180*(t/xu),180*(n/xu)]},i}function Rn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,G((s-(e*e+n*n)*i*i)/(2*i))]},n}function Un(){function e(e,t){La+=i*e-r*t,r=e,i=t}var t,n,r,i;Da.point=function(s,o){Da.point=e,t=r=s,n=i=o},Da.lineEnd=function(){e(t,n)}}function zn(e,t){Aa>e&&(Aa=e),e>Ma&&(Ma=e),Oa>t&&(Oa=t),t>_a&&(_a=t)}function Wn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Xn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Xn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Xn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Vn(e,t){va+=e,ma+=t,++ga}function $n(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);ya+=o*(t+e)/2,ba+=o*(n+r)/2,wa+=o,Vn(t=e,n=r)}var t,n;Ha.point=function(r,i){Ha.point=e,Vn(t=r,n=i)}}function Jn(){Ha.point=Vn}function Kn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);ya+=o*(r+e)/2,ba+=o*(i+t)/2,wa+=o,o=i*e-r*t,Ea+=o*(r+e),Sa+=o*(i+t),xa+=3*o,Vn(r=e,i=t)}var t,n,r,i;Ha.point=function(s,o){Ha.point=e,Vn(t=r=s,n=i=o)},Ha.lineEnd=function(){e(t,n)}}function Qn(e){function t(t,n){e.moveTo(t,n),e.arc(t,n,o,0,Tu)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:v};return u}function Gn(e){function t(e){return(u?r:n)(e)}function n(t){return er(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,T.point=s,t.lineStart()}function s(n,r){var s=cn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=su(su(x)-1)<Cu||su(r-h)<Cu?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||su((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Lu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function Yn(e){var t=Gn(function(t,n){return e([t*Au,n*Au])});return function(e){return rr(t(e))}}function Zn(e){this.stream=e}function er(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function tr(e){return nr(function(){return e})()}function nr(e){function t(e){return e=u(e[0]*Lu,e[1]*Lu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*Au,e[1]*Au]}function r(){u=In(o=or(g,y,b),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=Gn(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,y=0,b=0,w=Na,E=xt,S=null,x=null;return t.stream=function(e){return l&&(l.valid=!1),l=rr(w(o,c(E(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(w=null==e?(S=e,Na):Bn((S=+e)*Lu),i()):S},t.clipExtent=function(e){return arguments.length?(x=e,E=e?Fn(e[0][0],e[0][1],e[1][0],e[1][1]):xt,i()):x},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Lu,m=e[1]%360*Lu,r()):[v*Au,m*Au]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Lu,y=e[1]%360*Lu,b=e.length>2?e[2]%360*Lu:0,r()):[g*Au,y*Au,b*Au]},Xo.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function rr(e){return er(e,function(t,n){e.point(t*Lu,n*Lu)})}function ir(e,t){return[e,t]}function sr(e,t){return[e>xu?e-Tu:-xu>e?e+Tu:e,t]}function or(e,t,n){return e?t||n?In(ar(e),fr(t,n)):ar(e):t||n?fr(t,n):sr}function ur(e){return function(t,n){return t+=e,[t>xu?t-Tu:-xu>t?t+Tu:t,n]}}function ar(e){var t=ur(e);return t.invert=ur(-e),t}function fr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),G(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),G(l*r-u*i)]},n}function lr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=cr(n,i),s=cr(n,s),(o>0?s>i:i>s)&&(i+=o*Tu)):(i=e+o*Tu,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=gn([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function cr(e,t){var n=cn(t);n[0]-=e,mn(n);var r=Q(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Cu)%(2*Math.PI)}function hr(e,t,n){var r=Xo.range(e,t-Cu,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function pr(e,t,n){var r=Xo.range(e,t-Cu,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function dr(e){return e.source}function vr(e){return e.target}function mr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(tt(r-t)+i*o*tt(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*Au,Math.atan2(o,Math.sqrt(r*r+i*i))*Au]}:function(){return[e*Au,t*Au]};return d.distance=h,d}function gr(){function e(e,i){var s=Math.sin(i*=Lu),o=Math.cos(i),u=su((e*=Lu)-t),a=Math.cos(u);Ba+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;ja.point=function(i,s){t=i*Lu,n=Math.sin(s*=Lu),r=Math.cos(s),ja.point=e},ja.lineEnd=function(){ja.point=ja.lineEnd=v}}function yr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function br(e,t){function n(e,t){o>0?-Nu+Cu>t&&(t=-Nu+Cu):t>Nu-Cu&&(t=Nu-Cu);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(xu/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=J(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Nu]},n):Er}function wr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return su(i)<Cu?ir:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-J(i)*Math.sqrt(e*e+n*n)]},n)}function Er(e,t){return[e,Math.log(Math.tan(xu/4+t/2))]}function Sr(e){var t,n=tr(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=xu*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function xr(e,t){return[Math.log(Math.tan(xu/4+t/2)),-e]}function Tr(e){return e[0]}function Nr(e){return e[1]}function Cr(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&K(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function kr(e,t){return e[0]-t[0]||e[1]-t[1]}function Lr(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ar(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Or(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Mr(){Yr(this),this.edge=this.site=this.circle=null}function _r(e){var t=Ka.pop()||new Mr;return t.site=e,t}function Dr(e){zr(e),Va.remove(e),Ka.push(e),Yr(e)}function Pr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];Dr(e);for(var a=s;a.circle&&su(n-a.circle.x)<Cu&&su(r-a.circle.cy)<Cu;)s=a.P,u.unshift(a),Dr(a),a=s;u.unshift(a),zr(a);for(var f=o;f.circle&&su(n-f.circle.x)<Cu&&su(r-f.circle.cy)<Cu;)o=f.N,u.push(f),Dr(f),f=o;u.push(f),zr(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],Kr(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=$r(a.site,f.site,null,i),Ur(a),Ur(f)}function Hr(e){for(var t,n,r,i,s=e.x,o=e.y,u=Va._;u;)if(r=Br(u,o)-s,r>Cu)u=u.L;else{if(i=s-jr(u,o),!(i>Cu)){r>-Cu?(t=u.P,n=u):i>-Cu?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=_r(e);if(Va.insert(t,a),t||n){if(t===n)return zr(t),n=_r(t.site),Va.insert(a,n),a.edge=n.edge=$r(t.site,a.site),Ur(t),Ur(n),void 0;if(!n)return a.edge=$r(t.site,a.site),void 0;zr(t),zr(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};Kr(n.edge,f,d,w),a.edge=$r(f,e,null,w),n.edge=$r(e,d,null,w),Ur(t),Ur(n)}}function Br(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function jr(e,t){var n=e.N;if(n)return Br(n,t);var r=e.site;return r.y===t?r.x:1/0}function Fr(e){this.site=e,this.edges=[]}function Ir(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=Xa,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(su(r-t)>Cu||su(i-n)>Cu)&&(u.splice(o,0,new Qr(Jr(s.site,l,su(r-c)<Cu&&d-i>Cu?{x:c,y:su(t-c)<Cu?n:d}:su(i-d)<Cu&&h-r>Cu?{x:su(n-d)<Cu?t:h,y:d}:su(r-h)<Cu&&i-p>Cu?{x:h,y:su(t-h)<Cu?n:p}:su(i-p)<Cu&&r-c>Cu?{x:su(n-p)<Cu?t:c,y:p}:null),s.site,null)),++a)}function qr(e,t){return t.angle-e.angle}function Rr(){Yr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ur(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-ku)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=Qa.pop()||new Rr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=Ja._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Ja.insert(y,g),y||($a=g)}}}}function zr(e){var t=e.circle;t&&(t.P||($a=t.N),Ja.remove(t),Qa.push(t),Yr(t),e.circle=null)}function Wr(e){for(var t,n=Wa,r=jn(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Xr(t,e)||!r(t)||su(t.a.x-t.b.x)<Cu&&su(t.a.y-t.b.y)<Cu)&&(t.a=t.b=null,n.splice(i,1))}function Xr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Vr(e,t){this.l=e,this.r=t,this.a=this.b=null}function $r(e,t,n,r){var i=new Vr(e,t);return Wa.push(i),n&&Kr(i,e,t,n),r&&Kr(i,t,e,r),Xa[e.i].edges.push(new Qr(i,e,t)),Xa[t.i].edges.push(new Qr(i,t,e)),i}function Jr(e,t,n){var r=new Vr(e,null);return r.a=t,r.b=n,Wa.push(r),r}function Kr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function Qr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Gr(){this._=null}function Yr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Zr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ei(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ti(e){for(;e.L;)e=e.L;return e}function ni(e,t){var n,r,i,s=e.sort(ri).pop();for(Wa=[],Xa=new Array(e.length),Va=new Gr,Ja=new Gr;;)if(i=$a,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&(Xa[s.i]=new Fr(s),Hr(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Pr(i.arc)}t&&(Wr(t),Ir(t));var o={cells:Xa,edges:Wa};return Va=Ja=Wa=Xa=null,o}function ri(e,t){return t.y-e.y||t.x-e.x}function ii(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function si(e){return e.x}function oi(e){return e.y}function ui(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ai(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&ai(e,a[0],n,r,o,u),a[1]&&ai(e,a[1],o,r,i,u),a[2]&&ai(e,a[2],n,u,o,s),a[3]&&ai(e,a[3],o,u,i,s)}}function fi(e,t){e=Xo.rgb(e),t=Xo.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+mt(Math.round(n+s*e))+mt(Math.round(r+o*e))+mt(Math.round(i+u*e))}}function li(e,t){var n,r={},i={};for(n in e)n in t?r[n]=pi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function ci(e,t){return t-=e=+e,function(n){return e+t*n}}function hi(e,t){var n,r,i,s=Ya.lastIndex=Za.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=Ya.exec(e))&&(r=Za.exec(t));)(i=r.index)>s&&(i=t.substring(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:ci(n,r)})),s=Za.lastIndex;return s<t.length&&(i=t.substring(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;t>r;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function pi(e,t){for(var n,r=Xo.interpolators.length;--r>=0&&!(n=Xo.interpolators[r](e,t)););return n}function di(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(pi(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function vi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function mi(e){return function(t){return 1-e(1-t)}}function gi(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function yi(e){return e*e}function bi(e){return e*e*e}function wi(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ei(e){return function(t){return Math.pow(t,e)}}function Si(e){return 1-Math.cos(e*Nu)}function xi(e){return Math.pow(2,10*(e-1))}function Ti(e){return 1-Math.sqrt(1-e*e)}function Ni(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Tu*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Tu/t)}}function Ci(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function ki(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Li(e,t){e=Xo.hcl(e),t=Xo.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return ot(n+s*e,r+o*e,i+u*e)+""}}function Ai(e,t){e=Xo.hsl(e),t=Xo.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return it(n+s*e,r+o*e,i+u*e)+""}}function Oi(e,t){e=Xo.lab(e),t=Xo.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return at(n+s*e,r+o*e,i+u*e)+""}}function Mi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function _i(e){var t=[e.a,e.b],n=[e.c,e.d],r=Pi(t),i=Di(t,n),s=Pi(Hi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Au,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Au:0}function Di(e,t){return e[0]*t[0]+e[1]*t[1]}function Pi(e){var t=Math.sqrt(Di(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Hi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Bi(e,t){var n,r=[],i=[],s=Xo.transform(e),o=Xo.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:ci(u[0],a[0])},{i:3,x:ci(u[1],a[1])})):a[0]||a[1]?r.push("translate("+a+")"):r.push(""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:ci(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:ci(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:ci(p[0],d[0])},{i:n-2,x:ci(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function ji(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function Fi(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function Ii(e){for(var t=e.source,n=e.target,r=Ri(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function qi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Ri(e,t){if(e===t)return e;for(var n=qi(e),r=qi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function Ui(e){e.fixed|=2}function zi(e){e.fixed&=-7}function Wi(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Xi(e){e.fixed&=-5}function Vi(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(Vi(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function $i(e,t){return Xo.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=Zi,e}function Ji(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ki(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function Qi(e){return e.children}function Gi(e){return e.value}function Yi(e,t){return t.value-e.value}function Zi(e){return Xo.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function es(e){return e.x}function ts(e){return e.y}function ns(e,t,n){e.y0=t,e.y=n}function rs(e){return Xo.range(e.length)}function is(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ss(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function os(e){return e.reduce(us,0)}function us(e,t){return e+t[1]}function as(e,t){return fs(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function fs(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function ls(e){return[Xo.min(e),Xo.max(e)]}function cs(e,t){return e.value-t.value}function hs(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ps(e,t){e._pack_next=t,t._pack_prev=e}function ds(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function vs(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(ms),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],bs(r,i,s),t(s),hs(r,s),r._pack_prev=s,hs(s,i),i=r._pack_next,o=3;f>o;o++){bs(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(ds(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!ds(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?ps(r,i=u):ps(r=a,i),o--):(hs(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(gs)}}function ms(e){e._pack_next=e._pack_prev=e}function gs(e){delete e._pack_next,delete e._pack_prev}function ys(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)ys(i[s],t,n,r)}function bs(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function ws(e,t){return e.parent==t.parent?1:2}function Es(e){var t=e.children;return t.length?t[0]:e.t}function Ss(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function xs(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ts(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ns(e,t,n){return e.a.parent===t.parent?e.a:n}function Cs(e){return 1+Xo.max(e,function(e){return e.y})}function ks(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ls(e){var t=e.children;return t&&t.length?Ls(t[0]):e}function As(e){var t,n=e.children;return n&&(t=n.length)?As(n[t-1]):e}function Os(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Ms(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function _s(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Ds(e){return e.rangeExtent?e.rangeExtent():_s(e.range())}function Ps(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Hs(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Bs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:cf}function js(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=Xo.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function Fs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?js:Ps,a=r?Fi:ji;return o=i(e,t,a,n),u=i(t,e,a,pi),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Mi)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return Us(e,t)},s.tickFormat=function(t,n){return zs(e,t,n)},s.nice=function(t){return qs(e,t),i()},s.copy=function(){return Fs(e,t,n,r)},i()}function Is(e,t){return Xo.rebind(e,t,"range","rangeRound","interpolate","clamp")}function qs(e,t){return Hs(e,Bs(Rs(e,t)[2]))}function Rs(e,t){null==t&&(t=10);var n=_s(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Us(e,t){return Xo.range.apply(Xo,Rs(e,t))}function zs(e,t,n){var r=Rs(e,t);if(n){var i=Yu.exec(n);if(i.shift(),"s"===i[8]){var s=Xo.formatPrefix(Math.max(su(r[0]),su(r[1])));return i[7]||(i[7]="."+Ws(s.scale(r[2]))),i[8]="f",n=Xo.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+Xs(i[8],r)),n=i.join("")}else n=",."+Ws(r[2])+"f";return Xo.format(n)}function Ws(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Xs(e,t){var n=Ws(t[2]);return e in hf?Math.abs(n-Ws(Math.max(su(t[0]),su(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Vs(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Hs(r.map(i),n?Math:df);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=_s(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return pf;arguments.length<2?t=pf:"function"!=typeof t&&(t=Xo.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return Vs(e.copy(),t,n,r)},Is(o,e)}function $s(e,t,n){function r(t){return e(i(t))}var i=Js(t),s=Js(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Us(n,e)},r.tickFormat=function(e,t){return zs(n,e,t)},r.nice=function(e){return r.domain(qs(n,e))},r.exponent=function(o){return arguments.length?(i=Js(t=o),s=Js(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return $s(e.copy(),t,n)},Is(r,e)}function Js(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function Ks(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%s.length]}function r(t,n){return Xo.range(e.length).map(function(e){return t+n*e})}var i,s,u;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new o;for(var s,u=-1,a=r.length;++u<a;)i.has(s=r[u])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,u=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,o){arguments.length<2&&(o=0);var a=i[0],f=i[1],l=(f-a)/(Math.max(1,e.length-1)+o);return s=r(e.length<2?(a+f)/2:a+l*o/2,l),u=0,t={t:"rangePoints",a:arguments},n},n.rangeBands=function(i,o,a){arguments.length<2&&(o=0),arguments.length<3&&(a=o);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-o+2*a);return s=r(l+h*a,h),f&&s.reverse(),u=h*(1-o),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,o,a){arguments.length<2&&(o=0),arguments.length<3&&(a=o);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-o+2*a)),p=c-l-(e.length-o)*h;return s=r(l+Math.round(p/2),h),f&&s.reverse(),u=Math.round(h*(1-o)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return u},n.rangeExtent=function(){return _s(t.a[0])},n.copy=function(){return Ks(e,t)},n.domain(e)}function Qs(n,r){function i(){var e=0,t=r.length;for(o=[];++e<t;)o[e-1]=Xo.quantile(n,e/t);return s}function s(e){return isNaN(e=+e)?void 0:r[Xo.bisect(o,e)]}var o;return s.domain=function(r){return arguments.length?(n=r.filter(t).sort(e),i()):n},s.range=function(e){return arguments.length?(r=e,i()):r},s.quantiles=function(){return o},s.invertExtent=function(e){return e=r.indexOf(e),0>e?[0/0,0/0]:[e>0?o[e-1]:n[0],e<o.length?o[e]:n[n.length-1]]},s.copy=function(){return Qs(n,r)},i()}function Gs(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return Gs(e,t,n)},i()}function Ys(e,t){function n(n){return n>=n?t[Xo.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return Ys(e,t)},n}function Zs(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Us(e,t)},t.tickFormat=function(t,n){return zs(e,t,n)},t.copy=function(){return Zs(e)},t}function eo(e){return e.innerRadius}function to(e){return e.outerRadius}function no(e){return e.startAngle}function ro(e){return e.endAngle}function io(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=St(n),d=St(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Tr,r=Nr,i=Tn,s=so,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Ef.get(e)||so).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function so(e){return e.join("L")}function oo(e){return so(e)+"Z"}function uo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ao(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function fo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function lo(e,t){return e.length<4?so(e):e[1]+po(e.slice(1,e.length-1),vo(e,t))}function co(e,t){return e.length<3?so(e):e[0]+po((e.push(e[0]),e),vo([e[e.length-2]].concat(e,[e[1]]),t))}function ho(e,t){return e.length<3?so(e):e[0]+po(e,vo(e,t))}function po(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return so(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function vo(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function mo(e){if(e.length<3)return so(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",wo(Tf,o),",",wo(Tf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Eo(a,o,u);return e.pop(),a.push("L",r),a.join("")}function go(e){if(e.length<4)return so(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(wo(Tf,s)+","+wo(Tf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Eo(n,s,o);return n.join("")}function yo(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[wo(Tf,o),",",wo(Tf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Eo(t,o,u);return t.join("")}function bo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return mo(e)}function wo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Eo(e,t,n){e.push("C",wo(Sf,t),",",wo(Sf,n),",",wo(xf,t),",",wo(xf,n),",",wo(Tf,t),",",wo(Tf,n))}function So(e,t){return(t[1]-e[1])/(t[0]-e[0])}function xo(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=So(i,s);++t<n;)r[t]=(o+(o=So(i=s,s=e[t+1])))/2;return r[t]=o,r}function To(e){for(var t,n,r,i,s=[],o=xo(e),u=-1,a=e.length-1;++u<a;)t=So(e[u],e[u+1]),su(t)<Cu?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function No(e){return e.length<3?so(e):e[0]+po(e,To(e))}function Co(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]+bf,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ko(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=St(n),E=St(i),S=n===r?function(){return p}:St(r),x=i===s?function(){return d}:St(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Tr,r=Tr,i=0,s=Nr,o=Tn,u=so,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Ef.get(e)||so).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function Lo(e){return e.radius}function Ao(e){return[e.x,e.y]}function Oo(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+bf;return[n*Math.cos(r),n*Math.sin(r)]}}function Mo(){return 64}function _o(){return"circle"}function Do(e){var t=Math.sqrt(e/xu);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Po(e,t){return lu(e,Of),e.id=t,e}function Ho(e,t,n,r){var i=e.id;return B(e,"function"==typeof n?function(e,s,o){e.__transition__[i].tween.set(t,r(n.call(e,e.__data__,s,o)))}:(n=r(n),function(e){e.__transition__[i].tween.set(t,n)}))}function Bo(e){return null==e&&(e=""),function(){this.textContent=e}}function jo(e,t,n,r){var i=e.__transition__||(e.__transition__={active:0,count:0}),s=i[n];if(!s){var u=r.time;s=i[n]={tween:new o,time:u,ease:r.ease,delay:r.delay,duration:r.duration},++i.count,Xo.timer(function(r){function o(r){return i.active>n?f():(i.active=n,s.event&&s.event.start.call(e,l,t),s.tween.forEach(function(n,r){(r=r.call(e,l,t))&&v.push(r)}),Xo.timer(function(){return d.c=a(r||1)?Tn:a,1},0,u),void 0)}function a(r){if(i.active!==n)return f();for(var o=r/p,u=c(o),a=v.length;a>0;)v[--a].call(e,u);return o>=1?(s.event&&s.event.end.call(e,l,t),f()):void 0}function f(){return--i.count?delete i[n]:delete e.__transition__,1}var l=e.__data__,c=s.ease,h=s.delay,p=s.duration,d=Ku,v=[];return d.t=h+u,r>=h?o(r-h):(d.c=o,void 0)},0,u)}}function Fo(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function Io(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function qo(e){return e.toISOString()}function Ro(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=Xo.bisect(If,i);return s==If.length?[t.year,Rs(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/If[s-1]<If[s]/i?s-1:s]:[Uf,Rs(e,n)[2]]}return r.invert=function(t){return Uo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Uo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Uo(+n+1),t).length}var s=r.domain(),o=_s(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(Hs(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Uo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Uo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=_s(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],Uo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Ro(e.copy(),t,n)},Is(r,e)}function Uo(e){return new Date(e)}function zo(e){return JSON.parse(e.responseText)}function Wo(e){var t=Jo.createRange();return t.selectNode(Jo.body),t.createContextualFragment(e.responseText)}var Xo={version:"3.4.11"};Date.now||(Date.now=function(){return+(new Date)});var Vo=[].slice,$o=function(e){return Vo.call(e)},Jo=document,Ko=Jo.documentElement,Qo=window;try{$o(Ko.childNodes)[0].nodeType}catch(Go){$o=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}try{Jo.createElement("div").style.setProperty("opacity",0,"")}catch(Yo){var Zo=Qo.Element.prototype,eu=Zo.setAttribute,tu=Zo.setAttributeNS,nu=Qo.CSSStyleDeclaration.prototype,ru=nu.setProperty;Zo.setAttribute=function(e,t){eu.call(this,e,t+"")},Zo.setAttributeNS=function(e,t,n){tu.call(this,e,t,n+"")},nu.setProperty=function(e,t,n){ru.call(this,e,t+"",n)}}Xo.ascending=e,Xo.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},Xo.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},Xo.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s&&!(null!=(n=e[i])&&n>=n);)n=void 0;for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s&&!(null!=(n=t.call(e,e[i],i))&&n>=n);)n=void 0;for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},Xo.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o&&!(null!=(n=i=e[s])&&n>=n);)n=i=void 0;for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o&&!(null!=(n=i=t.call(e,e[s],s))&&n>=n);)n=void 0;for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},Xo.sum=function(e,t){var n,r=0,i=e.length,s=-1;if(1===arguments.length)for(;++s<i;)isNaN(n=+e[s])||(r+=n);else for(;++s<i;)isNaN(n=+t.call(e,e[s],s))||(r+=n);return r},Xo.mean=function(e,n){var r,i=0,s=e.length,o=-1,u=s;if(1===arguments.length)for(;++o<s;)t(r=e[o])?i+=r:--u;else for(;++o<s;)t(r=n.call(e,e[o],o))?i+=r:--u;return u?i/u:void 0},Xo.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},Xo.median=function(n,r){return arguments.length>1&&(n=n.map(r)),n=n.filter(t),n.length?Xo.quantile(n.sort(e),.5):void 0};var iu=n(e);Xo.bisectLeft=iu.left,Xo.bisect=Xo.bisectRight=iu.right,Xo.bisector=function(t){return n(1===t.length?function(n,r){return e(t(n),r)}:t)},Xo.shuffle=function(e){for(var t,n,r=e.length;r;)n=0|Math.random()*r--,t=e[r],e[r]=e[n],e[n]=t;return e},Xo.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},Xo.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},Xo.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=Xo.min(arguments,r),n=new Array(t);++e<t;)for(var i,s=-1,o=n[e]=new Array(i);++s<i;)o[s]=arguments[s][e];return n},Xo.transpose=function(e){return Xo.zip.apply(Xo,e)},Xo.keys=function(e){var t=[];for(var n in e)t.push(n);return t},Xo.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},Xo.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Xo.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var su=Math.abs;Xo.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),1/0===(t-e)/n)throw new Error("infinite range");var r,s=[],o=i(su(n)),u=-1;if(e*=o,t*=o,n*=o,0>n)for(;(r=e+n*++u)>t;)s.push(r/o);else for(;(r=e+n*++u)<t;)s.push(r/o);return s},Xo.map=function(e){var t=new o;if(e instanceof o)e.forEach(function(e,n){t.set(e,n)});else for(var n in e)t.set(n,e[n]);return t},s(o,{has:u,get:function(e){return this[ou+e]},set:function(e,t){return this[ou+e]=t},remove:a,keys:f,values:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e},entries:function(){var e=[];return this.forEach(function(t,n){e.push({key:t,value:n})}),e},size:l,empty:c,forEach:function(e){for(var t in this)t.charCodeAt(0)===uu&&e.call(this,t.substring(1),this[t])}});var ou="\0",uu=ou.charCodeAt(0);Xo.nest=function(){function e(t,u,a){if(a>=s.length)return r?r.call(i,u):n?u.sort(n):u;for(var f,l,c,h,p=-1,d=u.length,v=s[a++],m=new o;++p<d;)(h=m.get(f=v(l=u[p])))?h.push(l):m.set(f,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,a))}):(l={},c=function(n,r){l[n]=e(t,r,a)}),m.forEach(c),l}function t(e,n){if(n>=s.length)return e;var r=[],i=u[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],u=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(Xo.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return u[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},Xo.set=function(e){var t=new h;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},s(h,{has:u,add:function(e){return this[ou+e]=!0,e},remove:function(e){return e=ou+e,e in this&&delete this[e]},values:f,size:l,empty:c,forEach:function(e){for(var t in this)t.charCodeAt(0)===uu&&e.call(this,t.substring(1))}}),Xo.behavior={},Xo.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=p(e,t,t[n]);return e};var au=["webkit","ms","moz","Moz","o","O"];Xo.dispatch=function(){for(var e=new m,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=g(e);return e},m.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.substring(n+1),e=e.substring(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},Xo.event=null,Xo.requote=function(e){return e.replace(fu,"\\$&")};var fu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},cu=function(e,t){return t.querySelector(e)},hu=function(e,t){return t.querySelectorAll(e)},pu=Ko.matches||Ko[d(Ko,"matchesSelector")],du=function(e,t){return pu.call(e,t)};"function"==typeof Sizzle&&(cu=function(e,t){return Sizzle(e,t)[0]||null},hu=Sizzle,du=Sizzle.matchesSelector),Xo.selection=function(){return yu};var vu=Xo.selection.prototype=[];vu.select=function(e){var t,n,r,i,s=[];e=S(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return E(s)},vu.selectAll=function(e){var t,n,r=[];e=x(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=$o(e.call(n,n.__data__,u,i))),t.parentNode=n);return E(r)};var mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Xo.ns={prefix:mu,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.substring(0,t),e=e.substring(t+1)),mu.hasOwnProperty(n)?{space:mu[n],local:e}:e}},vu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=Xo.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(T(t,e[t]));return this}return this.each(T(e,t))},vu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=k(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!C(e[i]).test(t))return!1;return!0}for(t in e)this.each(L(t,e[t]));return this}return this.each(L(e,t))},vu.style=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t="");for(n in e)this.each(O(n,e[n],t));return this}if(2>r)return Qo.getComputedStyle(this.node(),null).getPropertyValue(e);n=""}return this.each(O(e,t,n))},vu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(M(t,e[t]));return this}return this.each(M(e,t))},vu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},vu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},vu.append=function(e){return e=_(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},vu.insert=function(e,t){return e=_(e),t=S(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},vu.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},vu.data=function(e,t){function n(e,n){var r,i,s,u=e.length,c=n.length,h=Math.min(u,c),p=new Array(c),d=new Array(c),v=new Array(u);if(t){var m,g=new o,y=new o,b=[];for(r=-1;++r<u;)m=t.call(i=e[r],i.__data__,r),g.has(m)?v[r]=i:g.set(m,i),b.push(m);for(r=-1;++r<c;)m=t.call(n,s=n[r],r),(i=g.get(m))?(p[r]=i,i.__data__=s):y.has(m)||(d[r]=D(s)),y.set(m,s),g.remove(m);for(r=-1;++r<u;)g.has(b[r])&&(v[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=D(s);for(;c>r;++r)d[r]=D(n[r]);for(;u>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,a.push(d),f.push(p),l.push(v)}var r,i,s=-1,u=this.length;if(!arguments.length){for(e=new Array(u=(r=this[0]).length);++s<u;)(i=r[s])&&(e[s]=i.__data__);return e}var a=j([]),f=E([]),l=E([]);if("function"==typeof e)for(;++s<u;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<u;)n(r=this[s],e);return f.enter=function(){return a},f.exit=function(){return l},f},vu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},vu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=P(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return E(i)},vu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},vu.sort=function(e){e=H.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},vu.each=function(e){return B(this,function(t,n,r){e.call(t,t.__data__,n,r)})},vu.call=function(e){var t=$o(arguments);return e.apply(t[0]=this,t),this},vu.empty=function(){return!this.node()},vu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},vu.size=function(){var e=0;return this.each(function(){++e}),e};var gu=[];Xo.selection.enter=j,Xo.selection.enter.prototype=gu,gu.append=vu.append,gu.empty=vu.empty,gu.node=vu.node,gu.call=vu.call,gu.size=vu.size,gu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return E(o)},gu.insert=function(e,t){return arguments.length<2&&(t=F(this)),vu.insert.call(this,e,t)},vu.transition=function(){for(var e,t,n=Cf||++Mf,r=[],i=kf||{time:Date.now(),ease:wi,delay:0,duration:250},s=-1,o=this.length;++s<o;){r.push(e=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(t=u[a])&&jo(t,a,n,i),e.push(t)}return Po(r,n)},vu.interrupt=function(){return this.each(I)},Xo.select=function(e){var t=["string"==typeof e?cu(e,Jo):e];return t.parentNode=Ko,E([t])},Xo.selectAll=function(e){var t=$o("string"==typeof e?hu(e,Jo):e);return t.parentNode=Ko,E([t])};var yu=Xo.select(Ko);vu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(q(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(q(e,t,n))};var bu=Xo.map({mouseenter:"mouseover",mouseleave:"mouseout"});bu.forEach(function(e){"on"+e in Jo&&bu.remove(e)});var wu="onselectstart"in Jo?null:d(Ko.style,"userSelect"),Eu=0;Xo.mouse=function(e){return W(e,b())};var Su=/WebKit/.test(Qo.navigator.userAgent)?-1:0;Xo.touches=function(e,t){return arguments.length<2&&(t=b().touches),t?$o(t).map(function(t){var n=W(e,t);return n.identifier=t.identifier,n}):[]},Xo.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",s)}function t(e,t,i,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d&&Xo.event.target===c),p({type:"dragend"}))}var f,l=this,c=Xo.event.target,h=l.parentNode,p=n.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=Xo.select(i()).on(s+m,u).on(o+m,a),y=z(),b=t(h,v);r?(f=r.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var n=w(e,"drag","dragstart","dragend"),r=null,i=t(v,Xo.mouse,$,"mousemove","mouseup"),s=t(X,Xo.touch,V,"touchmove","touchend");return e.origin=function(t){return arguments.length?(r=t,e):r},Xo.rebind(e,n,"on")};var xu=Math.PI,Tu=2*xu,Nu=xu/2,Cu=1e-6,ku=Cu*Cu,Lu=xu/180,Au=180/xu,Ou=Math.SQRT2,Mu=2,_u=4;Xo.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=Z(v),o=s/(Mu*h)*(n*et(Ou*t+v)-Y(v));return[r+o*f,i+o*l,s*n/Z(Ou*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Ou*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+_u*c)/(2*s*Mu*h),d=(a*a-s*s-_u*c)/(2*a*Mu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Ou;return n.duration=1e3*y,n},Xo.behavior.zoom=function(){function e(e){e.on(k,f).on(Hu+".zoom",c).on("dblclick.zoom",h).on(O,l)}function t(e){return[(e[0]-T.x)/T.k,(e[1]-T.y)/T.k]}function n(e){return[e[0]*T.k+T.x,e[1]*T.k+T.y]}function r(e){T.k=Math.max(C[0],Math.min(C[1],e))}function i(e,t){t=n(t),T.x+=e[0]-t[0],T.y+=e[1]-t[1]}function s(){E&&E.domain(b.range().map(function(e){return(e-T.x)/T.k}).map(b.invert)),x&&x.domain(S.range().map(function(e){return(e-T.y)/T.k}).map(S.invert))}function o(e){e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function a(e){e({type:"zoomend"})}function f(){function e(){l=1,i(Xo.mouse(r),h),u(f)}function n(){c.on(L,null).on(A,null),p(l&&Xo.event.target===s),a(f)}var r=this,s=Xo.event.target,f=M.of(r,arguments),l=0,c=Xo.select(Qo).on(L,e).on(A,n),h=t(Xo.mouse(r)),p=z();I.call(r),o(f)}function l(){function e(){var e=Xo.touches(p);return h=T.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=t(e))}),e}function n(){var t=Xo.event.target;Xo.select(t).on(w,s).on(E,c),S.push(t);for(var n=Xo.event.changedTouches,o=0,a=n.length;a>o;++o)v[n[o].identifier]=null;var f=e(),l=Date.now();if(1===f.length){if(500>l-g){var h=f[0],p=v[h.identifier];r(2*T.k),i(h,p),y(),u(d)}g=l}else if(f.length>1){var h=f[0],b=f[1],x=h[0]-b[0],N=h[1]-b[1];m=x*x+N*N}}function s(){for(var e,t,n,s,o=Xo.touches(p),a=0,f=o.length;f>a;++a,s=null)if(n=o[a],s=v[n.identifier]){if(t)break;e=n,t=s}if(s){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=m&&Math.sqrt(l/m);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+s[0])/2,(t[1]+s[1])/2],r(c*h)}g=null,i(e,t),u(d)}function c(){if(Xo.event.touches.length){for(var t=Xo.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var i in v)return void e()}Xo.selectAll(S).on(b,null),x.on(k,f).on(O,l),N(),a(d)}var h,p=this,d=M.of(p,arguments),v={},m=0,b=".zoom-"+Xo.event.changedTouches[0].identifier,w="touchmove"+b,E="touchend"+b,S=[],x=Xo.select(p).on(k,null).on(O,n),N=z();I.call(p),n(),o(d)}function c(){var e=M.of(this,arguments);m?clearTimeout(m):(p=t(d=v||Xo.mouse(this)),I.call(this),o(e)),m=setTimeout(function(){m=null,a(e)},50),y(),r(Math.pow(2,.002*Du())*T.k),i(d,p),u(e)}function h(){var e=M.of(this,arguments),n=Xo.mouse(this),s=t(n),f=Math.log(T.k)/Math.LN2;o(e),r(Math.pow(2,Xo.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)),i(n,s),u(e),a(e)}var p,d,v,m,g,b,E,S,x,T={x:0,y:0,k:1},N=[960,500],C=Pu,k="mousedown.zoom",L="mousemove.zoom",A="mouseup.zoom",O="touchstart.zoom",M=w(e,"zoomstart","zoom","zoomend");return e.event=function(e){e.each(function(){var e=M.of(this,arguments),t=T;Cf?Xo.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},o(e)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],i=n/2,s=r/2,o=Xo.interpolateZoom([(i-T.x)/T.k,(s-T.y)/T.k,n/T.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),a=n/r[2];this.__chart__=T={x:i-r[0]*a,y:s-r[1]*a,k:a},u(e)}}).each("end.zoom",function(){a(e)}):(this.__chart__=T,o(e),u(e),a(e))})},e.translate=function(t){return arguments.length?(T={x:+t[0],y:+t[1],k:T.k},s(),e):[T.x,T.y]},e.scale=function(t){return arguments.length?(T={x:T.x,y:T.y,k:+t},s(),e):T.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Pu:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(N=t&&[+t[0],+t[1]],e):N},e.x=function(t){return arguments.length?(E=t,b=t.copy(),T={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),T={x:0,y:0,k:1},e):x},Xo.rebind(e,M,"on")};var Du,Pu=[0,1/0],Hu="onwheel"in Jo?(Du=function(){return-Xo.event.deltaY*(Xo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Jo?(Du=function(){return Xo.event.wheelDelta},"mousewheel"):(Du=function(){return-Xo.event.detail},"MozMousePixelScroll");Xo.color=nt,nt.prototype.toString=function(){return this.rgb()+""},Xo.hsl=rt;var Bu=rt.prototype=new nt;Bu.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new rt(this.h,this.s,this.l/e)},Bu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new rt(this.h,this.s,e*this.l)},Bu.rgb=function(){return it(this.h,this.s,this.l)},Xo.hcl=st;var ju=st.prototype=new nt;ju.brighter=function(e){return new st(this.h,this.c,Math.min(100,this.l+Fu*(arguments.length?e:1)))},ju.darker=function(e){return new st(this.h,this.c,Math.max(0,this.l-Fu*(arguments.length?e:1)))},ju.rgb=function(){return ot(this.h,this.c,this.l).rgb()},Xo.lab=ut;var Fu=18,Iu=.95047,qu=1,Ru=1.08883,Uu=ut.prototype=new nt;Uu.brighter=function(e){return new ut(Math.min(100,this.l+Fu*(arguments.length?e:1)),this.a,this.b)},Uu.darker=function(e){return new ut(Math.max(0,this.l-Fu*(arguments.length?e:1)),this.a,this.b)},Uu.rgb=function(){return at(this.l,this.a,this.b)},Xo.rgb=pt;var zu=pt.prototype=new nt;zu.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new pt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new pt(i,i,i)},zu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new pt(e*this.r,e*this.g,e*this.b)},zu.hsl=function(){return yt(this.r,this.g,this.b)},zu.toString=function(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)};var Wu=Xo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wu.forEach(function(e,t){Wu.set(e,dt(t))}),Xo.functor=St,Xo.xhr=Tt(xt),Xo.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Nt(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.substring(t+1,n).replace(/""/g,'"')}for(;f>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.substring(t,l-u)}return e.substring(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();(!t||(h=t(h,c++)))&&u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new h,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},Xo.csv=Xo.dsv(",","text/csv"),Xo.tsv=Xo.dsv("	","text/tab-separated-values"),Xo.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=b().changedTouches),t)for(var r,i=0,s=t.length;s>i;++i)if((r=t[i]).identifier===n)return W(e,r)};var Xu,Vu,$u,Ju,Ku,Qu=Qo[d(Qo,"requestAnimationFrame")]||function(e){setTimeout(e,17)};Xo.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};Vu?Vu.n=s:Xu=s,Vu=s,$u||(Ju=clearTimeout(Ju),$u=1,Qu(kt))},Xo.timer.flush=function(){Lt(),At()},Xo.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var Gu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Mt);Xo.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=Xo.round(e,Ot(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Gu[8+n/3]};var Yu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Zu=Xo.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=Xo.round(e,Ot(e,t))).toFixed(Math.max(0,Math.min(20,Ot(e*(1+1e-15),t))))}}),ea=Xo.time={},ta=Date;Pt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){na.setUTCDate.apply(this._,arguments)},setDay:function(){na.setUTCDay.apply(this._,arguments)},setFullYear:function(){na.setUTCFullYear.apply(this._,arguments)},setHours:function(){na.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){na.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){na.setUTCMinutes.apply(this._,arguments)},setMonth:function(){na.setUTCMonth.apply(this._,arguments)},setSeconds:function(){na.setUTCSeconds.apply(this._,arguments)},setTime:function(){na.setTime.apply(this._,arguments)}};var na=Date.prototype;ea.year=Ht(function(e){return e=ea.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ea.years=ea.year.range,ea.years.utc=ea.year.utc.range,ea.day=Ht(function(e){var t=new ta(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ea.days=ea.day.range,ea.days.utc=ea.day.utc.range,ea.dayOfYear=function(e){var t=ea.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ea[e]=Ht(function(e){return(e=ea.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ea.year(e).getDay();return Math.floor((ea.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ea[e+"s"]=n.range,ea[e+"s"].utc=n.utc.range,ea[e+"OfYear"]=function(e){var n=ea.year(e).getDay();return Math.floor((ea.dayOfYear(e)+(n+t)%7)/7)}}),ea.week=ea.sunday,ea.weeks=ea.sunday.range,ea.weeks.utc=ea.sunday.utc.range,ea.weekOfYear=ea.sundayOfYear;var ra={"-":"",_:" ",0:"0"},ia=/^\s*\d+/,sa=/^%/;Xo.locale=function(e){return{numberFormat:_t(e),timeFormat:jt(e)}};var oa=Xo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Xo.format=oa.numberFormat,Xo.geo={},sn.prototype={s:0,t:0,add:function(e){on(e,this.t,ua),on(ua.s,this.s,this),this.s?this.t+=ua.t:this.s=ua.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ua=new sn;Xo.geo.stream=function(e,t){e&&aa.hasOwnProperty(e.type)?aa[e.type](e,t):un(e,t)};var aa={Feature:function(e,t){un(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)un(n[r].geometry,t)}},fa={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){an(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)an(n[r],t,0)},Polygon:function(e,t){fn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)un(n[r],t)}};Xo.geo.area=function(e){return la=0,Xo.geo.stream(e,ha),la};var la,ca=new sn,ha={sphere:function(){la+=4*xu},point:v,lineStart:v,lineEnd:v,polygonStart:function(){ca.reset(),ha.lineStart=ln},polygonEnd:function(){var e=2*ca;la+=0>e?4*xu+e:e,ha.lineStart=ha.lineEnd=ha.point=v}};Xo.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=cn([t*Lu,n*Lu]);if(g){var i=pn(g,r),s=[i[1],-i[0],0],o=pn(s,i);mn(o),o=gn(o);var a=t-d,f=a>0?1:-1,v=o[0]*Au*f,m=su(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*Au;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*Au;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=su(r)>180?r+(r>0?360:-360):r}else v=e,m=n;ha.point(e,n),t(e,n)}function s(){ha.lineStart()}function o(){i(v,m),ha.lineEnd(),su(y)>Cu&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,ha.polygonStart()},polygonEnd:function(){ha.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>ca?(l=-(h=180),c=-(p=90)):y>Cu?p=90:-Cu>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],Xo.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),Xo.geo.centroid=function(e){pa=da=va=ma=ga=ya=ba=wa=Ea=Sa=xa=0,Xo.geo.stream(e,Ta);var t=Ea,n=Sa,r=xa,i=t*t+n*n+r*r;return ku>i&&(t=ya,n=ba,r=wa,Cu>da&&(t=va,n=ma,r=ga),i=t*t+n*n+r*r,ku>i)?[0/0,0/0]:[Math.atan2(n,t)*Au,G(r/Math.sqrt(i))*Au]};var pa,da,va,ma,ga,ya,ba,wa,Ea,Sa,xa,Ta={sphere:v,point:bn,lineStart:En,lineEnd:Sn,polygonStart:function(){Ta.lineStart=xn},polygonEnd:function(){Ta.lineStart=En}},Na=Ln(Tn,Dn,Hn,[-xu,-xu/2]),Ca=1e9;Xo.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=Fn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(Xo.geo.conicEqualArea=function(){return qn(Rn)}).raw=Rn,Xo.geo.albers=function(){return Xo.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},Xo.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=Xo.geo.albers(),o=Xo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Xo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Cu,c+.12*f+Cu],[l-.214*f-Cu,c+.234*f-Cu]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Cu,c+.166*f+Cu],[l-.115*f-Cu,c+.234*f-Cu]]).stream(a).point,e},e.scale(1070)};var ka,La,Aa,Oa,Ma,_a,Da={point:v,lineStart:v,lineEnd:v,polygonStart:function(){La=0,Da.lineStart=Un},polygonEnd:function(){Da.lineStart=Da.lineEnd=Da.point=v,ka+=su(La/2)}},Pa={point:zn,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Ha={point:Vn,lineStart:$n,lineEnd:Jn,polygonStart:function(){Ha.lineStart=Kn},polygonEnd:function(){Ha.point=Vn,Ha.lineStart=$n,Ha.lineEnd=Jn}};Xo.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),Xo.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return ka=0,Xo.geo.stream(e,i(Da)),ka},e.centroid=function(e){return va=ma=ga=ya=ba=wa=Ea=Sa=xa=0,Xo.geo.stream(e,i(Ha)),xa?[Ea/xa,Sa/xa]:wa?[ya/wa,ba/wa]:ga?[va/ga,ma/ga]:[0/0,0/0]},e.bounds=function(e){return Ma=_a=-(Aa=Oa=1/0),Xo.geo.stream(e,i(Pa)),[[Aa,Oa],[Ma,_a]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||Yn(e):xt,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Wn:new Qn(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(Xo.geo.albersUsa()).context(null)},Xo.geo.transform=function(e){return{stream:function(t){var n=new Zn(t);for(var r in e)n[r]=e[r];return n}}},Zn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Xo.geo.projection=tr,Xo.geo.projectionMutator=nr,(Xo.geo.equirectangular=function(){return tr(ir)}).raw=ir.invert=ir,Xo.geo.rotation=function(e){function t(t){return t=e(t[0]*Lu,t[1]*Lu),t[0]*=Au,t[1]*=Au,t}return e=or(e[0]%360*Lu,e[1]*Lu,e.length>2?e[2]*Lu:0),t.invert=function(t){return t=e.invert(t[0]*Lu,t[1]*Lu),t[0]*=Au,t[1]*=Au,t},t},sr.invert=ir,Xo.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=or(-e[0]*Lu,-e[1]*Lu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Au,e[1]*=Au}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=lr((t=+r)*Lu,i*Lu),e):t},e.precision=function(r){return arguments.length?(n=lr(t*Lu,(i=+r)*Lu),e):i},e.angle(90)},Xo.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Lu,i=e[1]*Lu,s=t[1]*Lu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},Xo.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return Xo.range(Math.ceil(s/m)*m,i,m).map(h).concat(Xo.range(Math.ceil(f/g)*g,a,g).map(p)).concat(Xo.range(Math.ceil(r/d)*d,n,d).filter(function(e){return su(e%m)>Cu}).map(l)).concat(Xo.range(Math.ceil(u/v)*v,o,v).filter(function(e){return su(e%g)>Cu}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=hr(u,o,90),c=pr(r,n,y),h=hr(f,a,90),p=pr(s,i,y),e):y},e.majorExtent([[-180,-90+Cu],[180,90-Cu]]).minorExtent([[-180,-80-Cu],[180,80+Cu]])},Xo.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=dr,i=vr;return e.distance=function(){return Xo.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},Xo.geo.interpolate=function(e,t){return mr(e[0]*Lu,e[1]*Lu,t[0]*Lu,t[1]*Lu)},Xo.geo.length=function(e){return Ba=0,Xo.geo.stream(e,ja),Ba};var Ba,ja={sphere:v,point:v,lineStart:gr,lineEnd:v,polygonStart:v,polygonEnd:v},Fa=yr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(Xo.geo.azimuthalEqualArea=function(){return tr(Fa)}).raw=Fa;var Ia=yr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},xt);(Xo.geo.azimuthalEquidistant=function(){return tr(Ia)}).raw=Ia,(Xo.geo.conicConformal=function(){return qn(br)}).raw=br,(Xo.geo.conicEquidistant=function(){return qn(wr)}).raw=wr;var qa=yr(function(e){return 1/e},Math.atan);(Xo.geo.gnomonic=function(){return tr(qa)}).raw=qa,Er.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Nu]},(Xo.geo.mercator=function(){return Sr(Er)}).raw=Er;var Ra=yr(function(){return 1},Math.asin);(Xo.geo.orthographic=function(){return tr(Ra)}).raw=Ra;var Ua=yr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(Xo.geo.stereographic=function(){return tr(Ua)}).raw=Ua,xr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Nu]},(Xo.geo.transverseMercator=function(){var e=Sr(xr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=xr,Xo.geom={},Xo.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=St(n),s=St(r),o=e.length,u=[],a=[];for(t=0;o>t;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(kr),t=0;o>t;t++)a.push([u[t][0],-u[t][1]]);var f=Cr(u),l=Cr(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Tr,r=Nr;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},Xo.geom.polygon=function(e){return lu(e,za),e};var za=Xo.geom.polygon.prototype=[];za.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},za.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},za.clip=function(e){for(var t,n,r,i,s,o,u=Or(e),a=-1,f=this.length-Or(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],Lr(o,l,i)?(Lr(s,l,i)||e.push(Ar(s,o,l,i)),e.push(o)):Lr(s,l,i)&&e.push(Ar(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var Wa,Xa,Va,$a,Ja,Ka=[],Qa=[];Fr.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(qr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Gr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ti(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Zr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ei(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ei(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Zr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?ti(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return e.C=!1,void 0;do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,Zr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ei(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Zr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ei(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Zr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ei(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},Xo.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return ni(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Cu)*Cu,y:Math.round(o(e,t)/Cu)*Cu,i:t}})}var r=Tr,i=Nr,s=r,o=i,u=Ga;return e?t(e):(t.links=function(e){return ni(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return ni(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort(qr),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ii(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=St(r=e),t):r},t.y=function(e){return arguments.length?(o=St(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?Ga:e,t):u===Ga?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===Ga?null:u&&u[1]},t)};var Ga=[[-1e6,-1e6],[1e6,1e6]];Xo.geom.delaunay=function(e){return Xo.geom.voronoi().triangles(e)},Xo.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(su(a-n)+su(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=(h<<1)+c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=ui()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=St(u),w=St(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=ui();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){ai(e,N,v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Tr,a=Nr;return(o=arguments.length)?(u=si,a=oi,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},Xo.interpolateRgb=fi,Xo.interpolateObject=li,Xo.interpolateNumber=ci,Xo.interpolateString=hi;var Ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Za=new RegExp(Ya.source,"g");Xo.interpolate=pi,Xo.interpolators=[function(e,t){var n=typeof t;return("string"===n?Wu.has(t)||/^(#|rgb\(|hsl\()/.test(t)?fi:hi:t instanceof nt?fi:Array.isArray(t)?di:"object"===n&&isNaN(t)?li:ci)(e,t)}],Xo.interpolateArray=di;var ef=function(){return xt},tf=Xo.map({linear:ef,poly:Ei,quad:function(){return yi},cubic:function(){return bi},sin:function(){return Si},exp:function(){return xi},circle:function(){return Ti},elastic:Ni,back:Ci,bounce:function(){return ki}}),nf=Xo.map({"in":xt,out:mi,"in-out":gi,"out-in":function(e){return gi(mi(e))}});Xo.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return n=tf.get(n)||ef,r=nf.get(r)||xt,vi(r(n.apply(null,Vo.call(arguments,1))))},Xo.interpolateHcl=Li,Xo.interpolateHsl=Ai,Xo.interpolateLab=Oi,Xo.interpolateRound=Mi,Xo.transform=function(e){var t=Jo.createElementNS(Xo.ns.prefix.svg,"g");return(Xo.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new _i(n?n.matrix:rf)})(e)},_i.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var rf={a:1,b:0,c:0,d:1,e:0,f:0};Xo.interpolateTransform=Bi,Xo.layout={},Xo.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Ii(e[n]));return t}},Xo.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=Xo.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(Xo.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(Tu-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},Xo.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(a>u*u/m){if(d>a){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&d>a){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=Xo.event.x,e.py=Xo.event.y,u.resume()}var n,r,i,s,o,u={},a=Xo.dispatch("start","tick","end"),f=[1,1],l=.9,c=sf,h=of,p=-30,d=uf,v=.1,m=.64,g=[],y=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,d,m,b,w,E=g.length,S=y.length;for(n=0;S>n;++n)u=y[n],c=u.source,h=u.target,b=h.x-c.x,w=h.y-c.y,(d=b*b+w*w)&&(d=r*s[n]*((d=Math.sqrt(d))-i[n])/d,b*=d,w*=d,h.x-=b*(m=c.weight/(h.weight+c.weight)),h.y-=w*m,c.x+=b*(m=1-m),c.y+=w*m);if((m=r*v)&&(b=f[0]/2,w=f[1]/2,n=-1,m))for(;++n<E;)u=g[n],u.x+=(b-u.x)*m,u.y+=(w-u.y)*m;if(p)for(Vi(t=Xo.geom.quadtree(g),r,o),n=-1;++n<E;)(u=g[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=g[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(g=e,u):g},u.links=function(e){return arguments.length?(y=e,u):y},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.chargeDistance=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.gravity=function(e){return arguments.length?(v=+e,u):v},u.theta=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),Xo.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;f>u;++u){var i=y[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=g.length,l=y.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=g[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=y[t],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=g[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,y[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,y[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,g[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=Xo.behavior.drag().origin(xt).on("dragstart.force",Ui).on("drag.force",t).on("dragend.force",zi)),arguments.length?(this.on("mouseover.force",Wi).on("mouseout.force",Xi).call(n),void 0):n},Xo.rebind(u,a,"on")};var sf=20,of=1,uf=1/0;Xo.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return Ki(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=Yi,n=Qi,r=Gi;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Ji(t,function(e){e.children&&(e.value=0)}),Ki(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},Xo.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=Xo.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},$i(n,r)},Xo.layout.pie=function(){function e(s){var o=s.map(function(n,r){return+t.call(e,n,r)}),u=+("function"==typeof r?r.apply(this,arguments):r),a=(("function"==typeof i?i.apply(this,arguments):i)-u)/Xo.sum(o),f=Xo.range(s.length);null!=n&&f.sort(n===af?function(e,t){return o[t]-o[e]}:function(e,t){return n(s[e],s[t])});var l=[];return f.forEach(function(e){var t;l[e]={data:s[e],value:t=o[e],startAngle:u,endAngle:u+=t*a}}),l}var t=Number,n=af,r=0,i=Tu;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e};var af={};Xo.layout.stack=function(){function e(u,a){var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=Xo.permute(f,c),l=Xo.permute(l,c);var h,p,d,v=r.call(e,l,a),m=f.length,g=f[0].length;for(p=0;g>p;++p)for(i.call(e,f[0][p],d=v[p],l[0][p][1]),h=1;m>h;++h)i.call(e,f[h][p],d+=l[h-1][p][1],l[h][p][1]);return u}var t=xt,n=rs,r=is,i=ns,s=es,o=ts;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:ff.get(t)||rs,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:lf.get(t)||is,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var ff=Xo.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ss),s=e.map(os),o=Xo.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return Xo.range(e.length).reverse()},"default":rs}),lf=Xo.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:is});Xo.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[Xo.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=ls,i=as;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=St(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return fs(e,t)}:St(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},Xo.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,Ki(u,function(e){e.r=+l(e.value)}),Ki(u,vs),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;Ki(u,function(e){e.r+=c}),Ki(u,vs),Ki(u,function(e){e.r-=c})}return ys(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=Xo.layout.hierarchy().sort(cs),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},$i(e,n)},Xo.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(Ki(h,n),h.parent.m=-h.z,Ji(h,r),f)Ji(c,s);else{var p=c,d=c,v=c;Ji(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);Ji(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;u>o;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Ts(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=Ss(o),i=Es(i),o&&i;)a=Es(a),s=Ss(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(xs(Ns(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!Ss(s)&&(s.t=o,s.m+=c-l),i&&!Es(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=Xo.layout.hierarchy().sort(null).value(null),u=ws,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},$i(e,o)},Xo.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;Ki(a,function(e){var t=e.children;t&&t.length?(e.x=ks(t),e.y=Cs(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Ls(a),c=As(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return Ki(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=Xo.layout.hierarchy().sort(null).value(null),n=ws,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},$i(e,t)},Xo.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=Xo.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Os,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Os(t):Ms(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Ms(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Os:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},$i(s,u)},Xo.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=Xo.random.normal.apply(Xo,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=Xo.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},Xo.scale={};var cf={floor:xt,ceil:xt};Xo.scale.linear=function(){return Fs([0,1],[0,1],pi,!1)};var hf={s:1,g:1,p:1,r:1,e:1};Xo.scale.log=function(){return Vs(Xo.scale.linear().domain([0,1]),10,!0,[1,10])};var pf=Xo.format(".0e"),df={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};Xo.scale.pow=function(){return $s(Xo.scale.linear(),1,[0,1])},Xo.scale.sqrt=function(){return Xo.scale.pow().exponent(.5)},Xo.scale.ordinal=function(){return Ks([],{t:"range",a:[[]]})},Xo.scale.category10=function(){return Xo.scale.ordinal().range(vf)},Xo.scale.category20=function(){return Xo.scale.ordinal().range(mf)},Xo.scale.category20b=function(){return Xo.scale.ordinal().range(gf)},Xo.scale.category20c=function(){return Xo.scale.ordinal().range(yf)};var vf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(vt),mf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(vt),gf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(vt),yf=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(vt);Xo.scale.quantile=function(){return Qs([],[])},Xo.scale.quantize=function(){return Gs(0,1,[0,1])},Xo.scale.threshold=function(){return Ys([.5],[0,1])},Xo.scale.identity=function(){return Zs([0,1])},Xo.svg={},Xo.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+bf,u=i.apply(this,arguments)+bf,a=(o>u&&(a=o,o=u,u=a),u-o),f=xu>a?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=wf?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=eo,n=to,r=no,i=ro;return e.innerRadius=function(n){return arguments.length?(t=St(n),e):t},e.outerRadius=function(t){return arguments.length?(n=St(t),e):n},e.startAngle=function(t){return arguments.length?(r=St(t),e):r},e.endAngle=function(t){return arguments.length?(i=St(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+bf;return[Math.cos(s)*e,Math.sin(s)*e]},e};var bf=-Nu,wf=Tu-Cu;Xo.svg.line=function(){return io(xt)};var Ef=Xo.map({linear:so,"linear-closed":oo,step:uo,"step-before":ao,"step-after":fo,basis:mo,"basis-open":go,"basis-closed":yo,bundle:bo,cardinal:ho,"cardinal-open":lo,"cardinal-closed":co,monotone:No});Ef.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Sf=[0,2/3,1/3,0],xf=[0,1/3,2/3,0],Tf=[0,1/6,2/3,1/6];Xo.svg.line.radial=function(){var e=io(Co);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ao.reverse=fo,fo.reverse=ao,Xo.svg.area=function(){return ko(xt)},Xo.svg.area.radial=function(){var e=ko(Co);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},Xo.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)+bf,l=f.call(e,i,r)+bf;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>xu)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=dr,o=vr,u=Lo,a=no,f=ro;return e.radius=function(t){return arguments.length?(u=St(t),e):u},e.source=function(t){return arguments.length?(s=St(t),e):s},e.target=function(t){return arguments.length?(o=St(t),e):o},e.startAngle=function(t){return arguments.length?(a=St(t),e):a},e.endAngle=function(t){return arguments.length?(f=St(t),e):f},e},Xo.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=dr,n=vr,r=Ao;return e.source=function(n){return arguments.length?(t=St(n),e):t},e.target=function(t){return arguments.length?(n=St(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},Xo.svg.diagonal.radial=function(){var e=Xo.svg.diagonal(),t=Ao,n=e.projection;return e.projection=function(e){return arguments.length?n(Oo(t=e)):t},e},Xo.svg.symbol=function(){function e(e,r){return(Nf.get(t.call(this,e,r))||Do)(n.call(this,e,r))}var t=_o,n=Mo;return e.type=function(n){return arguments.length?(t=St(n),e):t},e.size=function(t){return arguments.length?(n=St(t),e):n},e};var Nf=Xo.map({circle:Do,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Af)),n=t*Af;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Lf),n=t*Lf/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});Xo.svg.symbolTypes=Nf.keys();var Cf,kf,Lf=Math.sqrt(3),Af=Math.tan(30*Lu),Of=[],Mf=0;Of.call=vu.call,Of.empty=vu.empty,Of.node=vu.node,Of.size=vu.size,Xo.transition=function(e){return arguments.length?Cf?e.transition():e:yu.transition()},Xo.transition.prototype=Of,Of.select=function(e){var t,n,r,i=this.id,s=[];e=S(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]);for(var a=this[o],f=-1,l=a.length;++f<l;)(r=a[f])&&(n=e.call(r,r.__data__,f,o))?("__data__"in r&&(n.__data__=r.__data__),jo(n,f,i,r.__transition__[i]),t.push(n)):t.push(null)}return Po(s,i)},Of.selectAll=function(e){var t,n,r,i,s,o=this.id,u=[];e=x(e);for(var a=-1,f=this.length;++a<f;)for(var l=this[a],c=-1,h=l.length;++c<h;)if(r=l[c]){s=r.__transition__[o],n=e.call(r,r.__data__,c,a),u.push(t=[]);for(var p=-1,d=n.length;++p<d;)(i=n[p])&&jo(i,p,o,s),t.push(i)}return Po(u,o)},Of.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=P(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return Po(i,this.id)},Of.tween=function(e,t){var n=this.id;return arguments.length<2?this.node().__transition__[n].tween.get(e):B(this,null==t?function(t){t.__transition__[n].tween.remove(e)}:function(r){r.__transition__[n].tween.set(e,t)})},Of.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Bi:pi,u=Xo.ns.qualify(e);return Ho(this,"attr."+e,t,u.local?s:i)},Of.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=Xo.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Of.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(t){return null==t?r:(t+="",function(){var r,i=Qo.getComputedStyle(this,null).getPropertyValue(e);return i!==t&&(r=pi(i,t),function(t){this.style.setProperty(e,r(t),n)})})}var s=arguments.length;if(3>s){if("string"!=typeof e){2>s&&(t="");for(n in e)this.style(n,e[n],t);return this}n=""}return Ho(this,"style."+e,t,i)},Of.styleTween=function(e,t,n){function r(r,i){var s=t.call(this,r,i,Qo.getComputedStyle(this,null).getPropertyValue(e));return s&&function(t){this.style.setProperty(e,s(t),n)}}return arguments.length<3&&(n=""),this.tween("style."+e,r)},Of.text=function(e){return Ho(this,"text",e,Bo)},Of.remove=function(){return this.each("end.transition",function(){var e;this.__transition__.count<2&&(e=this.parentNode)&&e.removeChild(this)})},Of.ease=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof e&&(e=Xo.ease.apply(Xo,arguments)),B(this,function(n){n.__transition__[t].ease=e}))},Of.delay=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:B(this,"function"==typeof e?function(n,r,i){n.__transition__[t].delay=+e.call(n,n.__data__,r,i)}:(e=+e,function(n){n.__transition__[t].delay=e}))},Of.duration=function(e){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:B(this,"function"==typeof e?function(n,r,i){n.__transition__[t].duration=Math.max(1,e.call(n,n.__data__,r,i))}:(e=Math.max(1,e),function(n){n.__transition__[t].duration=e}))},Of.each=function(e,t){var n=this.id;if(arguments.length<2){var r=kf,i=Cf;Cf=n,B(this,function(t,r,i){kf=t.__transition__[n],e.call(t,t.__data__,r,i)}),kf=r,Cf=i}else B(this,function(r){var i=r.__transition__[n];(i.event||(i.event=Xo.dispatch("start","end"))).on(e,t)});return this},Of.transition=function(){for(var e,t,n,r,i=this.id,s=++Mf,o=[],u=0,a=this.length;a>u;u++){o.push(e=[]);for(var t=this[u],f=0,l=t.length;l>f;f++)(n=t[f])&&(r=Object.create(n.__transition__[i]),r.delay+=r.duration,jo(n,f,s,r)),e.push(n)}return Po(o,s)},Xo.svg.axis=function(){function e(e){e.each(function(){var e,f=Xo.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):xt:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Cu),m=Xo.transition(d.exit()).style("opacity",Cu).remove(),g=Xo.transition(d.order()).style("opacity",1),y=Ds(c),b=f.selectAll(".domain").data([0]),w=(b.enter().append("path").attr("class","domain"),Xo.transition(b));v.append("line"),v.append("text");var E=v.select("line"),S=g.select("line"),x=d.select("text").text(p),T=v.select("text"),N=g.select("text");switch(r){case"bottom":e=Fo,E.attr("y2",i),T.attr("y",Math.max(i,0)+o),S.attr("x2",0).attr("y2",i),N.attr("x",0).attr("y",Math.max(i,0)+o),x.attr("dy",".71em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+s+"V0H"+y[1]+"V"+s);break;case"top":e=Fo,E.attr("y2",-i),T.attr("y",-(Math.max(i,0)+o)),S.attr("x2",0).attr("y2",-i),N.attr("x",0).attr("y",-(Math.max(i,0)+o)),x.attr("dy","0em").style("text-anchor","middle"),w.attr("d","M"+y[0]+","+ -s+"V0H"+y[1]+"V"+ -s);break;case"left":e=Io,E.attr("x2",-i),T.attr("x",-(Math.max(i,0)+o)),S.attr("x2",-i).attr("y2",0),N.attr("x",-(Math.max(i,0)+o)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),w.attr("d","M"+ -s+","+y[0]+"H0V"+y[1]+"H"+ -s);break;case"right":e=Io,E.attr("x2",i),T.attr("x",Math.max(i,0)+o),S.attr("x2",i).attr("y2",0),N.attr("x",Math.max(i,0)+o).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),w.attr("d","M"+s+","+y[0]+"H0V"+y[1]+"H"+s)}if(c.rangeBand){var C=c,k=C.rangeBand()/2;l=c=function(e){return C(e)+k}}else l.rangeBand?l=c:m.call(e,c);v.call(e,l),g.call(e,c)})}var t,n=Xo.scale.linear(),r=_f,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Df?t+"":_f,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var _f="bottom",Df={top:1,right:1,bottom:1,left:1};Xo.svg.brush=function(){function e(s){s.each(function(){var s=Xo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=s.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),s.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=s.selectAll(".resize").data(d,xt);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Pf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var l,c=Xo.transition(s),h=Xo.transition(o);a&&(l=Ds(a),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(c)),f&&(l=Ds(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(c)),t(c)})}function t(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+l[+/e$/.test(e)]+","+c[+/^s/.test(e)]+")"})}function n(e){e.select(".extent").attr("x",l[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function r(e){e.select(".extent").attr("y",c[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1]-c[0])}function i(){function i(){32==Xo.event.keyCode&&(L||(b=null,O[0]-=l[1],O[1]-=c[1],L=2),y())}function d(){32==Xo.event.keyCode&&2==L&&(O[0]+=l[1],O[1]+=c[1],L=0,y())}function v(){var e=Xo.mouse(E),i=!1;w&&(e[0]+=w[0],e[1]+=w[1]),L||(Xo.event.altKey?(b||(b=[(l[0]+l[1])/2,(c[0]+c[1])/2]),O[0]=l[+(e[0]<b[0])],O[1]=c[+(e[1]<b[1])]):b=null),C&&m(e,a,0)&&(n(T),i=!0),k&&m(e,f,1)&&(r(T),i=!0),i&&(t(T),x({type:"brush",mode:L?"move":"resize"}))}function m(e,t,n){var r,i,u=Ds(t),a=u[0],f=u[1],d=O[n],v=n?c:l,m=v[1]-v[0];return L&&(a-=d,f-=m+d),r=(n?p:h)?Math.max(a,Math.min(f,e[n])):e[n],L?i=(r+=d)+m:(b&&(d=Math.max(a,Math.min(f,2*b[n]-r))),r>d?(i=r,r=d):i=d),v[0]!=r||v[1]!=i?(n?o=null:s=null,v[0]=r,v[1]=i,!0):void 0}function g(){v(),T.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),Xo.select("body").style("cursor",null),M.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),x({type:"brushend"})}var b,w,E=this,S=Xo.select(Xo.event.target),x=u.of(E,arguments),T=Xo.select(E),N=S.datum(),C=!/^(n|s)$/.test(N)&&a,k=!/^(e|w)$/.test(N)&&f,L=S.classed("extent"),A=z(),O=Xo.mouse(E),M=Xo.select(Qo).on("keydown.brush",i).on("keyup.brush",d);if(Xo.event.changedTouches?M.on("touchmove.brush",v).on("touchend.brush",g):M.on("mousemove.brush",v).on("mouseup.brush",g),T.interrupt().selectAll("*").interrupt(),L)O[0]=l[0]-O[0],O[1]=c[0]-O[1];else if(N){var _=+/w$/.test(N),D=+/^n/.test(N);w=[l[1-_]-O[0],c[1-D]-O[1]],O[0]=l[_],O[1]=c[D]}else Xo.event.altKey&&(b=O.slice());T.style("pointer-events","none").selectAll(".resize").style("display",null),Xo.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),v()}var s,o,u=w(e,"brushstart","brush","brushend"),a=null,f=null,l=[0,0],c=[0,0],h=!0,p=!0,d=Hf[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:l,y:c,i:s,j:o},n=this.__chart__||t;this.__chart__=t,Cf?Xo.select(this).transition().each("start.brush",function(){s=n.i,o=n.j,l=n.x,c=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=di(l,t.x),r=di(c,t.y);return s=o=null,function(i){l=t.x=n(i),c=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){s=t.i,o=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(a=t,d=Hf[!a<<1|!f],e):a},e.y=function(t){return arguments.length?(f=t,d=Hf[!a<<1|!f],e):f},e.clamp=function(t){return arguments.length?(a&&f?(h=!!t[0],p=!!t[1]):a?h=!!t:f&&(p=!!t),e):a&&f?[h,p]:a?h:f?p:null},e.extent=function(t){var n,r,i,u,h;return arguments.length?(a&&(n=t[0],r=t[1],f&&(n=n[0],r=r[0]),s=[n,r],a.invert&&(n=a(n),r=a(r)),n>r&&(h=n,n=r,r=h),(n!=l[0]||r!=l[1])&&(l=[n,r])),f&&(i=t[0],u=t[1],a&&(i=i[1],u=u[1]),o=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(h=i,i=u,u=h),(i!=c[0]||u!=c[1])&&(c=[i,u])),e):(a&&(s?(n=s[0],r=s[1]):(n=l[0],r=l[1],a.invert&&(n=a.invert(n),r=a.invert(r)),n>r&&(h=n,n=r,r=h))),f&&(o?(i=o[0],u=o[1]):(i=c[0],u=c[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(h=i,i=u,u=h))),a&&f?[[n,i],[r,u]]:a?[n,r]:f&&[i,u])},e.clear=function(){return e.empty()||(l=[0,0],c=[0,0],s=o=null),e},e.empty=function(){return!!a&&l[0]==l[1]||!!f&&c[0]==c[1]},Xo.rebind(e,u,"on")};var Pf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bf=ea.format=oa.timeFormat,jf=Bf.utc,Ff=jf("%Y-%m-%dT%H:%M:%S.%LZ");Bf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?qo:Ff,qo.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},qo.toString=Ff.toString,ea.second=Ht(function(e){return new ta(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ea.seconds=ea.second.range,ea.seconds.utc=ea.second.utc.range,ea.minute=Ht(function(e){return new ta(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ea.minutes=ea.minute.range,ea.minutes.utc=ea.minute.utc.range,ea.hour=Ht(function(e){var t=e.getTimezoneOffset()/60;return new ta(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ea.hours=ea.hour.range,ea.hours.utc=ea.hour.utc.range,ea.month=Ht(function(e){return e=ea.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ea.months=ea.month.range,ea.months.utc=ea.month.utc.range;var If=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],qf=[[ea.second,1],[ea.second,5],[ea.second,15],[ea.second,30],[ea.minute,1],[ea.minute,5],[ea.minute,15],[ea.minute,30],[ea.hour,1],[ea.hour,3],[ea.hour,6],[ea.hour,12],[ea.day,1],[ea.day,2],[ea.week,1],[ea.month,1],[ea.month,3],[ea.year,1]],Rf=Bf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Tn]]),Uf={range:function(e,t,n){return Xo.range(Math.ceil(e/n)*n,+t,n).map(Uo)},floor:xt,ceil:xt};qf.year=ea.year,ea.scale=function(){return Ro(Xo.scale.linear(),qf,Rf)};var zf=qf.map(function(e){return[e[0].utc,e[1]]}),Wf=jf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Tn]]);zf.year=ea.year.utc,ea.scale.utc=function(){return Ro(Xo.scale.linear(),zf,Wf)},Xo.text=Tt(function(e){return e.responseText}),Xo.json=function(e,t){return Nt(e,"application/json",zo,t)},Xo.html=function(e,t){return Nt(e,"text/html",Wo,t)},Xo.xml=Tt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define("d3",Xo):"object"==typeof module&&module.exports&&(module.exports=Xo),this.d3=Xo}(),function(){define("models/spreadsheet_parser",["models/dataset","underscore","d3"],function(e,t,n){var r;return r=function(){function f(){}var r,i,s,o,u,a;return a=[n.time.format("%m/%d/%y"),n.time.format("%m/%d/%Y"),n.time.format("%d/%m/%y"),n.time.format("%d/%m/%Y"),n.time.format("%m/%Y"),n.time.format("%m-%d-%Y"),n.time.format("%d-%m-%Y"),n.time.format("%m-%Y"),{parse:function(e){var t;t=parseInt(e);if(t!==Number(e))return null;if(1e3<=t&&t<=2100)return new Date(t,0,1)}}],r=t.identity,f.aliasName=function(e){return r=e,this},f.unaliasName=function(e){return r=t.identity,this},f.parseJson=function(t){var n,i,s,o;return s=t.rows[0],i=e(s.slice(1).map(function(e,n){return{seq:t.isSequential?e:null,name:String(e),index:n}})),n=t.rows.slice(1).map(function(n,s){var o,u,a,f,l,c,h,p,d;a=n.slice(1),h=[],c=null;for(l=p=0,d=a.length;p<d;l=++p){o=a[l],u={value:o!=null?o:null,seq:i[l].seq,name:i[l].name,header:i[l],index:l};if(u.value===null&&c!=null){u.isGap=!0;if(c!=null?!c.isGap:!void 0)u.isGapStart=!0,f={before:c};u.gap=f}else if(c!=null?c.isGap:void 0)c.isGapEnd=!0,c.gap.end=c,c.gap.after=u;h.push(c=u)}return e(h,{name:r(n[0])||n[0],displayName:n[0],isSequential:!0,meta:t.meta,index:s})}),e(n,{name:t.name,displayName:(o=t.displayName)!=null?o:t.name,rawJson:t,headers:i,meta:t.meta,isSequential:!!t.isSequential})},f.parseTSV=function(e){return this.parseJson(this.parseTSVtoJson(e))},o=function(e){var t,n,r,i,s;for(n=i=0,s=a.length;i<s;n=++i){t=a[n],r=t.parse(e);if(r!=null)return r}},u=function(e){var t,n;t=e.match(/^[a-zA-Z]\+?(\d*)?$/);if(t!=null)return parseInt((n=t[1])!=null?n:0,10)},s=function(e,n){return t.map(n,function(t,n){return t[e]})},i=function(e){var r,i;r=t.reduce(e,function(e,t){var n,r,i,s,a;return t==null||t===""||t==="#N/A"?e:(s=parseInt(t,10),s!==Number(t)&&(s=NaN),i=o(t),n=i!=null,a=u(t),r=a!=null,(e.allDates&=n)?e.sequence.push(i):(e.allRelative&=r)&&e.sequence.push(a),e.allBinary&=s===1||s===0,e)},{allDates:1,allRelative:1,allBinary:1,sequence:[]});if(r.allDates||r.allRelative)i=r.sequence.concat().sort(function(e,t){return n.ascending(e.valueOf(),t.valueOf())}),r.isSequential=t.every(i.slice(1),function(e,t){return e-i[t]>0});return r},f.parseTSVtoJson=function(e,n){var r,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,D,P,H;if(!e)throw new Error("Missing TSV data");e=e.replace(/\t /g,"	").replace(/\ \t/g,"	"),e.charAt(e.length-1)==="\n"&&(e=e.substr(0,e.length-1)),g=this._tsvToArray(e),(f=g[0].concat()).shift(),(u=s(0,g)).shift(),t.unique(f).length!==f.length&&this._throwDuplicatesError(f,!0),t.unique(u).length!==u.length&&this._throwDuplicatesError(u,!1),a=i(u),l=i(f);if(a.isSequential&&!l.isSequential){S=[],D=g[0];for(d=x=0,k=D.length;x<k;d=++x){o=D[d],S.push([]);for(h=T=0,L=g.length;T<L;h=++T)y=g[h],S[d][h]=g[h][d]}g=S,E=l,l=a,a=E}if(l.isSequential){P=g[0];for(h=N=0,A=P.length;N<A;h=++N)c=P[h],h>0&&(g[0][h]=l.sequence[h-1].valueOf());r=[];for(h=C=0,O=g.length;C<O;h=++C)y=g[h],p=t.map(y,function(e,t){return{seq:t===0?-Infinity:g[0][t],cell:e}}),p.sort(function(e,t){return e.seq-t.seq}),r[h]=p.map(function(e){return e.cell});g=r}if(l.isSequential)v=this._matrixToJson(g,n),v.isSequential=!0,v.meta.isSequential=!0,v.meta.seqType=l.allDates?"date":"relative";else if(g[0].length===2)v=this._matrixToJson(g,n);else{v=[];for(m=M=1,H=g[0].length;1<=H?M<H:M>H;m=1<=H?++M:--M){if(!g[0][m])continue;w=t.map(g,function(e){return e.filter(function(e,t){return t===0||t===m})}),b=this._matrixToJson(w,n),b.name+=" - "+w[0][1],v.push(b)}}return v},f._matrixToJson=function(e,t){var n,r,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_;v=e.length,b=e[0].length,y={prefix:null,suffix:null,plus:!1,commas:!1,format:"number",minMag:Infinity,avgMag:0,numVals:0,numNonZero:0},h=!0,u=[],M=e[0];for(p=N=0,L=M.length;N<L;p=++N){r=M[p];if(!(p>0))continue;u[p]=i(s(p,e).slice(1)),h=h&&u[p].allBinary}h&&(y.isBinary=!0);for(c=C=0,A=e.length;C<A;c=++C){x=e[c];if(c>0)for(p=k=0,O=x.length;k<O;p=++k){n=x[p];if(!(p>0))continue;n?b===2&&u[p].allDates?(y.format="date",f=o(n),x[p]=isNaN(f.valueOf())?null:f.valueOf()):(_=n.match(/(^[^\d+-]*)([+]?)([\d,.-]*)(.*)$/),g=_[0],S=_[1],E=_[2],l=_[3],T=_[4],d=l.length,l=l.replace(/,/g,""),a=l.length<d,w=Number(l),w!==0&&(m=Math.log(Math.abs(w))/Math.LN10,y.minMag=Math.min(y.minMag,m),y.avgMag+=m,y.numNonZero++),S&&y.prefix!==S&&S!=="#N/A"&&(y.prefix=S),T&&y.suffix!==T&&(y.suffix=T),E&&!y.plus&&(y.plus=!0),a&&!y.commas&&(y.commas=!0),x[p]=isNaN(w)?null:w):x[p]=null,x[p]!=null&&y.numVals++}}return y.format==="number"&&(y.avgMag/=y.numNonZero),{name:t!=null?t:e[0][0]||"Dataset",rows:e,meta:y,isSequential:b>2}},f._throwDuplicatesError=function(e,t){var r;throw r=n.nest().key(function(e){return e}).rollup(function(e){return e.length}).entries(e).filter(function(e){return e.values>1}).map(function(e,t){return(t>0?", ":"")+'"'+e.key+'"'}),r.length>1&&(r[r.length-1]=" and"+r[r.length-1].substr(1)),new Error("Found duplicate "+(t?"column":"row")+(r.length>1?"s":"")+" "+(""+r.join("")+" in the first "+(t?"row":"column")+" of the document"))},f._tsvToArray=function(e){var t,n,r,i;e=e.split("\n");for(t=r=0,i=e.length;r<i;t=++r)n=e[t],e[t]=n.replace(/^\ */,"").replace(/\ *$/,"").split("	");return e},f}()})}.call(this),!function(){function t(e,t){function u(t){var n=e.arcs[t<0?~t:t],r=n[0],i;return e.transform?(i=[0,0],n.forEach(function(e){i[0]+=e[0],i[1]+=e[1]})):i=n[n.length-1],t<0?[i,r]:[r,i]}function a(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),s.push(i)}}var n={},r={},i={},s=[],o=-1;return t.forEach(function(n,r){var i=e.arcs[n<0?~n:n],s;i.length<3&&!i[1][0]&&!i[1][1]&&(s=t[++o],t[o]=n,t[r]=s)}),t.forEach(function(e){var t=u(e),n=t[0],s=t[1],o,a;if(o=i[n]){delete i[o.end],o.push(e),o.end=s;if(a=r[s]){delete r[a.start];var f=a===o?o:o.concat(a);r[f.start=o.start]=i[f.end=a.end]=f}else r[o.start]=i[o.end]=o}else if(o=r[s]){delete r[o.start],o.unshift(e),o.start=n;if(a=i[n]){delete i[a.end];var l=a===o?o:a.concat(o);r[l.start=a.start]=i[l.end=o.end]=l}else r[o.start]=i[o.end]=o}else o=[e],r[o.start=n]=i[o.end=s]=o}),a(i,r),a(r,i),t.forEach(function(e){n[e<0?~e:e]||s.push([e])}),s}function r(e,n,r){var i=[];if(arguments.length>1){var s=[],o;function u(e){var t=e<0?~e:e;(s[t]||(s[t]=[])).push({i:e,g:o})}function a(e){e.forEach(u)}function f(e){e.forEach(a)}function l(e){e.type==="GeometryCollection"?e.geometries.forEach(l):e.type in c&&(o=e,c[e.type](e.arcs))}var c={LineString:a,MultiLineString:f,Polygon:f,MultiPolygon:function(e){e.forEach(f)}};l(n),s.forEach(arguments.length<3?function(e){i.push(e[0].i)}:function(e){r(e[0].g,e[e.length-1].g)&&i.push(e[0].i)})}else for(var h=0,p=e.arcs.length;h<p;++h)i.push(h);return{type:"MultiLineString",arcs:t(e,i)}}function i(e,r){function a(e){e.forEach(function(t){t.forEach(function(t){(i[t=t<0?~t:t]||(i[t]=[])).push(e)})}),s.push(e)}function f(t){return h(u(e,{type:"Polygon",arcs:[t]}).coordinates[0])>0}var i={},s=[],o=[];return r.forEach(function(e){e.type==="Polygon"?a(e.arcs):e.type==="MultiPolygon"&&e.arcs.forEach(a)}),s.forEach(function(e){if(!e._){var t=[],n=[e];e._=1,o.push(t);while(e=n.pop())t.push(e),e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),s.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:o.map(function(r){var s=[];r.forEach(function(e){e.forEach(function(e){e.forEach(function(e){i[e<0?~e:e].length<2&&s.push(e)})})}),s=t(e,s);if((n=s.length)>1){var o=f(r[0][0]);for(var u=0,a;u<n;++u)if(o===f(s[u])){a=s[0],s[0]=s[u],s[u]=a;break}}return s})}}function s(e,t){return t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(t){return o(e,t)})}:o(e,t)}function o(e,t){var n={type:"Feature",id:t.id,properties:t.properties||{},geometry:u(e,t)};return t.id==null&&delete n.id,n}function u(e,t){function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],s=0,o=i.length,u;s<o;++s)t.push(u=i[s].slice()),n(u,s);e<0&&a(t,o)}function s(e){return e=e.slice(),n(e,0),e}function o(e){var t=[];for(var n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0].slice()),t}function u(e){var t=o(e);while(t.length<4)t.push(t[0].slice());return t}function f(e){return e.map(u)}function l(e){var t=e.type;return t==="GeometryCollection"?{type:t,geometries:e.geometries.map(l)}:t in c?{type:t,coordinates:c[t](e)}:null}var n=m(e.transform),r=e.arcs,c={Point:function(e){return s(e.coordinates)},MultiPoint:function(e){return e.coordinates.map(s)},LineString:function(e){return o(e.arcs)},MultiLineString:function(e){return e.arcs.map(o)},Polygon:function(e){return f(e.arcs)},MultiPolygon:function(e){return e.arcs.map(f)}};return l(t)}function a(e,t){var n,r=e.length,i=r-t;while(i<--r)n=e[i],e[i++]=e[r],e[r]=n}function f(e,t){var n=0,r=e.length;while(n<r){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function l(e){function r(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function i(e,t){e.forEach(function(e){r(e,t)})}function s(e,t){e.type==="GeometryCollection"?e.geometries.forEach(function(e){s(e,t)}):e.type in o&&o[e.type](e.arcs,t)}var t={},n=e.map(function(){return[]}),o={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};e.forEach(s);for(var u in t)for(var a=t[u],l=a.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var p=a[c],d=a[h],v;(v=n[p])[u=f(v,d)]!==d&&v.splice(u,0,d),(v=n[d])[u=f(v,p)]!==p&&v.splice(u,0,p)}return n}function c(e,t){function f(e){i.remove(e),e[1][2]=t(e),i.push(e)}var n=m(e.transform),r=g(e.transform),i=v(d),s=0,o;t||(t=p),e.arcs.forEach(function(e){var r=[];e.forEach(n);for(var s=1,u=e.length-1;s<u;++s)o=e.slice(s-1,s+2),o[1][2]=t(o),r.push(o),i.push(o);e[0][2]=e[u][2]=Infinity;for(var s=0,u=r.length;s<u;++s)o=r[s],o.previous=r[s-1],o.next=r[s+1]});while(o=i.pop()){var u=o.previous,a=o.next;o[1][2]<s?o[1][2]=s:s=o[1][2],u&&(u.next=a,u[2]=o[2],f(u)),a&&(a.previous=u,a[0]=o[0],f(a))}return e.arcs.forEach(function(e){e.forEach(r)}),e}function h(e){var t=-1,n=e.length,r,i=e[n-1],s=0;while(++t<n)r=i,i=e[t],s+=r[0]*i[1]-r[1]*i[0];return s*.5}function p(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))}function d(e,t){return e[1][2]-t[1][2]}function v(e){function r(t){var r=n[t];while(t>0){var i=(t+1>>1)-1,s=n[i];if(e(r,s)>=0)break;n[s.index=t]=s,n[r.index=t=i]=r}}function i(t){var r=n[t];for(;;){var i=t+1<<1,s=i-1,o=t,u=n[o];s<n.length&&e(n[s],u)<0&&(u=n[o=s]),i<n.length&&e(n[i],u)<0&&(u=n[o=i]);if(o===t)break;n[u.index=t]=u,n[r.index=t=o]=r}}var t={},n=[];return t.push=function(){for(var e=0,t=arguments.length;e<t;++e){var i=arguments[e];r(i.index=n.push(i)-1)}return n.length},t.pop=function(){var e=n[0],t=n.pop();return n.length&&(n[t.index=0]=t,i(0)),e},t.remove=function(t){var s=t.index,o=n.pop();return s!==n.length&&(n[o.index=s]=o,(e(o,t)<0?r:i)(s)),s},t}function m(e){if(!e)return y;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0),e[0]=(t+=e[0])*r+s,e[1]=(n+=e[1])*i+o}}function g(e){if(!e)return y;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(e,u){u||(t=n=0);var a=(e[0]-s)/r|0,f=(e[1]-o)/i|0;e[0]=a-t,e[1]=f-n,t=a,n=f}}function y(){}var e={version:"1.6.1",mesh:function(e){return u(e,r.apply(this,arguments))},meshArcs:r,merge:function(e){return u(e,i.apply(this,arguments))},mergeArcs:i,feature:s,neighbors:l,presimplify:c};typeof define=="function"&&define.amd?define("topojson",e):typeof module=="object"&&module.exports?module.exports=e:this.topojson=e}(),function(){define("models/topojson_parser",["topojson","models/dataset"],function(e,t){var n;return n=function(){function n(){}return n.parse=function(n){var r;return r=e.feature(n,n.objects[Object.keys(n.objects)[0]]).features,r=r.map(function(e){return t([e],{name:e.id})}),r=t(r,{rawJson:n}),r.forEach(function(e){return e.displayName=e[0].properties.longName}),r},n}()})}.call(this),function(){define("models/json_migration",["underscore"],function(e){var t,n;return t=[{version:void 0,migrate:function(e){var t,n,r,i;return n=e.content.grid[1].children[0].grid,i=n[0].children[0].text,t=n[1].children[0].text,r=n[1].children[1].text,e.content.grid.shift(),e.content.grid[0]={children:[{type:"StoryHeader",title:i,author:t,time:r}]},e}},{version:.1,migrate:function(t){var n,r;return r=t.content.grid[0].children[0],n=t.content.grid[1].children[0],e.extend({},r,{type:"Story",chapters:n.grid.map(function(e){return e.children[0]}),chaptersWeight:n.weight})}},{version:.2,migrate:function(t){var n,r,i,s,o,u,a,f,l,c,h;s=t.content.chapters;for(a=0,l=s.length;a<l;a++){i=s[a],r=e.reduce(i.content.grid,function(e,t){return e.concat(t.children)},[]);for(f=0,c=r.length;f<c;f++){n=r[f];if(n.entityStates!=null){h=n.entityStates;for(u in h)o=h[u],o.highlighted!=null&&o.color==null&&(o.color=o.highlighted?"#f36e28":"#c1c1c1",delete o.highlighted),o.color==="#FF4E00"?o.color="#f36e28":o.color==="#57993B"?o.color="#82b337":o.color==="#356CA5"?o.color="#00a2d0":o.color==="#794690"&&(o.color="#794583")}}}return t}},{version:.3,migrate:function(e){return e.content.sponsor={url:"./img/ext/BAM_logo.png",href:"http://buildamerica.com/"},e}},{version:.4,migrate:function(t){var n,r,i,s,o,u,a,f,l,c,h;s=t.content.chapters;for(a=0,l=s.length;a<l;a++){i=s[a],r=e.reduce(i.content.grid,function(e,t){return e.concat(t.children)},[]);for(f=0,c=r.length;f<c;f++){n=r[f];if(n.entityStates!=null){h=n.entityStates;for(u in h)o=h[u],o.color!=null&&(o.manualColor=o.color,delete o.color);n.color="manual"}}}return t},version:.5,migrate:function(t){var n,r,i,s,o,u,a,f,l,c,h;h=t.rawData;for(a=0,l=h.length;a<l;a++){r=h[a],u=r.data.rows;if(u[0].length<=2)continue;r.data.isSequential=!0,r.data.type="tabular",n=[];for(i=f=0,c=u.length;f<c;i=++f)o=u[i],s=e.map(o,function(e,t){return{seq:t===0?-Infinity:u[0][t],cell:e}}),s.sort(function(e,t){return e.seq-t.seq}),n[i]=s.map(function(e){return e.cell});r.data.rows=n,delete r.id}return t}},{version:"CURRENT",migrate:function(e){return console.log("Json converted"),e}}],n=function(n){var r,i,s,o,u,a,f,l;u=n.content.jsonVersion,i=e.find(t,function(e){return e.version===u});if(i==null||e.isEmpty(n.content))return n;r=e.indexOf(t,i),l=t.slice(r);for(s=a=0,f=l.length;a<f;s=++a)o=l[s],console.log("Convert "+(s===0?"from":"to")+" "+o.version),n=o.migrate(n);return n},n.validateVersion=function(e){var n,r,i;for(r=0,i=t.length;r<i;r++){n=t[r];if(n.version===e)throw new Error("You must increment the json version. The current version ("+e+')\nalready exists. (hint: search globaly for "jsonVersion:" unquoted)')}return e},n})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("models/story",["models/db","models/spreadsheet_parser","models/topojson_parser","models/json_migration","backbone","underscore"],function(e,n,r,i,s,o){var u;return u=function(u){function a(e){a.__super__.constructor.call(this,e,{parse:!0})}return t(a,u),a.prototype.urlRoot="/api/stories",a.statusOptions=[{name:"writing",label:"Writing"},{name:"editing",label:"Editing"},{name:"finalReview",label:"Final Review"},{name:"ready",label:"Ready"}],a.prototype.toJSON=function(){return o.pick(this.attributes,["title","author","content","rawData"])},a.prototype.save=function(e,t,n){return this.trigger("startSave"),a.__super__.save.call(this,e,t,n)},a.prototype.archive=function(e){var t=this;return e==null&&(e=!0),s.ajax({url:"/api/stories/archivedAt/"+this.id,method:"post",data:{archivedAt:e?new Date:null},success:function(e){return t.set("archivedAt",e.archivedAt)},error:function(e){throw e}})},a.prototype.changeStatus=function(e){return this.save({status:e},{patch:!0})},a.prototype.parse=function(t){var s,o,u,a,f,l,c,h,p;t.modifiedTime=new Date(t.modifiedTime),t.status=(l=t.status)!=null?l:"writing",t.content&&(t=i(t));if(t.rawData){u=t.db=(c=this.get("db"))!=null?c:e([]),h=t.rawData;for(a=0,f=h.length;a<f;a++)o=h[a],s=u.byName(o.name),s==null&&(o.name!=="world"&&o.name!=="usa"?s=n.parseJson(o.data):(s=r.parse(o.data),s.type="geo"),s.name=o.name,s.displayName=(p=o.displayName)!=null?p:o.name,u.push(s)),s.id=o.id}return t},a.prototype.hasUnsavedChanges=function(){var e,t,n,r;return t=o.omit(this.get("content"),["jsonVersion"]),n=this.get("root").toJSON(),e=JSON.stringify(t)!==JSON.stringify(n),e||(e=!o.isEqual((r=this.get("rawData"))!=null?r:[],o.extend(this.get("db").toJSON()))),e},a.prototype.discardUnsaved=function(){return delete this.attributes.root},a.prototype.syncContent=function(){var e,t;return t={},e=t.content=o.extend(this.get("root").toJSON(),{jsonVersion:i.validateVersion(.6)}),e.title!=null&&(t.title=e.title.replace(/[^\w\s\'\?]/gi,"").replace(/\s{2,}/g," ")),e.author&&(t.author=e.author),t.rawData=this.get("db").toJSON(),this.set(t,{silent:!0})},a}(s.Model)})}.call(this),function(){define("bloomer/layered",["underscore"],function(e){return function(t){var n,r;return t==null&&(t=[]),r=[],n=function(e){var t,n,i,s;s=[];for(n=0,i=r.length;n<i;n++)t=r[n],s.push(t.apply(t,arguments));return s},n.add=function(e,t){return t==null&&(t=r.length),r.splice(t,0,e),n},n.forward=function(t){return e.isArray(t)||(t=[t]),e.each(t,function(e){return n[e]=function(t){var i,s,o,u;for(s=0,o=r.length;s<o;s++)i=r[s],(u=i[e])!=null&&u.apply(i,arguments);return n}}),n},n.forward(t),n}})}.call(this),function(){define("bloomer/format",["d3"],function(e){var t,n,r,i;return t=function(){function e(e){this.d3Formatter=e,this.formatters[null]=String}return e.prototype.formatters={},e.prototype.get=function(e){var t;return(t=this.formatters[e])!==void 0?t:this.formatters[e]=this.d3Formatter(e)},e}(),n=new t(e.format),i=new t(e.time.format),r=function(e){return n.get(e)},r.time=function(e){return i.get(e)},i.formatters.auto=null,r.time.presets=[{name:"%x",label:"01/02/2011"},{name:"%Y",label:"2011"},{name:"%B %Y",label:"January 2011"},{name:"%b %Y",label:"Jan 2011"},{name:"%B",label:"January"}],r.time.axisPresets=[{name:"auto",label:"auto"},{name:"%x",label:"01/02/2011"},{name:"%Y",label:"2011"},{name:"'%y",label:"'11"},{name:"%b %Y",label:"Jan 2011"},{name:"%b",label:"Jan"}],r.time.bubblePresets=[{name:"on %x",label:"on 01/02/2011"},{name:"in %Y",label:"in 2011"},{name:"in %b %Y",label:"in Jan 2011"},{name:"in %b",label:"in Jan"}],r})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define("bloomer2/core/bbox",["d3"],function(t){var n;return n=function(){function t(){this.paint=e(this.paint,this),this.tl=[0,0],this.br=[1,1]}return t.prototype.corners=function(e,t){return arguments.length?(this.tl=e,this.br=t,this):[e,t]},t.prototype.domBBox=function(e){return arguments.length?(this.tl[0]=e.x,this.tl[1]=e.y,this.br[0]=e.x+e.width,this.br[1]=e.y+e.height,this):[{x:this.tl[0],y:this.tl[1],width:this.br[0]-this.tl[0],height:this.br[1]-this.tl[1]}]},t.prototype.translationSVG=function(){return"translate("+this.tl[0]+" "+this.tl[1]+")"},t.prototype.size=function(e){return arguments.length===0?[this.br[0]-this.tl[0],this.br[1]-this.tl[1]]:(this.br[0]=this.tl[0]+(e[0]||0),this.br[1]=this.tl[1]+(e[1]||0),this)},t.prototype.width=function(){return this.br[0]-this.tl[0]},t.prototype.height=function(){return this.br[1]-this.tl[1]},t.prototype.position=function(e){return arguments.length?this.translate([e[0]-this.tl[0],e[1]-this.tl[1]]):this.tl},t.prototype.translate=function(e){return this.tl[0]+=e[0]||0,this.tl[1]+=e[1]||0,this.br[0]+=e[0]||0,this.br[1]+=e[1]||0,this},t.prototype.contains=function(e){var t;return t=this.limitPt(e.concat()),e[0]===t[0]&&e[1]===t[1]},t.prototype.limitPt=function(e){return[Math.max(this.tl[0],Math.min(this.br[0],e[0])),Math.max(this.tl[1],Math.min(this.br[1],e[1]))]},t.prototype.reference=function(e,t){return t==null&&(t="horizontal"),Array.isArray(e)?(0===e[0].indexOf("top")*e[0].indexOf("bottom")*e[1].indexOf("left")*e[1].indexOf("right")&&e.reverse(),[this.referenceCoord(e[0],"horizontal"),this.referenceCoord(e[1],"vertical")]):this.referenceCoord(e,t)},t.prototype.referenceCoord=function(e,t){var n,r;t==null&&(t="horizontal"),e==="left"||e==="right"?(t="horizontal",e=e==="left"?"start":"end"):e==="top"||e==="bottom"?(t="vertical",e=e==="top"?"start":"end"):e||(e="middle"),t==="horizontal"?(n=this.tl[0],r=this.br[0]):t==="vertical"&&(n=this.tl[1],r=this.br[1]);switch(e){case"start":return n;case"end":return r;case"middle":return(n+r)/2;default:return null}},t.prototype.paint=function(e){var t;return t=e.selectAll(".bbox").data([null]),t.enter().append("rect").attr({"class":"bbox",stroke:"black",fill:"none"}),t.attr({x:this.tl[0],y:this.tl[1],width:this.size()[0],height:this.size()[1]})},t}()})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("bloomer2/core/padded_bbox",["bloomer2/core/bbox","d3"],function(t,r){var i;return i=function(i){function s(){this.paint=e(this.paint,this),s.__super__.constructor.call(this),this.inner=new t,this._updateInner()}return n(s,i),s.prototype.t=.25,s.prototype.r=.25,s.prototype.b=.25,s.prototype.l=.25,s.prototype.trbl=function(e){return arguments.length?(e[0]!=null&&(this.t=e[0]),e[1]!=null&&(this.r=e[1]),e[2]!=null&&(this.b=e[2]),e[3]!=null&&(this.l=e[3]),this._updateInner(),this):[this.t,this.r,this.b,this.l]},s.prototype.padding=function(e){return arguments.length?(typeof e=="number"?this.trbl([e,e,e,e]):this.trbl([e.t,e.r,e.b,e.l]),this):{t:this.t,r:this.r,b:this.b,l:this.l}},s.prototype.innerSize=function(e){return arguments.length?(this.inner.size(e),this._updateOuter(),this):this.inner.size()},s.prototype.translate=function(e){return s.__super__.translate.call(this,e),this._updateInner()},s.prototype.size=function(e){return arguments.length===0?s.__super__.size.call(this):(s.__super__.size.call(this,e),this._updateInner())},s.prototype._updateInner=function(){return this.inner.tl[0]=this.tl[0]+this.l,this.inner.tl[1]=this.tl[1]+this.t,this.inner.br[0]=this.br[0]-this.r,this.inner.br[1]=this.br[1]-this.b,this},s.prototype._updateOuter=function(){return this.tl[0]=this.inner.tl[0]-this.l,this.tl[1]=this.inner.tl[1]-this.t,this.br[0]=this.inner.br[0]+this.r,this.br[1]=this.inner.br[1]+this.b,this},s.prototype.referenceCoord=function(e,t){var n,r,i;return t==null&&(t="horizontal"),i=e.split("-"),r=i[0],n=i[1]==="padded",n?this.inner.reference(r,t):s.__super__.referenceCoord.call(this,r,t)},s.prototype.paint=function(e){var t,n;return s.__super__.paint.call(this,e),n=this,t=e.selectAll(".ref").data(["t","r","b","l"]),t.enter().append("line").attr({"class":"ref",stroke:"lightGray",fill:"none"}),t.each(function(e,t){return r.select(this).attr(t%2===0?{x1:n.tl[0],x2:n.br[0],y1:n.inner.reference(["start",null,"end"][t],"vertical"),y2:n.inner.reference(["start",null,"end"][t],"vertical")}:{x1:n.inner.reference(["start",null,"end"][t-1],"horizontal"),x2:n.inner.reference(["start",null,"end"][t-1],"horizontal"),y1:n.tl[1],y2:n.br[1]})})},s}(t),i})}.call(this),function(){define("bloomer2/charts/chart_base",["bloomer2/core/padded_bbox","d3"],function(e,t){return function(){var n,r,i,s,o,u,a,f,l,c,h;return s=null,o={},f={},u=!0,h=null,a=null,c={t:0,r:0,b:0,l:0},l={t:0,r:0,b:0,l:0},i=new e,r=function(e){var t,n,i;return n=r.innerSize(),e.classed("bloomer",!0),i=e.selectAll("svg").data([null]),i.enter().append("svg").style({display:"block"}),i.attr({width:h,height:a}),t=i.selectAll("g.entities").data([null]),t.enter().append("g").attr("class","entities"),t.attr({transform:"translate("+c.l+", "+c.t+")"})},n=function(e,t){var n,i,s,o;return e.t=t[0],e.r=(n=t[1])!=null?n:t[0],e.b=(i=t[2])!=null?i:t[0],e.l=(s=(o=t[3])!=null?o:t[1])!=null?s:t[0],r},r.dimension=function(e,t){if(arguments.length===0)return o;if(arguments.length===1){if(typeof e=="string")return o[e];for(t in e)r.dimension(t,e[t])}else o[e]=t;return r},r.layer=function(e,t){if(arguments.length===0)return f;if(arguments.length===1){if(typeof e=="string")return f[e];for(t in e)r.layer(t,e[t])}else f[e]=t;return r},r.padding=function(e){return arguments.length?typeof e=="object"?r.padding(e.t,e.r,e.b,e.l):(i.trbl(arguments),n(c,arguments)):_.extend({},c)},r.outerPadding=function(e){return arguments.length?typeof e=="object"?r.outerPadding(e.t,e.r,e.b,e.l):n(l,arguments):_.extend({},l)},r.innerSize=function(e){return arguments.length?r.size([e[0]+c.l+c.r,e[1]+c.t+c.b]):[h-c.l-c.r,a-c.t-c.b]},r.data=function(e){return arguments.length?(s=e,r):s},r.size=function(e){var t,n;return arguments.length?(arguments.length===2&&(e=[arguments[0],arguments[1]]),h=(t=e[0])!=null?t:h,a=(n=e[1])!=null?n:a,i.size(e),r):[h,a]},r.enabled=function(e){return arguments.length?(u=e,r):u},r.constraints=function(){return i},r.rebind=function(e){return t.rebind(e,r,"size","innerSize","padding","data","dimension","layer","enabled")},r}})}.call(this),function(){define("bloomer2/charts/dimension",["d3"],function(e){return function(){var e,t,n,r,i,s,o,u;return s=null,u=function(e,t,n){return e},o=function(e,t,n,r){return e},n=function(){return null},t=null,i=null,r=null,e=function(e,t,r){var i;return i=u(e,t,r),o(i==null?n(e,t,r):s!=null?s(i):i,e,t,r)},e.value=function(t){return arguments.length?(u=t,e):u},e.transform=function(t){return arguments.length?(o=t,e):o},e.fallback=function(t){return arguments.length?(n=t,e):n},e.scale=function(n){return arguments.length?(s!==n&&(s=n,s!=null&&(t!=null&&s.domain(t),i!=null&&s.range(i),r!=null&&r&&s.nice())),e):s},e.domain=function(n){return arguments.length?(s.domain(t=n),e):t},e.domainOr=function(n){return arguments.length?(t||s.domain(typeof n=="function"?n():n),e):t},e.range=function(t){return arguments.length?(s.range(i=t),e):i},e.rangeOr=function(t){return arguments.length?(i||s.range(typeof t=="function"?t():t),e):s.range()},e.nice=function(t){return r=t!=null?t:!0,r&&s.nice(),e},e}})}.call(this),function(){define("bloomer2/core/multi_dimension",["bloomer2/charts/dimension","d3"],function(e,t){return function(){var t,n,r,i,s,o;return s=[r=e()],n=null,o=function(e,t,n){return e},i=function(e,t){return e?[e]:[]},t=function(e,t,n){var r;return r=o(e,t,n),r==null?null:s[n]!=null?s[n].scale()(r):r},t.subs=function(){return s},t.n=function(i){var o,u;if(!arguments.length)return s.length;n=Math.max(1,i);for(o=u=0;0<=n?u<n:u>n;o=0<=n?++u:--u)s[o]||(s[o]=e().scale(r.scale().copy()));return s=s.slice(0,n),t},t.nOr=function(e){return n==null&&(t.n(e),n=null),t},t.value=function(e){var n,r,i,u,a;if(!arguments.length)return o;if(Array.isArray(e))for(n=i=0,u=s.length;i<u;n=++i)r=s[n],r.value((a=e[n])!=null?a:e[0]);else o=e;return t},t.segments=function(e){return arguments.length?(i=e,t):i},t.scale=function(e){var n,r,i,o,u,a;if(!arguments.length)return function(){var e,t,n;n=[];for(e=0,t=s.length;e<t;e++)i=s[e],n.push(i.scale());return n}();Array.isArray(e)||(e=[n=e]);for(r=o=0,u=s.length;o<u;r=++o)i=s[r],i.scale((a=e[r])!=null?a:n.copy());return t},t.domain=function(e){var n,r,i,o,u,a;if(!arguments.length)return function(){var e,t,n;n=[];for(e=0,t=s.length;e<t;e++)i=s[e],n.push(i.domain());return n}();Array.isArray(e[0])||(e=[n=e]);for(r=o=0,u=s.length;o<u;r=++o)i=s[r],i.domain((a=e[r])!=null?a:n.concat());return t},t.domainOr=function(e){var n,r,i,o,u,a;if(!arguments.length)return domain;Array.isArray(e[0])||(e=[n=e]);for(r=o=0,u=s.length;o<u;r=++o)i=s[r],i.domainOr((a=e[r])!=null?a:typeof n=="function"?n:n.concat());return t},t.range=function(e){var n,r,i,o,u,a;if(!arguments.length)return function(){var e,t,n;n=[];for(e=0,t=s.length;e<t;e++)i=s[e],n.push(i.range());return n}();Array.isArray(e[0])||(e=[n=e]);for(r=o=0,u=s.length;o<u;r=++o)i=s[r],i.range((a=e[r])!=null?a:n.concat());return t},t.rangeOr=function(e){var n,r,i,o,u,a,f,l;if(!arguments.length)return scale.range();Array.isArray(e[0])||(e=[n=e]);for(r=u=0,a=s.length;u<a;r=++u)i=s[r],o=(f=e[r])!=null?f:n,i.rangeOr((l=e[r])!=null?l:n.concat());return t},t.nice=function(e){var n,r,i,o,u,a;Array.isArray(e)||(e=[n=e]);for(r=o=0,u=s.length;o<u;r=++o)i=s[r],i.nice((a=e[r])!=null?a:n);return t},t.reverseRange=function(){var e,n,r;for(n=0,r=s.length;n<r;n++)e=s[n],e.scale().range(e.scale().range().reverse());return t},t}})}.call(this),function(){define("bloomer2/layers/benchmarks",["d3"],function(e){var t,n;return n=function(e,t){return function(n,r,i){var s,o;return s=e.call(this,n,r,i),s==null?0:(o=t!=null?t.call(this,n,r,i):void 0)!=null?o:s}},t=function(){var e,t,r,i,s,o;return o="vertical",i=null,t=null,s=1,r=[],e=function(e){var u,a,f;return f=t.inner.size(),e.attr({transform:"translate("+t.inner.tl.join(" ")+")"}).style({"font-size":s+"em"}),a=e.selectAll("line").data(r,i.key),a.enter().append("line").classed("benchmark "+o,!0).on("mouseover",i.over).on("mouseout",i.out).on("click",i.click).attr({opacity:0,stroke:i.color,"stroke-dasharray":"4,3","stroke-width":2}),a.transition().attr({opacity:n(i.d,i.opacity),stroke:i.color}).attr(o==="vertical"?{x1:i.d,y1:0,x2:i.d,y2:f[1]}:o==="horizontal"?{x1:0,y1:i.d,x2:f[0],y2:i.d}:void 0),a.exit().remove(),u=e.selectAll("text").data(r,i.key),u.enter().append("text").classed("benchmark-label "+o,!0).attr({opacity:0,fill:i.color}),u.transition().attr({opacity:n(i.d,i.opacity),fill:i.color}).attr(o==="vertical"?{x:i.d,y:-3,dy:"0","text-anchor":"middle"}:o==="horizontal"?{x:3+f[0],y:i.d,dy:"0.38em","text-anchor":"start"}:void 0).text(i.label),u.exit().remove()},e.type=function(t){return arguments.length?(o=t,e):o},e.fontSize=function(t){return arguments.length?(s=t,e):s},e.dimension=function(t){return arguments.length?(i=t,e):i},e.data=function(t){return arguments.length?(r=t,e):r},e.constraints=function(n){return arguments.length?(t=n,e):t},e}})}.call(this),function(){define("bloomer2/charts/axes",["d3"],function(e){return function(){var t,n,r,i,s,o,u,a,f,l,c,h,p;return p=null,f=null,o=null,u={t:null,r:null,b:null,l:null},s=[],c=_.clone(u),h=_.clone(u),r={t:"black",r:"black",b:"black",l:"black"},l=0,i=function(e){switch(e){case"t":return o.x;case"r":return o.y;case"b":return o.x;case"l":return o.y}},n={t:"",r:"",b:"",l:""},a={b:!1,l:!1},t=function(u){return u.each(function(){var u,d,v,m,g,y,b,w;return u=e.select(this).selectAll(".axis").data(s,function(e){return e}),u.enter().append("g"),u.attr({"class":function(e){return"axis "+e+" "+n[e]}}).each(function(n){return t[n].tickSize(4).tickFormat(c[n]).ticks(h[n]).scale(i(n).scale()),e.select(this).attr({transform:function(){switch(n){case"r":return"translate("+p+" 0)";case"b":return"translate(0 "+f+")"}}()}).attr({stroke:r[n],fill:r[n]}).transition().call(t[n])}),l!=null&&(d=l*Math.PI/180,u.each(function(t){var n;n=e.select(this);if(t==="b")return n.selectAll("text").attr({transform:"rotate("+l+")",dx:10*Math.sin(d),dy:.68*Math.cos(d)+"em"}).style({"text-anchor":l===0?"middle":"end"})})),u.exit().remove(),m=a.b?(typeof (b=o.x.scale()).ticks=="function"?b.ticks(h.b):void 0)||[]:[],y=a.l?(typeof (w=o.y.scale()).ticks=="function"?w.ticks(h.l):void 0)||[]:[],v=e.select(this).selectAll(".graticule.x").data(m),v.enter().insert("line",".axis").attr({"class":"graticule x"}),v.classed("origin",function(e){return e===0}).attr({x1:function(e){return o.x.scale()(e)},y1:0,x2:function(e){return o.x.scale()(e)},y2:f}),v.exit().remove(),g=e.select(this).selectAll(".graticule.y").data(y),g.enter().insert("line",".axis").attr({"class":"graticule y"}),g.classed("origin",function(e){return e===0}).attr({x1:0,y1:function(e){return o.y.scale()(e)},x2:p,y2:function(e){return o.y.scale()(e)}}),g.exit().remove()})},t.enabled=function(n){var r,i,o;if(arguments.length===0)return{t:t.t,r:t.r,b:t.b,l:t.l};s=[];for(i in n)o=n[i],t[i]=function(){var n;if(o){s.push(i);if(o!==!0)return e.functor(o);r=(n=t[i])!=null?n:e.svg.axis();switch(i){case"t":return r.orient("top");case"r":return r.orient("right");case"b":return r.orient("bottom");case"l":return r.orient("left")}}}();return t},t.classes=function(e){var r,i;if(arguments.length===0)return n;for(r in e)i=e[r],n[r]=i;return t},t.graticule=function(e){return arguments.length===0?a:(a.b=e.b,a.l=e.l,t)},t.size=function(e){var n,r;return arguments.length?(arguments.length===2&&(e=[arguments[0],arguments[1]]),p=(n=e[0])!=null?n:p,f=(r=e[1])!=null?r:f,t):[p,f]},t.tickFormatters=function(e){var n,r;if(arguments.length===0)return c;for(n in e)r=e[n],c[n]=r;return t},t.ticks=function(e){var n,r;if(arguments.length===0)return h;if(arguments.length===2)h[arguments[0]]=arguments[1];else for(n in e)r=e[n],h[n]=r;return t},t.colors=function(e){var n,i;if(arguments.length===0)return r;for(n in e)i=e[n],r[n]=i;return t},t.dimension=function(e){return arguments.length?(o=e,t):o},t.correspondingDimension=function(e){return arguments.length?(i=e,t):i},t.horzLabelRotation=function(e){return arguments.length?(l=-Math.max(0,Math.min(90,Math.abs(e))),t):l},t.enabled({t:!0,r:!0,b:!0,l:!0}),t}})}.call(this),function(){define("bloomer2/core/align",["d3"],function(e){return function(){var t,n,r,i,s,o;return t=["left","top"],o=["right","bottom"],s=[0,0],i=!1,r=null,n=function(e,n){var u,a,f,l,c;n==null&&(n=r),l=e.reference(t),u=n.reference(o),c=[u[0]-l[0]+s[0]*(t[0]==="right"||t[0]==="end"?-1:1),u[1]-l[1]+s[1]*(t[1]==="bottom"||t[1]==="end"?-1:1)],e.translate(c);if(i)return f=i===!0?n:i,a=[0,0],e.tl[0]<f.tl[0]?a[0]=f.tl[0]-e.tl[0]:e.br[0]>f.br[0]&&(a[0]=f.br[0]-e.br[0]),e.tl[1]<f.tl[1]?a[1]=f.tl[1]-e.tl[1]:e.br[1]>f.br[1]&&(a[1]=f.br[1]-e.br[1]),e.translate(a)},n.drag=function(i,u){var a;return a=null,e.behavior.drag().on("dragstart",function(){var t;return e.event.sourceEvent.stopPropagation(),a=e.mouse(this.parentNode),t=i.position(),a[0]-=t[0],a[1]-=t[1]}).on("drag.internal",function(){var f,l,c,h,p,d,v,m,g,y,b;c=u||r,g=e.mouse(this.parentNode),i.position([g[0]-a[0],g[1]-a[1]]),h=i.reference(["middle","middle"]),l=c.reference(["middle","middle"]),v=c.reference(["middle-padded","middle-padded"]),t=[],y=[],o=[],f=[],s=[];for(m=b=0;b<=1;m=++b)p=h[m]-v[m],m===1&&(d="vertical"),Math.abs(p)<20?(t[m]="middle",o[m]="middle-padded",y[m]=h[m]):Math.abs(h[m]-l[m])<8?(t[m]=o[m]="middle",y[m]=h[m]):p<0?(t[m]=o[m]="start",y[m]=i.reference("start",d),y[m]>.5*(c.reference("start",d)+c.reference("start-padded",d))&&(o[m]+="-padded")):p>0&&(t[m]=o[m]="end",y[m]=i.reference("end",d),y[m]<.5*(c.reference("end",d)+c.reference("end-padded",d))&&(o[m]+="-padded")),f[m]=c.reference(o[m],d),s[m]=t[m]==="middle"?0:(y[m]-f[m])*(t[m]==="end"?-1:1);return n(i,c)})},n.affix=function(e){return arguments.length?(t=e,n):t},n.offset=function(e){return arguments.length?(s=e,n):s},n.to=function(e){return arguments.length?(o=e,n):o},n.of=n.constraints=function(e){return arguments.length?(r=e,n):r},n.limit=function(e){return arguments.length?(i=e,n):i},n.paint=function(e,n,r){var i;return i=e.selectAll(".point").data([r.reference(o),n.reference(t)]),i.enter().append("circle").attr({"class":"point",fill:"none",stroke:"#c00"}),i.attr({cx:function(e){return e[0]},cy:function(e){return e[1]},r:function(e,t){return 3+t*3}})},n}})}.call(this),function(){define("bloomer2/charts/labels",["bloomer2/core/bbox","bloomer2/core/align","d3"],function(e,t,n){return function(){var r,i,s;return i=null,s={t:{enabled:!0,text:null,bbox:new e,rotated:!1,side:"t",align:t().affix(["middle","bottom"]).to(["middle-padded","top-padded"]).offset([0,23]).limit(!0)},r:{enabled:!0,text:null,bbox:new e,rotated:!0,side:"r",align:t().affix(["left","middle"]).to(["right-padded","middle-padded"]).offset([70,0]).limit(!0)},b:{enabled:!0,text:null,bbox:new e,rotated:!1,side:"b",align:t().affix(["middle","top"]).to(["middle-padded","bottom-padded"]).offset([0,23]).limit(!0)},l:{enabled:!0,text:null,bbox:new e,rotated:!0,side:"l",align:t().affix(["right","middle"]).to(["left-padded","middle-padded"]).offset([70,0]).limit(!0)},d:{enabled:!0,text:null,bbox:new e,rotated:!1,side:"d",align:t().affix(["right","top"]).to(["right-padded","top-padded"]).offset([4,0]).limit(!0)}},r=function(e){return e.each(function(){var e,t,r,o;return o=function(){var t;t=[];for(r in s)e=s[r],e.enabled&&e.text&&t.push(e);return t}(),t=n.select(this).selectAll("text.chart-label").data(o,function(e){return e.side}),t.enter().append("text").each(function(e){return n.select(this).attr({"class":"chart-label "+e.side,dy:"1em",transform:e.rotated?"rotate(-90)":void 0,"text-anchor":e.rotated?"end":"start"})}),t.each(function(e){var t,r,s;return e.align.of(i),r=n.select(this),r.text()!==e.text&&(r.text(e.text),t=r.node().getBBox(),s=[t.width,t.height],e.rotated&&s.reverse(),e.bbox.size(s)),e.align(e.bbox,i),r.attr({display:e.enabled&&e.text?"inherit":"none",transform:e.bbox.translationSVG()+(e.rotated?" rotate(-90)":"")})}),t.exit().remove()})},r.enabled=function(e){var t,n;if(arguments.length===0)return{t:s.t.enabled,r:s.r.enabled,b:s.b.enabled,l:s.l.enabled,d:s.d.enabled};for(t in e)n=e[t],s[t].enabled=n;return r},r.text=function(e){var t,n;if(arguments.length===0)return{t:s.t.text,r:s.r.text,b:s.b.text,l:s.l.text,d:s.d.text};for(t in e)n=e[t],s[t].text=n;return r},r.alignments=function(e){var t,n,i,o;if(arguments.length===0){t={};for(o in s)n=s[o],t[o]={affix:n.align.affix(),to:n.align.to(),offset:n.align.offset()};return t}for(o in e)i=e[o],s[o].align.affix(i.affix).to(i.to).offset(i.offset);return r},r.constraints=function(e){return arguments.length?(i=e,r):i},r.defs=function(){return s},r}})}.call(this),function(){define("bloomer2/charts/legend",["bloomer2/core/align","bloomer2/core/padded_bbox","d3"],function(e,t,n){return function(){var r,i,s,o,u,a,f,l,c,h,p,d,v;return o=null,s=(new t).padding(4),v=function(e){return e},p=1,r=e().affix(["right","bottom"]).to(["right-padded","bottom-padded"]).limit(!0),u={align:r,bbox:s},c=n.scale.linear(),i=n.svg.axis().orient("right").scale(c),h=Math.random().toString().slice(2),a=null,f=null,d="",l=function(e){var t,u,l,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P;k=a.color.scale(),D=k?k.clamp?"gradient":k.rangeBand?"categorical":k.invertExtent?"ranges":void 0:null,g=e.selectAll("g.legend-content").data(f&&D?[D]:[],function(e){return e}),g.enter().append("g").attr({"class":"legend-content",transform:"translate(600 300)"}).append("text").attr({"class":"legend-title"}),g.exit().remove();if(!D||!f)return;M=g.select(".legend-title"),_=M.selectAll("tspan").data(d?d.split("\n"):[]),_.enter().append("tspan").attr({x:-2,y:function(e,t){return t+"em"},dy:".65em"}),_.text(function(e){return e}),_.exit().remove(),O=M.node().getBBox(),w=k.domain(),l=10*p,u=2,D==="ranges"||D==="categorical"?(m=D==="categorical"?k:function(e,t){var n;return n=t>0?w[t-1]:-Infinity,k((e+n)/2)},C=g.selectAll("g.range").data(w),C.enter().append("g").attr({"class":"range"}).call(function(e){return e.append("rect").attr({"stroke-opacity":.5,"stroke-width":u}),e.append("text").attr({dy:".32em"})}),C.attr({transform:function(e,t){var n;return n=(w.length-t-1)*18*p+O.height,"translate(0 "+n+")"}}),C.select("rect").attr({stroke:m,fill:m,width:l,height:l}),C.select("text").attr({x:l*1.68,y:l/2+u/2,"font-size":""+p+"em"}).text(D==="categorical"?v:function(e,t){var n,r,i;return r=t>0?w[t-1]:void 0,n=t<w.length-1?e:void 0,i="",n==null&&(i+="> "),i+=r!=null?v(r):"< ",r!=null&&n!=null&&(i+=" - "),n!=null&&(i+=v(n)),i}),C.exit().remove()):D==="gradient"&&(E=[w[0],w[w.length-1]],N=180*Math.pow(p,2),P=8*Math.pow(p,2),c.domain(E).range([N,0]),t=g.selectAll("g.axis").data([null]),t.enter().append("g").attr({"class":"axis"}),t.attr({transform:"translate(-2 "+O.height+")"}).call(i.tickFormat(v).tickSize(P+4)),T="gradient_"+h,y=g.selectAll("defs").data([null]),y.enter().append("defs"),x=y.selectAll("#"+T).data([T],function(e){return e}),x.enter().append("linearGradient").attr({id:T,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),L=w.concat(E).sort(function(e,t){return n.descending(e,t)}),A=x.selectAll("stop").data(L),A.enter().append("stop"),A.attr({offset:function(e){return c(e)*100/N+"%"},"stop-color":function(e){return k(e)}}),A.exit().remove(),S=g.selectAll("rect.legend-gradient").data([null,null]),S.enter().append("rect").attr({"class":"legend-gradient",fill:"url(#"+T+")",opacity:function(e,t){return t===0?.6:1},x:function(e,t){return t===0?-1:1}}),S.attr({y:function(e,t){return O.height+(t===0?-1:1)},width:function(e,t){return P+(t===0?2:-2)},height:function(e,t){return N+(t===0?2:-2)}}));if(!g.node())return;return b=g.node().getBBox(),s.innerSize([b.width,b.height]),r.of(o)(s),g.attr("transform","translate("+s.inner.tl.join(" ")+")")},l.dimension=function(e){return arguments.length?(a=e,l):a},l.constraints=function(e){return arguments.length?(o=e,l):o},l.enabled=function(e){return arguments.length?(f=e,l):f},l.sizeFactor=function(e){return arguments.length?(p=e,l):p},l.format=function(e){return arguments.length?(v=e,l):v},l.title=function(e){return arguments.length?(d=e,l):d},l.alignment=function(e){var t;return arguments.length===0?(t={affix:u.align.affix(),to:u.align.to(),offset:u.align.offset()},t):(u.align.affix(e.affix).to(e.to).offset(e.offset),l)},l.def=function(){return u},l}})}.call(this),function(){define("bloomer2/charts/bar_chart",["bloomer2/charts/chart_base","bloomer2/charts/dimension","bloomer2/core/multi_dimension","bloomer2/layers/benchmarks","bloomer2/charts/axes","bloomer2/charts/labels","bloomer2/charts/legend","d3"],function(e,t,n,r,i,s,o,u){return function(){var o,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T;return g=function(e){return function(t,n,r){return e.call(this,this.parentNode.__data__,r,n)}},v=function(e,t){return function(n,r,i){var s;return Math.min(e.call(this,n,r,i),(s=t.call(this,n,r,i))!=null?s:Infinity)}},d=function(e,t){return function(n,r,i){return Math.max(e.call(this,n,r,i),t.call(this,n,r,i))}},p=function(e,t){return function(n,r,i){var s,o;return Math.abs((s=e.call(this,n,r,i))-((o=t.call(this,n,r,i))!=null?o:s))}},T=function(e,t){return function(n,r,i){var s,o;return s=e.call(this,n,r,i),s==null?0:(o=t!=null?t.call(this,n,r,i):void 0)!=null?o:s}},a=function(){var e,t,n,r,i;return n=null,t=[],e=null,i="left",r=function(s){var o,u,a,f,l,c;s.attr({transform:i==="tilted"?"translate("+e.inner.tl[0]+" "+(e.inner.tl[1]+e.inner.size()[1])+") rotate(-90)":"translate("+e.inner.tl.join(" ")+") rotate(0)"}),f=i==="bottom"||i==="top",c=f?function(e,t){return"translate("+n.p(e,t)+", 0)"}:function(e,t){return"translate(0, "+n.p(e,t)+")"},r=s.selectAll("g").data(t,n.key),r.enter().append("g").on("mouseover",n.over).on("mouseout",n.out).on("click",n.click).attr({transform:c}),r.order().transition().attr({transform:c}),r.exit().remove(),i==="tilted"&&n.d.reverseRange(),a=g(v(n.d0,n.d)),u=n.pseg.scale().rangeBand(),o=g(p(n.d0,n.d)),l=r.selectAll("rect").data(n.d.segments()),l.enter().append("rect").attr({fill:g(n.color)}).attr(f?{y:a,height:0}:{x:a,width:0}),l.exit().remove(),l.transition().attr({fill:g(n.color),opacity:g(T(n.d,n.opacity))}).attr(f?{y:a,x:function(e,t){return n.pseg(t)},height:o,width:u}:{x:a,y:function(e,t){return n.pseg(t)},width:o,height:u});if(i==="tilted")return n.d.reverseRange()},r.dimension=function(e){return arguments.length?(n=e,r):n},r.data=function(e){return arguments.length?(t=e,r):t},r.orient=function(e){return arguments.length?(i=e,r):i},r.constraints=function(t){return arguments.length?(e=t,r):e},r},o=function(){var e,t,n,r,i,s;return n=null,t=[],e=null,r=1,s=["inside","middle"],i=function(o){var u,a,f,l,c;o.attr({transform:b==="tilted"?"translate("+e.inner.tl[0]+" "+(e.inner.tl[1]+e.inner.size()[1])+") rotate(-90)":"translate("+e.inner.tl.join(" ")+") rotate(0)"}),o.style({"font-size":r+"em"}),b==="tilted"&&n.d.reverseRange(),f=b==="bottom"||b==="top",a=b==="bottom"||b==="right",c=f?function(e,t){return"translate("+n.p(e,t)+", 0)"}:function(e,t){return"translate(0, "+n.p(e,t)+")"},i=o.selectAll("g").data(t,n.key),i.enter().append("g").attr({transform:c}),i.order().transition().attr({transform:c}),i.exit().remove(),u=n.pseg.scale().rangeBand(),l=i.selectAll("text").data(n.d.segments()),l.enter().append("text").attr({opacity:0,fill:g(n.color),"pointer-events":"none"}),l.text(g(n.label)).each(function(e,t,r){var i,o;if(!this.textContent)return;e=this.parentNode.__data__,e._positionOverride=null;if(s[0]==="inside"){o=this.getBBox()[f?"height":"width"],i=p(n.d0,n.d)(this.parentNode.__data__,r,t);if(o+10>i)return e._positionOverride="outside"}}).transition().attr({opacity:1,fill:g(function(e,t,r){switch(e._positionOverride||s[0]){case"outside":return n.color(e,t,r);case"inside":return"#fff"}})}).attr(f?{y:g(function(e,t,r){return(a?v:d)(n.d0,n.d)(this.parentNode.__data__,t,r)+(a?-1:1)*Math.min(5,Math.max(-5,u*function(){switch(e._positionOverride||s[0]){case"outside":return.1;case"inside":return-0.1}}()))}),x:g(function(e,t,r){return n.pseg(r)+u*function(){switch(s[1]){case"start":return.05;case"middle":return.5;case"end":return.95}}()}),dy:g(function(e){switch(e._positionOverride||s[0]){case"outside":return a?"0em":".7em";case"inside":return a?".7em":"0em"}}),"text-anchor":s[1]}:{x:g(function(e,t,r){return(a?v:d)(n.d0,n.d)(this.parentNode.__data__,t,r)+(a?-1:1)*Math.min(5,Math.max(-5,u*function(){switch(e._positionOverride||s[0]){case"outside":return.1;case"inside":return-0.1}}()))}),y:g(function(e,t,r){return n.pseg(r)+u*function(){switch(s[1]){case"start":return.05;case"middle":return.5;case"end":return.95}}()}),dy:function(){switch(s[1]){case"start":return".75em";case"middle":return".38em";case"end":return"0em"}}(),"text-anchor":g(function(e,t,n){switch(e._positionOverride||s[0]){case"outside":return a?"end":"start";case"inside":return a?"start":"end"}})}),l.exit().remove();if(b==="tilted")return n.d.reverseRange()},i.position=function(e,t){return arguments.length?(Array.isArray(e)?s=e:s=[e!=null?e:s[0],t!=null?t:s[1]],i):s},i.dimension=function(e){return arguments.length?(n=e,i):n},i.fontSize=function(e){return arguments.length?(r=e,i):r},i.data=function(e){return arguments.length?(t=e,i):t},i.constraints=function(t){return arguments.length?(e=t,i):e},i},f=function(){var e,t,n,r,i;return n=null,t=null,e=null,r=2,i=function(i){var s;return s=i.selectAll("g.segment").data(u.range(r)),s.enter().append("g").attr({"class":"segment"}),s.call(n.data(t).constraints(e)),s.exit().remove()},i.n=function(e){return arguments.length?(r=e,i):r},i.marks=function(e){return arguments.length?(n=e,i):n},i.data=function(e){return arguments.length?(t=e,i):t},i.constraints=function(t){return arguments.length?(e=t,i):e},i},h=function(e,t){return m.key(e,t)},c=e().padding({t:40,r:80,b:70,l:120}).dimension(m={p:t().scale(u.scale.ordinal()).value(h),d:n().scale(u.scale.linear()).segments(function(e){return e?[e]:[]}),d0:n().scale(u.scale.linear()).value(function(){return 0}),pseg:t().scale(u.scale.ordinal()),key:t().value(function(e,t){return t}),opacity:t().scale(u.scale.linear()).value(function(e,t,n){return Math.max(.3,1-n/3)}),color:t().scale(u.scale.category10()).value(h),label:t().value(h),over:t(),out:t(),click:t()}).layer(y={axes:i().dimension(m),chartLabels:s(),benchmarks:f().marks(r().type("vertical").dimension(m)),bars:a().dimension(m),labels:o().dimension(m)}),c.layer("axes").enabled({t:!1,r:!1,b:!0,l:!0}),b="left",w=0,E=1,S=.1,x=.07,l=function(e){var t,n,r,i,s,o,a,f,l,h,p,d,v,g,T,N,C,k;t=c.constraints(),d=t.inner.size(),r=c.data();if(!r)return;return T=b==="bottom"||b==="top"||b==="tilted",v=m.d.subs(),T?(m.y=(C=v[w])!=null?C:v[0],m.x=m.p,c.layer("axes").correspondingDimension(function(e){var t,n,r;v=m.d.subs();switch(e){case"t":return m.p;case"r":return(t=(n=v[E])!=null?n:v[w])!=null?t:v[0];case"b":return m.p;case"l":return(r=v[w])!=null?r:v[0]}}),h=d.concat().reverse()):(m.x=(k=v[w])!=null?k:v[0],m.y=m.p,c.layer("axes").correspondingDimension(function(e){var t,n,r;v=m.d.subs();switch(e){case"t":return(t=v[w])!=null?t:v[0];case"r":return m.p;case"b":return(n=(r=v[E])!=null?r:v[w])!=null?n:v[0];case"l":return m.p}}),h=d),s=m.d.segments()(r[0],0).length,o=function(){var e,t,i,s,o;s=(i=r.bars)!=null?i:r,o=[];for(f=e=0,t=s.length;e<t;f=++e)n=s[f],o.push(m.key(n,f));return o}(),a=b==="bottom"||b==="tilted"||b==="right"?[h[0],0]:[0,h[0]],i=function(){return[Math.min(0,u.min(r,function(e,t){return u.min(m.d.segments()(e,t),m.d.value())})),Math.max(0,u.max(r,function(e,t){return u.max(m.d.segments()(e,t),m.d.value())}))]},m.d.nOr(s).domainOr(i).rangeOr(a),m.d0.n(m.d.n()).scale(m.d.scale()),m.p.domainOr(o).scale().rangeRoundBands([0,h[1]],S),m.pseg.domainOr(function(){return u.range(m.d.n())}).scale().rangeRoundBands([0,m.p.scale().rangeBand()],x,0),c.layer("axes").classes({t:N=T?"ordinal":"",r:p=T?"":"ordinal",b:N=T?"ordinal":"",l:p=T?"":"ordinal"}),c.layer("bars").orient(b),c.layer("benchmarks").marks().type(b==="left"||b==="right"?"vertical":"horizontal"),c(e),g=e.select("svg"),l=g.selectAll(".layer").data(c.enabled()?["axes","chartLabels","bars","benchmarks","labels"]:[]),l.enter().append("g").attr("class",function(e){return"bar-chart "+e+" layer"}),l.exit().remove(),l.each(function(e){var n,i,s,o;return n=y[e],i=u.select(this),n.data!=null&&n.data((o=r[e])!=null?o:r),n.constraints!=null?(n.constraints(t),typeof n.n=="function"&&n.n(m.d.n()),i.attr("transform","translate(0 0)")):(n.size!=null&&n.size(d),s=t.padding(),i.attr("transform","translate("+s.l+" "+s.t+")")),i.call(n)})},l.orient=function(e){return arguments.length?(b=e,l):b},l.primaryAxis=function(e){return arguments.length?(w=e,l):w},l.secondaryAxis=function(e){return arguments.length?(E=e,l):E},l.spacing=function(e){return arguments.length?(S=e,l):S},l.subSpacing=function(e){return arguments.length?(x=e,l):x},c.rebind(l)}})}.call(this),function(){define("bloomer/trailing_bubble",["d3"],function(e){return function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p;return o=null,h=[-20,-20],p=4,i=20,c="bubble",l="",t="#888",s=1,n=Math.PI/2,a=.5,f=5,u=function(e){return e.transition().duration(100).ease("linear")},e=function(e){var n,d,v,m,g,y,b,w,E,S,x,T;return w=[o[0]+h[0],o[1]+h[1]],d=e.selectAll(".trailing-bubble-body").data([null]),v=d.enter().append("g").attr({"class":"trailing-bubble-body","pointer-events":"none"}),v.append("rect").attr({"class":"matte",fill:t,opacity:s,rx:f,"stroke-width":1.5}),b=e.selectAll("path").data([null,null]),b.enter().insert("path",function(e,t){if(t===0)return d.node()}).attr({"class":function(e,t){if(t===0)return"matte"},fill:t,opacity:s,"pointer-events":"none",stroke:function(e,t){return t===0?null:"none"},"stroke-width":function(e,t){return t===0?3:0}}),u(b).attr({fill:t,d:function(e,t){return r(o,a,w,f)}}),m=e.selectAll("g.trailing-bubble-text").data([null]),g=m.enter().append("g").attr("class","trailing-bubble-text"),x=g.append("text").attr({fill:"#fff",x:5,y:5,dy:".8em","font-size":".8em","pointer-events":"none"}),x.append("tspan").attr({id:"main",height:i}),S=x.append("tspan").attr({id:"sub",x:5,y:i+8}),y=e.select("tspan#main").text(c),S=e.select("tspan#sub"),S.attr({height:l.length>0?i:0}).text(l),n=y.node().parentNode.getBBox(),p=n.width+10,T=i+(l.length>0?i:0),u(d.select("rect")).attr({fill:t,opacity:s,width:p,height:T}),E=[w[0]-(h[0]>0?f+1:p-f-1),w[1]+f+1-T],v.attr({transform:"translate("+E+")"}),g.attr({transform:"translate("+E+")"}),u(d).attr({transform:"translate("+E+")"}),u(m).attr({transform:"translate("+E+")"})},e.point=function(t){return arguments.length===0?o:(o=t,e)},e.vector=function(t,n){var r;return arguments.length===0?h:(h=t,n!=null&&(r=Math.sqrt(h[0]*h[0]+h[1]*h[1]),h[0]*=n/r,h[1]*=n/r),e)},e.text=function(t){return arguments.length===0?c:(c=t,e)},e.color=function(n){return arguments.length===0?t:(t=n,e)},e.opacity=function(t){return arguments.length===0?s:(s=t,e)},e.subSpanText=function(t){return arguments.length===0?l:(l=t,e)},r=function(e,t,n,r){var i,s,o,u,a,f,l,c;return i=Math.atan2(n[0]-e[0],n[1]-e[1]),e=[e[0]+2*Math.sin(i),e[1]+2*Math.cos(i)],s=Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)),l=t-r,s+5<=r?"M0,0":(c=Math.asin(l/s),o=[e[0]+t*Math.cos(c-i),e[1]+t*Math.sin(c-i)],u=[n[0]+r*Math.cos(c-i),n[1]+r*Math.sin(c-i)],a=[e[0]+t*Math.cos(-c-i+Math.PI),e[1]+t*Math.sin(-c-i+Math.PI)],f=[n[0]+r*Math.cos(-c-i+Math.PI),n[1]+r*Math.sin(-c-i+Math.PI)],"M"+u+("A"+r+","+r+" 0,1,1 "+f)+("L"+a)+("A"+t+","+t+" 0,0,1 "+o+"z"))},e}})}.call(this),function(){define("bloomer2/charts/trendline",["bloomer2/charts/chart_base","bloomer2/charts/dimension","bloomer2/core/multi_dimension","bloomer/trailing_bubble","bloomer2/charts/axes","bloomer2/charts/labels","d3","underscore"],function(e,t,n,r,i,s,o,u){var a;return a=function(){var a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k;return w=function(e){return function(t,n,r){return e.call(this,this.parentNode.__data__,r,n)}},c=function(){var e,t,n,r,i;return t=null,i="line",e=String(Math.random()).substr(2,6),n={line:o.svg.line(),area:o.svg.area()},r=function(r,i){var s;return s=r.selectAll("g.type").data(["area","line"]),s.enter().append("g").attr("class",function(e){return"type "+e}),s.each(function(r,s){var u;return u=o.select(this).selectAll("g").data(i,t.key),u.enter().append("g").on("click",t.click).append("defs"),u.exit().remove(),u.order().each(function(i,s){var a,f,l,c,h,p,d;return l=o.select(this),c=t.y.segments()(i,s),h=l.selectAll("path").data(c),h.enter().append("path").attr({opacity:0,stroke:r==="line"?w(t.color):"none",fill:r==="area"?w(t.color):"none","stroke-linejoin":"round","clip-path":function(n){return"url(#"+t.key(this.parentNode.__data__).split(" ").join("_")+r+e+")"}}),h.each(function(e,u){var a,f,l;return typeof (l=n[r].defined(t.defined).x(t.x).y(t.y.subs()[u])).y0=="function"&&l.y0(t.y.scale()[0].range()[0]),a=t.marker(e,s,u)===r,f=o.select(this),a?f.attr({opacity:t.opacity(i,s,u),stroke:t.color(i,s,u),fill:r==="area"?t.color(i,s,u):"none","stroke-dasharray":t.dashes(i,s,u),"stroke-width":t.weight(i,s,u)}).transition().duration(200).attr({d:n[r](e)}):f.attr({d:null})}),h.exit().remove(),a=u.select("defs").selectAll(".clip-path").data(t.y.segments()),f=a.enter().append("clipPath").attr("class","clip-path").attr("id",function(n){return t.key(this.parentNode.__data__).split(" ").join("_")+r+e}).append("rect").attr({x:Math.min.apply(null,p=t.x.scale().range()),y:Math.min.apply(null,d=t.y.scale()[0].range()),width:0}),a.select("rect").transition().duration(t.delay.range()[1]).delay(f.size()?w(t.delay):void 0).ease("linear").attr({width:Math.abs(p[1]-p[0]),height:Math.abs(d[0]-d[1])}),a.exit().remove()})})},r.dimension=function(e){return arguments.length?(t=e,r):t},r.type=function(e){return arguments.length?(i=e,r):i},r.y=r.y1=function(e){var t;return arguments.length?(t=e,r):t},r.y0=function(e){var t;return arguments.length?(t=e,r):t},r},l=function(){var e,t,n;return e=null,t=1,n=function(n,r){var i,s,u,a;return n.style({"font-size":t+"em"}),u=n.selectAll("g.entity").data(r,e.key),u.enter().append("g").attr({"class":"entity"}),u.exit().remove(),a=e.y.subs(),i=u.selectAll("text").data(e.y.segments()),s=i.enter().append("text").attr({opacity:0,fill:function(t){return e.color(t)},"pointer-events":"none"}),i.text(function(t,n,r){return e.label(this.parentNode.__data__,r,n)}).each(function(t,n,r){var i;return i=w(e.marker).call(this,t,n,r),o.select(this).transition().attr({opacity:1,fill:w(e.color).call(this,t,n,r)}).attr(i!=null?{x:e.x(t[t.length-1]),y:e.y.subs()[n](t[t.length-1]),dx:8,dy:".35em","text-anchor":"start"}:{fill:"transparent"})}),i.exit().remove()},n.dimension=function(t){return arguments.length?(e=t,n):e},n.fontSize=function(e){return arguments.length?(t=e,n):t},n},a=function(){var e,t,n,i,s,u;return t=null,u=[-20,-20],s=r(),n=1,i=function(e,n,r,i){var s,o,u,a,f,l,c,h,p,d;i==null&&(i=3),f=[0,0,0,0,0],a=0;for(o=h=p=r-i,d=r+i;p<=d?h<=d:h>=d;o=p<=d?++h:--h){if(!e[o])continue;c=n(e[o]),c!=null&&(l=t.x(e[o]),f[0]+=l,f[1]+=c,f[2]+=l*l,f[3]+=l*c,f[4]+=c*c,a++)}return s=(a*f[3]-f[0]*f[1])/(a*f[2]-f[0]*f[0]),isNaN(s)&&(s=1),u=f[1]/a-s*f[0]/a,[s,u]},e=function(e,r){var a,f,l;return e.style({"font-size":n+"em"}),f=e.selectAll("g.entity").data(r,t.key),f.enter().append("g").attr({"class":"entity"}),f.exit().remove(),l=t.y.subs(),a=f.selectAll("g.trailing-bubble").data(t.y.segments()),a.enter().append("g").attr({"class":"trailing-bubble",opacity:0,"pointer-events":"none"}),a.each(function(e,n,r){var a,f;return f=t.bubblePt(e,r,n),f?(a=e.indexOf(f),u=[i(e,l[n],a)[0],-1],s.point([t.x(f),l[n](f)]).vector(u,18).text(w(t.bubble).call(this,e,n,r)).color(o.rgb(w(t.color).call(this,e,n,r))).opacity(.9),o.select(this).style("display","").call(s)):o.select(this).style("display","none")}).transition().duration(80).attr({opacity:1}),a.exit().remove()},e.dimension=function(n){return arguments.length?(t=n,e):t},e.fontSize=function(t){return arguments.length?(n=t,e):n},e},f=function(){var e,t,n,r,i,s,u;return e=null,s=!1,u=function(t){return e.x.scale()(t)},n=function(t){return e.x.scale().invert(t)},i=1,t=o.behavior.drag().on("dragstart",function(){return o.event.sourceEvent.stopPropagation(),s=!0}).on("drag",function(){var t,r;return r=o.mouse(this.parentNode)[0],t=e.x.scale().range(),r=Math.max(t[0],Math.min(t[1],r)),e.focus(n(r))}).on("dragend",function(){return o.event.sourceEvent.stopPropagation(),s=!1}),r=function(n,r,i){var o,a,f,l,c,h,p,d;return a=n.selectAll(".focus-bar").data(i!=null?[null]:[]),a.enter().append("g").attr({"class":"focus-bar",cursor:"ew-resize",transform:i!=null&&"translate("+u(i)+")"}).call(t),a.exit().remove(),(s?a:a.transition().duration(250)).attr({transform:i!=null&&"translate("+u(i)+")"}),h=e.y.scale()[0].range(),f=h[0]-h[1],d=2,l=a.selectAll(".focus-line").data([null]),l.enter().append("rect").attr({"class":"focus-line",width:d,y:-200,x:-d/2,fill:"#888",stroke:"#fff","shape-rendering":"crispEdges"}),l.attr({height:f+400}),c=12,p=18,o=a.selectAll(".focus-arrow").data(i!=null?[null,null]:[]),o.enter().append("path").attr({"class":"focus-arrow",d:"M"+c+" 0 l"+ -(c-d)+" "+ -p/2+" l0 "+p+" z",fill:"#efefef",stroke:"#aaa","stroke-width":1,"stroke-linejoin":"round"}),o.attr({transform:function(e,t){return"translate(0 "+f*.312+") scale("+(t===1?-1:1)+" 1)"}})},r.xAtFocus=function(e){return u=e,r},r.dimension=function(t){return arguments.length?(e=t,r):e},r.fontSize=function(e){return arguments.length?(i=e,r):i},r.isDragging=function(){return s},r},y=null,p=e().dimension(m={x:t().scale(o.time.scale()),y:n().scale(o.scale.linear()).segments(function(e){return e}),defined:t(),key:t().value(function(e,t){return t}),marker:t().value(function(e){return"line"}),color:t().scale(o.scale.category10()).value(function(e,t){return e.name}),opacity:t().value(function(){return.4}),delay:t().scale(o.scale.linear()).range([0,800]).value(function(e,t){var n,r,i;return n=(r=(i=p.data())!=null?i.length:void 0)!=null?r:0,t/n}),weight:t().scale(o.scale.linear()).domain([0,1]).range([0,5]).value(function(e,t,n){return n===0?.5:.25}),dashes:t().value(function(e,t,n){return n===0?"none":"4 3"}),label:t().value(function(e){return e.name}),bubble:t().value(function(e){return e.name}),bubblePt:t().value(function(e){var t;return typeof d!="undefined"&&d!==null&&m.defined(t=m.segments()(e)[d.k])?t:null}),over:t(),out:t(),click:t(),focus:t().value(function(e){return y=e})}),m=p.dimension(),p.layer(S={axes:i().dimension(m),chartLabels:s(),area:c().type("area").dimension(m),line:c().type("line").dimension(m),labels:l().dimension(m),bubble:a().dimension(m),focus:f().dimension(m)}),d=null,E=null,x=0,T=1,N=function(e){return function(t,n){return o.ascending(e.y(e.series(t)[0]),e.y(e.series(n)[0]))}},h=p.layer("axes").enabled(),h.t=!1,h.r=!1,p.layer("axes").enabled(h),C=function(e){var t,n,r,i,s,u,a;n=p.constraints(),s=n.innerSize(),r=p.data();if(!r)return;return u=m.y.subs(),m.x.rangeOr([0,s[0]]).domainOr(function(){return[Math.min(0,o.min(r,function(e,t){return o.min(m.y.segments()(e,t),m.x.value())})),Math.max(0,o.max(r,function(e,t){return o.max(m.y.segments()(e,t),m.x.value())}))]}),m.y.rangeOr([s[1],0]).domainOr(function(){return[Math.min(0,o.min(r,function(e,t){return o.min(m.y.segments()(e,t),m.y.value())})),Math.max(0,o.max(r,function(e,t){return o.max(m.y.segments()(e,t),m.y.value())}))]}),p.layer("axes").size(s).correspondingDimension(function(e){var t,n,r;u=m.y.subs();switch(e){case"t":return m.x;case"r":return(t=(n=u[T])!=null?n:u[x])!=null?t:u[0];case"b":return m.x;case"l":return(r=u[x])!=null?r:u[0]}}),p(e),a=e.select("svg"),i=a.selectAll(".layer").data(p.enabled()?["axes","chartLabels","line","focus","labels","bubble"]:[]),i.enter().append("g").attr("class",function(e){return"trendline "+e+" layer"}),i.exit().remove(),i.each(function(e){var t,i,s;t=S[e],i=o.select(this);if(t.constraints!=null)return t.constraints(n),i.attr("transform","translate(0 0)"),i.call(t);s=n.padding(),i.attr("transform","translate("+s.l+" "+s.t+")");if(e==="axes")return o.select(this).call(t);if(e==="line")return o.select(this).call(t,r);if(e==="labels")return o.select(this).call(t,r);if(e==="bubble")return o.select(this).call(t,r.filter(function(e,t){return m.bubble(e)!=null}));if(e==="focus")return o.select(this).call(t,r,y)}),t=e.select("svg"),t.on("mousemove.internal")||(t.on("mousemove.internal",function(){var e,n;if(S.focus.isDragging())return;r=p.data(),E||(E={}),e=o.mouse(t.select(".line.layer").node()),n=m.x.scale().range(),e[0]=Math.max(n[0],Math.min(n[1],e[0])),d=v(e,r,m,E);if(d.entity!==E.entity||d.k!==E.k)return d.val.segment=d.segment,m.over(d.entity,d.val),E=d}),t.on("mouseleave.primary",m.out)),p(e)},C.interpolation=function(e){return arguments.length===0?generators.line.interpolate():(generators.line.interpolate(e),generators.area.interpolate(e),C)},C.focus=function(e){return arguments.length===0?y:(y=e,C)},C.primaryAxis=function(e){return arguments.length?(x=e,C):x},C.secondaryAxis=function(e){return arguments.length?(T=e,C):T},g=function(e,t){return Math.pow(e[0]-t[0],2)+.5*Math.pow(e[1]-t[1],2)},b=function(e,t){return Math.pow(e[0]-t[0],2)},k=function(e,t){return Math.pow(e[1]-t[1],2)},v=function(e,t,n,r){var i,s,o;return o=n.y.subs(),s=n.y.segments(),i=t.map(function(t,r){var i,u;return u=s(t,r),i=u.map(function(i,s){return i.reduce(function(t,r,i){var u;u=[n.x(r),o[s](r)];if(u[1]==null)return t;if(t.pt==null||b(e,u)<b(e,t.pt))t.pt=u,t.dist=k(e,u),t.val=r,t.k=i;if(t.pt2d==null||g(e,u)<g(e,t.pt2d))t.pt2d=u,t.dist2d=Math.sqrt(g(e,u));return t},{entity:t,segment:i,i:r,j:s})})}),u.flatten(i).reduce(function(t,n){return(t!=null?t.reduced:void 0)||!n||!n.pt?t:n.entity===(r!=null?r.entity:void 0)&&n.dist2d<6?(n.reduced=!0,n):!t||k(e,n.pt)<k(e,t.pt)?n:t},null)},p.rebind(C)}})}.call(this),function(){define("bloomer2/charts/scatter",["bloomer2/charts/chart_base","bloomer2/charts/dimension","bloomer2/charts/axes","bloomer2/charts/labels","bloomer2/charts/legend","bloomer2/core/padded_bbox","d3"],function(e,t,n,r,i,s,o){return function(){var u,a,f,l,c,h,p,d,v,m;return a=function(){var e,t;return t=null,e=function(e,n){var r;return r=e.selectAll("circle").data(n,t.key),r.enter().append("circle").attr({"class":"matte",opacity:0,"stroke-width":1.5}).attr({fill:t.color}).on("mouseover",t.over).on("mouseout",t.out).on("click",t.click),r.order().transition().attr({opacity:t.opacity}).attr({cx:t.x,cy:t.y,r:t.r,fill:t.color}),r.exit().remove()},e.dimension=function(n){return arguments.length?(t=n,e):t},e},u=function(){var e,t,n,r,i;return i="vertical",n=null,r={"stroke-dasharray":"4,3"},e={},t=function(t,s){var o;return o=t.selectAll("line").data(s,n.key),o.enter().append("line").classed("benchmark "+i,!0).attr(r).attr({opacity:0,stroke:n.color}).on("mouseover",n.over).on("mouseout",n.out).on("click",n.click),o.transition().attr(e).attr({opacity:1,stroke:n.color}).attr(i==="vertical"?{x1:n.x,y1:n.y.scale().range()[0],x2:n.x,y2:n.y.scale().range()[1]}:i==="horizontal"?{x1:n.x.scale().range()[0],y1:n.y,x2:n.x.scale().range()[1],y2:n.y}:void 0),o.exit().remove()},t.type=function(e){return arguments.length?(i=e,t):i},t.dimension=function(e){return arguments.length?(n=e,t):n},t},f=function(){var e,t,n;return e=null,t=1,n=function(n,r,i){var s,u,a,f;n.style({"font-size":t+"em"}),f=[];for(u=a=0;a<=1;u=++a)s=n.selectAll("text.t"+u).data(r,e.key),s.enter().append("text").attr({"class":"t"+u,opacity:0,"pointer-events":"none"}).classed("matte",u===0).attr(u===0?{"stroke-width":3}:{fill:function(t){return e.color(t)}}),s.order().text(e.label).each(function(t,n){var r;return r=e.marker(t,n),o.select(this).transition().attr({opacity:1,fill:function(t){return e.color(t)}}).attr("circle"===r&&i?i.call(this,t,n):"circle"===r?{x:e.x(t),y:e.y(t)+e.r(t),dx:0,dy:".8em","text-anchor":"middle"}:(r!=null?r.indexOf("horizontal"):void 0)>-1?{x:e.x.scale().range()[1],y:e.y(t),dx:4,dy:".35em","text-anchor":"start"}:(r!=null?r.indexOf("vertical"):void 0)>-1?{x:e.x(t),y:e.y.scale().range()[1],dx:0,dy:-4,"text-anchor":"middle"}:{fill:"transparent"})}),f.push(s.exit().remove());return f},n.dimension=function(t){return arguments.length?(e=t,n):e},n.fontSize=function(e){return arguments.length?(t=e,n):t},n},l=e().dimension(c={x:t().scale(o.scale.linear()),y:t().scale(o.scale.linear()),r:t().scale(o.scale.sqrt()),key:t().value(function(e,t){return t}),color:t().scale(o.scale.category10()).value(function(e){return e.name}),opacity:t().value(function(){return 1}),marker:t().value(function(e){return"circle"}),label:t().value(function(e){return e.name}),over:t(),out:t(),click:t()}).layer(p={axes:n().dimension(c),legend:i().dimension(c),chartLabels:r(),vertical:u().type("vertical").dimension(c),horizontal:u().type("horizontal").dimension(c),circle:a().dimension(c),labels:f().dimension(c)}),m=!1,v=(new s).trbl([25,50,25,50]),h=o.layout.force().gravity(.05).linkDistance(function(e){return e.r}).linkStrength(function(e){return Math.max(10,Math.min(15,5*Math.pow(e.r,.5)))}).charge(-200),d=function(e){var t,n,r,i,s;t=l.constraints(),i=t.inner.size(),n=l.data();if(!n)return;return c.x.rangeOr([0,i[0]]).domainOr(function(){return[o.min(n,c.x.value()),o.max(n,c.x.value())]}),c.y.rangeOr([i[1],0]).domainOr(function(){return[o.min(n,c.y.value()),o.max(n,c.y.value())]}),c.r.rangeOr([0,i[1]*.1]).domainOr(function(){return[0,o.max(n,c.r.value())]}),l(e),s=e.select("svg"),r=s.selectAll(".layer").data(l.enabled()?["axes","chartLabels","horizontal","vertical","circle","legend","labels"]:[]),r.enter().append("g").attr("class",function(e){return"scatter "+e+" layer"}),r.exit().remove(),r.each(function(e){var r,s,u,a,f,l;u=p[e],a=o.select(this);if(u.constraints!=null)return u.constraints(t),a.attr("transform","translate(0 0)"),a.call(u);l=t.padding(),a.attr("transform","translate("+l.l+" "+l.t+")");if(e==="axes")return p.axes.size(i[0],i[1]),o.select(this).call(p.axes);if(e==="circle")return o.select(this).call(p.circle,n.filter(function(t,n){return e===c.marker(t,n)}));if(e==="vertical")return o.select(this).call(p.vertical,n.filter(function(t,n){var r;return((r=c.marker(t,n))!=null?r.indexOf(e):void 0)>-1}));if(e==="horizontal")return o.select(this).call(p.horizontal,n.filter(function(t,n){var r;return((r=c.marker(t,n))!=null?r.indexOf(e):void 0)>-1}));if(e==="labels"){v.size(i);if(m){s=n.reduce(function(e,t){var n,r,i;return c.marker(t)!=="circle"?e:(e.nodes.push(_.extend(t.__smartMarkerPos||(t.__smartMarkerPos={}),{fixed:!0,px:r=c.x(t),py:i=c.y(t)})),c.label(t)&&(n=v.inner.limitPt([r,i]),e.nodes.push(_.extend(t.__smartOuterPos||(t.__smartOuterPos={}),{fixed:!0,px:n[0],py:n[1]})),e.links.push({source:t.__smartMarkerPos,target:t.__smartOuterPos,r:c.r(t)*.2})),c.label(t)&&(e.nodes.push(t.__smartLabelPos||(t.__smartLabelPos={})),e.links.push({source:t.__smartOuterPos,target:t.__smartLabelPos,r:c.r(t)*.8})),e)},{nodes:[],links:[]}),h.size(i).nodes(s.nodes).links(s.links).start();while(h.alpha()>.06)h.tick();h.stop()}r=m?function(e){var t,n,r,i,s;return n={x:e.__smartLabelPos.x-e.__smartMarkerPos.x,y:e.__smartLabelPos.y-e.__smartMarkerPos.y},i=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),t=this.getBBox(),s=t.width,r=t.height,{x:e.__smartMarkerPos.x+1.05*n.x*c.r(e)/i,y:e.__smartMarkerPos.y+1.05*n.y*c.r(e)/i,dx:s*.5*(n.x>0?1:-1),dy:r*.5*(n.y>0?1.1:0),"text-anchor":"middle"}}:void 0,o.select(this).call(p.labels,n.filter(c.label),r);return}})},d.smartLabels=function(e){return arguments.length?(m=e,d):m},l.rebind(d)}})}.call(this),function(){define("models/map_utility",["underscore","topojson"],function(e,t){var n;return n=function(){function t(){}return t.vectorMap=null,t.geometries={},t.makeId=function(e){return e.replace(/[!\"\s#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"")},t.countries={Afghanistan:"AFG",Angola:"AGO",Albania:"ALB",Finland:"FI1",Andorra:"AND",UnitedArabEmirates:"ARE",Argentina:"ARG",Armenia:"ARM",Australia:"AU1",Austria:"AUT",Azerbaijan:"AZE",Belgium:"BEL",Burundi:"BDI",Benin:"BEN",BurkinaFaso:"BFA",Bangladesh:"BGD",Bulgaria:"BGR",BosniaandHerzegovina:"BIH",Bahrain:"BHR",TheBahamas:"BHS",Belarus:"BLR",Belize:"BLZ",Bolivia:"BOL",Brazil:"BRA",Barbados:"BRB",Brunei:"BRN",Bhutan:"BTN",Botswana:"BWA",CentralAfricanRepublic:"CAF",Switzerland:"CHE",Canada:"CAN",China:"CH1",Chile:"CHL",IvoryCoast:"CIV",CotedIvoire:"CIV",Cameroon:"CMR",CyprusNoMansArea:"CNM",DemocraticRepublicoftheCongo:"COD",CongoDemRep:"COD",CongoRep:"COG",RepublicofCongo:"COG",Colombia:"COL",Comoros:"COM",CostaRica:"CRI",Cuba:"CUB",Netherlands:"NL1",NorthernCyprus:"CYN",Cyprus:"CYP",CzechRepublic:"CZE",CzechRep:"CZE",Germany:"DEU",Djibouti:"DJI",Dominica:"DMA",Denmark:"DN1",DominicanRepublic:"DOM",DominicanRep:"DOM",Algeria:"DZA",Ecuador:"ECU",Egypt:"EGY",UnitedKingdom:"GB1",Eritrea:"ERI",Spain:"ESP",Estonia:"EST",Ethiopia:"ETH",France:"FR1",Gabon:"GAB",Israel:"IS1",Georgia:"GEO",Ghana:"GHA",Guinea:"GIN",Gambia:"GMB",GuineaBissau:"GNB",EquatorialGuinea:"GNQ",Greece:"GRC",Grenada:"GRD",Greenland:"GRL",Guatemala:"GTM",FrenchGuiana:"FRA",Guyana:"GUY",Honduras:"HND",Croatia:"HRV",Haiti:"HTI",Hungary:"HUN",Indonesia:"IDN",India:"IND",Iraq:"IRQ",Ireland:"IRL",Iran:"IRN",Iceland:"ISL",Italy:"ITA",Jamaica:"JAM",Jordan:"JOR",Japan:"JPN",Kazakhstan:"KAZ",Kashmir:"KAS",Kenya:"KEN",Kyrgyzstan:"KGZ",Cambodia:"KHM",SouthKorea:"KOR",KoreaRep:"KOR",NorthKorea:"PRK",KoreaDemRep:"PRK",Kosovo:"KOS",Kuwait:"KWT",Laos:"LAO",Lebanon:"LBN",Liberia:"LBR",Libya:"LBY",SaintLucia:"LCA",Liechtenstein:"LIE",SriLanka:"LKA",Lesotho:"LSO",Lithuania:"LTU",Luxembourg:"LUX",Latvia:"LVA",Morocco:"MAR",Monaco:"MCO",Moldova:"MDA",Madagascar:"MDG",Mexico:"MEX",Macedonia:"MKD",Mali:"MLI",Myanmar:"MMR",Montenegro:"MNE",Mongolia:"MNG",Mozambique:"MOZ",Mauritania:"MRT",Malawi:"MWI",Malaysia:"MYS",Namibia:"NAM",Niger:"NER",Nigeria:"NGA",Nicaragua:"NIC",Norway:"NOR",Nepal:"NPL",NewZealand:"NZ1",Oman:"OMN",Pakistan:"PAK",Panama:"PAN",Peru:"PER",Philippines:"PHL",PapuaNewGuinea:"PNG",Poland:"POL",Portugal:"PRT",Paraguay:"PRY",Qatar:"QAT",Romania:"ROU",Russia:"RUS",Rwanda:"RWA",WesternSahara:"SAH",SaudiArabia:"SAU",Sudan:"SDN",SouthSudan:"SDS",Senegal:"SEN",Singapore:"SGP",SolomonIslands:"SLB",SierraLeone:"SLE",ElSalvador:"SLV",SanMarino:"SMR",Somaliland:"SOL",Somalia:"SOM",RepublicofSerbia:"SRB",SaoTomeandPrincipe:"STP",Suriname:"SUR",Slovakia:"SVK",Slovenia:"SVN",Sweden:"SWE",Swaziland:"SWZ",Syria:"SYR",Chad:"TCD",Togo:"TGO",Thailand:"THA",Tajikistan:"TJK",Turkmenistan:"TKM",EastTimor:"TLS",TrinidadandTobago:"TTO",Tunisia:"TUN",Turkey:"TUR",Taiwan:"TWN",UnitedRepublicofTanzania:"TZA",Tanzania:"TZA",Uganda:"UGA",Ukraine:"UKR",UnitedStates:"US1",Uruguay:"URY",Uzbekistan:"UZB",Vatican:"VAT",SaintVincentandtheGrenadines:"VCT",Venezuela:"VEN",Vietnam:"VNM",Vanuatu:"VUT",Yemen:"YEM",SouthAfrica:"ZAF",Zambia:"ZMB",Zimbabwe:"ZWE"},t.focusesForTypeahead=["Europe","Africa","South America","Central America","Middle East","Southeast Asia","Afghanistan","Angola","Albania","Finland","Andorra","United Arab Emirates","Argentina","Armenia","Australia","Austria","Azerbaijan","Belgium","Burundi","Benin","Burkina Faso","Bangladesh","Bulgaria","Bosnia and Herzegovina","Bahrain","The Bahamas","Belarus","Belize","Bolivia","Brazil","Barbados","Brunei","Bhutan","Botswana","Central African Republic","Switzerland","Canada","China","Chile","Ivory Coast","Cote d'Ivoire","Cameroon","Democratic Republic of the Congo","Republic of Congo","Colombia","Comoros","CostaRica","Cuba","Netherlands","Cyprus","Czech Republic","Germany","Djibouti","Dominica","Denmark","Dominican Republic","Algeria","Ecuador","Egypt","United Kingdom","Eritrea","Spain","Estonia","Ethiopia","France","Gabon","Israel","Georgia","Ghana","Guinea","Gambia","Guinea-Bissau","Equatorial Guinea","Greece","Grenada","Greenland","Guatemala","French Guiana","Guyana","Honduras","Croatia","Haiti","Hungary","Indonesia","India","Iraq","Ireland","Iran","Iceland","Italy","Jamaica","Jordan","Japan","Kazakhstan","Kashmir","Kenya","Kyrgyzstan","Cambodia","South Korea","North Korea","Kosovo","Kuwait","Laos","Lebanon","Liberia","Libya","Liechtenstein","Sri Lanka","Lesotho","Lithuania","Luxembourg","Latvia","Morocco","Monaco","Moldova","Madagascar","Mexico","Macedonia","Mali","Myanmar","Montenegro","Mongolia","Mozambique","Mauritania","Malawi","Malaysia","Namibia","Niger","Nigeria","Nicaragua","Norway","Nepal","New Zealand","Oman","Pakistan","Panama","Peru","Philippines","Papua New Guinea","Poland","Portugal","Paraguay","Qatar","Romania","Russia","Rwanda","Western Sahara","Saudi Arabia","Sudan","South Sudan","Senegal","Singapore","Solomon Islands","Sierra Leone","El Salvador","San Marino","Somaliland","Somalia","Republic of Serbia","Sao Tome and Principe","Suriname","Slovakia","Slovenia","Sweden","Swaziland","Syria","Chad","Togo","Thailand","Tajikistan","Turkmenistan","East Timor","Trinidad and Tobago","Tunisia","Turkey","Taiwan","United Republic of Tanzania","Tanzania","Uganda","Ukraine","United States of America","Uruguay","Uzbekistan","Vatican","Saint Vincent and the Grenadines","Venezuela","Vietnam","Vanuatu","Yemen","South Africa","Zambia","Zimbabwe"],t._specialFoci={Europe:{id:"europe",center:[16.35,50.2],rotate:[0,0],scaleFactor:2.3,aspect:{x:.67,y:.67}},Africa:{id:"africa",center:[18.583,0],rotate:[0,0],scaleFactor:1.4,aspect:{x:.75,y:.6}},"South America":{id:"south america",center:[-59,-24],rotate:[0,0],scaleFactor:1.4,aspect:{x:.75,y:.6}},"Middle East":{id:"middle east",center:[35,30],rotate:[0,0],scaleFactor:3,aspect:{x:.37,y:.67}},"Southeast Asia":{id:"southeast asia",center:[114,10],rotate:[0,0],scaleFactor:2,aspect:{x:.37,y:.67}},"Central America":{id:"central america",center:[-80,12],rotate:[0,0],scaleFactor:5,aspect:{x:.57,y:.57}}},t.getA3=function(e){return t.countries[t.makeId(e)]},t.getLayer=function(e){return this.geometries[e]},t.getGeoCentroid=function(t,n){var r,i=this;r=e.find(n,function(e){return e.name===i.getA3(t)});if(r!=null)return r=r[0],r.properties.centroid||d3.geo.centroid(r)},t.getFocusForName=function(t,n){var r,i=this;r=this.getGeoCentroid(t,n);if(r!=null)return{id:this.getA3(t),center:r,rotate:[0,0],path:e.find(n,function(e){return e.name===i.getA3(t)})[0]};if(this._specialFoci[t]!=null)return this._specialFoci[t]},t.defaultFocus={id:"world",center:[20,20],rotate:[-10,0]},t.usFocus={id:"usa",center:[30,0],rotate:[0,0]},t.projections={times:{base:function(){return d3.geo.times()}},robinson:{base:function(){return d3.geo.robinson()},pull:.7,nudge:-0.25},winkel:{base:function(){return d3.geo.winkel3()},pull:.8,nudge:-0.22},vanDerGrinten4:{base:function(){return d3.geo.vanDerGrinten4()},pull:.65,nudge:-0.18},equirectangular:{base:function(){return d3.geo.equirectangular()},pull:.7,nudge:-0.2},kavrayskiy7:{base:function(){return d3.geo.kavrayskiy7()},pull:.8,nudge:-0.22},mollweide:{base:function(){return d3.geo.mollweide()},pull:.78,nudge:-0.22},naturalEarth:{base:function(){return d3.geo.naturalEarth()},pull:.85,nudge:-0.22},wagner7:{base:function(){return d3.geo.wagner7()},pull:.85,nudge:-0.22},albers:{base:function(){return d3.geo.albersUsa()},pull:5.6,nudge:0,horizNudge:.05}},t.projectionTween=function(t,n){var r,i;return r=t.rotate().slice(0,2),i=n.rotate().slice(0,2),t=e.extend(t.bind({}),t),n=e.extend(n.bind({}),n),function(e){var s,o,u,a,f,l,c;return u=function(e,r){var i,s;return e*=180/Math.PI,r*=180/Math.PI,i=t([e,r]),s=n([e,r]),[(1-l)*i[0]+l*s[0],(1-l)*-i[1]+l*-s[1]]},l=0,a=d3.geo.projection(u).scale(1),c=d3.interpolateArray(t.translate(),n.translate()),s=d3.geo.interpolate(t.center(),n.center()),f=d3.geo.interpolate(r,i),o=d3.geo.path().projection(a),function(u){var h;return l=u,t.rotate([0,0]),n.rotate([0,0]),a.translate(c(l)),a.center(s(l)),a.rotate(f(l)),h=o(e),t.rotate(r),n.rotate(i),h}}},t}.call(this)})}.call(this),!function(){function e(e,n){return{type:"Feature",id:e.id,properties:e.properties,geometry:t(e.geometry,n)}}function t(e,n){if(!e)return null;if("GeometryCollection"===e.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return t(e,n)})};if(!fn.hasOwnProperty(e.type))return null;var r=fn[e.type];return d3.geo.stream(e,n(r)),r.result()}function n(){}function r(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return 0>=r}function i(e,t){for(var n=t[0],r=t[1],i=!1,s=0,o=e.length,u=o-1;o>s;u=s++){var a=e[s],f=a[0],l=a[1],c=e[u],h=c[0],p=c[1];l>r^p>r&&(h-f)*(r-l)/(p-l)+f>n&&(i=!i)}return i}function s(e){return e?e/Math.sin(e):1}function o(e){return e>0?1:0>e?-1:0}function u(e){return e>1?pn:-1>e?-pn:Math.asin(e)}function a(e){return e>1?0:-1>e?hn:Math.acos(e)}function f(e){return e>0?Math.sqrt(e):0}function l(e){function t(e,t){var n=Math.cos(e),i=Math.cos(t),s=Math.sin(t),o=i*n,u=-((1-o?Math.log(.5*(1+o))/(1-o):-0.5)+r/(1+o));return[u*i*Math.sin(e),u*s]}var n=Math.tan(.5*e),r=2*Math.log(Math.cos(.5*e))/(n*n);return t.invert=function(t,n){var i,s=Math.sqrt(t*t+n*n),o=e*-0.5,a=50;if(!s)return[0,0];do{var f=.5*o,l=Math.cos(f),c=Math.sin(f),h=Math.tan(f),p=Math.log(1/l);o-=i=(2/h*p-r*h-s)/(-p/(c*c)+1-r/(2*l*l))}while(Math.abs(i)>ln&&--a>0);var d=Math.sin(o);return[Math.atan2(t*d,s*Math.cos(o)),u(n*d/s)]},t}function c(){var e=pn,t=yn(l),n=t(e);return n.radius=function(n){return arguments.length?t(e=n*hn/180):e/hn*180},n}function h(e,t){var n=Math.cos(t),r=s(a(n*Math.cos(e/=2)));return[2*n*Math.sin(e)*r,Math.sin(t)*r]}function p(e){function t(e,t){var u=Math.cos(t),a=Math.cos(e/=2);return[(1+u)*Math.sin(e),(i*t>-Math.atan2(a,s)-.001?0:10*-i)+o+Math.sin(t)*r-(1+u)*n*a]}var n=Math.sin(e),r=Math.cos(e),i=e>0?1:-1,s=Math.tan(i*e),o=(1+n-r)/2;return t.invert=function(e,t){var u=0,a=0,f=50;do{var l=Math.cos(u),c=Math.sin(u),h=Math.cos(a),p=Math.sin(a),d=1+h,v=d*c-e,m=o+p*r-d*n*l-t,g=.5*d*l,y=-c*p,b=.5*n*d*c,w=r*h+n*l*p,E=y*b-w*g,S=.5*(m*y-v*w)/E,x=(v*b-m*g)/E;u-=S,a-=x}while((Math.abs(S)>ln||Math.abs(x)>ln)&&--f>0);return i*a>-Math.atan2(Math.cos(u),s)-.001?[2*u,a]:null},t}function d(){var e=hn/9,t=e>0?1:-1,n=Math.tan(t*e),r=yn(p),i=r(e),s=i.stream;return i.parallel=function(i){return arguments.length?(n=Math.tan((t=(e=i*hn/180)>0?1:-1)*e),r(e)):e/hn*180},i.stream=function(r){var o=i.rotate(),u=s(r),a=(i.rotate([0,0]),s(r));return i.rotate(o),u.sphere=function(){a.polygonStart(),a.lineStart();for(var r=-180*t;180>t*r;r+=90*t)a.point(r,90*t);for(;t*(r-=e)>=-180;)a.point(r,t*-Math.atan2(Math.cos(r*vn/2),n)*mn);a.lineEnd(),a.polygonEnd()},u},i}function v(e){return e=Math.exp(2*e),(e-1)/(e+1)}function m(e){return.5*(Math.exp(e)-Math.exp(-e))}function g(e){return.5*(Math.exp(e)+Math.exp(-e))}function y(e){return Math.log(e+f(e*e+1))}function b(e){return Math.log(e+f(e*e-1))}function w(e,t){var n=Math.tan(t/2),r=f(1-n*n),i=1+r*Math.cos(e/=2),s=Math.sin(e)*r/i,o=n/i,u=s*s,a=o*o;return[4/3*s*(3+u-3*a),4/3*o*(3+3*u-a)]}function E(e,t){var n=Math.abs(t);return hn/4>n?[e,Math.log(Math.tan(hn/4+t/2))]:[e*Math.cos(n)*(2*Math.SQRT2-1/Math.sin(n)),o(t)*(2*Math.SQRT2*(n-hn/4)-Math.log(Math.tan(n/2)))]}function S(e){function t(e,t){var r=wn(e,t);if(Math.abs(e)>pn){var i=Math.atan2(r[1],r[0]),s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),o=n*Math.round((i-pn)/n)+pn,a=Math.atan2(Math.sin(i-=o),2-Math.cos(i));i=o+u(hn/s*Math.sin(a))-a,r[0]=s*Math.cos(i),r[1]=s*Math.sin(i)}return r}var n=2*hn/e;return t.invert=function(e,t){var r=Math.sqrt(e*e+t*t);if(r>pn){var i=Math.atan2(t,e),s=n*Math.round((i-pn)/n)+pn,o=i>s?-1:1,u=r*Math.cos(s-i),a=1/Math.tan(o*Math.acos((u-hn)/Math.sqrt(hn*(hn-2*u)+r*r)));i=s+2*Math.atan((a+o*Math.sqrt(a*a-3))/3),e=r*Math.cos(i),t=r*Math.sin(i)}return wn.invert(e,t)},t}function x(){var e=5,t=yn(S),n=t(e),r=n.stream,i=.01,s=-Math.cos(i*vn),o=Math.sin(i*vn);return n.lobes=function(n){return arguments.length?t(e=+n):e},n.stream=function(t){var a=n.rotate(),f=r(t),l=(n.rotate([0,0]),r(t));return n.rotate(a),f.sphere=function(){l.polygonStart(),l.lineStart();for(var t=0,n=360/e,r=2*hn/e,a=90-180/e,f=pn;e>t;++t,a-=n,f-=r)l.point(Math.atan2(o*Math.cos(f),s)*mn,u(o*Math.sin(f))*mn),-90>a?(l.point(-90,-180-a-i),l.point(-90,-180-a+i)):(l.point(90,a+i),l.point(90,a-i));l.lineEnd(),l.polygonEnd()},f},n}function T(e){return function(t){var n,r=e*Math.sin(t),i=30;do t-=n=(t+Math.sin(t)-r)/(1+Math.cos(t));while(Math.abs(n)>ln&&--i>0);return t/2}}function N(e,t,n){function r(n,r){return[e*n*Math.cos(r=i(r)),t*Math.sin(r)]}var i=T(n);return r.invert=function(r,i){var s=u(i/t);return[r/(e*Math.cos(s)),u((2*s+Math.sin(2*s))/n)]},r}function C(e,t){var n=2.00276,r=En(t);return[n*e/(1/Math.cos(t)+1.11072/Math.cos(r)),(t+Math.SQRT2*Math.sin(r))/n]}function k(e){var t=0,n=yn(e),r=n(t);return r.parallel=function(e){return arguments.length?n(t=e*hn/180):t/hn*180},r}function L(e,t){return[e*Math.cos(t),t]}function A(e){function t(t,r){var i=n+e-r,s=i?t*Math.cos(r)/i:i;return[i*Math.sin(s),n-i*Math.cos(s)]}if(!e)return L;var n=1/Math.tan(e);return t.invert=function(t,r){var i=Math.sqrt(t*t+(r=n-r)*r),s=n+e-i;return[i/Math.cos(s)*Math.atan2(t,r),s]},t}function O(e){function t(t,n){for(var r=Math.sin(n),i=Math.cos(n),s=new Array(3),f=0;3>f;++f){var l=e[f];if(s[f]=_(n-l[1],l[3],l[2],i,r,t-l[0]),!s[f][0])return l.point;s[f][1]=P(s[f][1]-l.v[1])}for(var c=a.slice(),f=0;3>f;++f){var h=2==f?0:f+1,p=D(e[f].v[0],s[f][0],s[h][0]);s[f][1]<0&&(p=-p),f?1==f?(p=o-p,c[0]-=s[f][0]*Math.cos(p),c[1]-=s[f][0]*Math.sin(p)):(p=u-p,c[0]+=s[f][0]*Math.cos(p),c[1]+=s[f][0]*Math.sin(p)):(c[0]+=s[f][0]*Math.cos(p),c[1]-=s[f][0]*Math.sin(p))}return c[0]/=3,c[1]/=3,c}e=e.map(function(e){return[e[0],e[1],Math.sin(e[1]),Math.cos(e[1])]});for(var n,r=e[2],i=0;3>i;++i,r=n)n=e[i],r.v=_(n[1]-r[1],r[3],r[2],n[3],n[2],n[0]-r[0]),r.point=[0,0];var s=D(e[0].v[0],e[2].v[0],e[1].v[0]),o=D(e[0].v[0],e[1].v[0],e[2].v[0]),u=hn-s;e[2].point[1]=0,e[0].point[0]=-(e[1].point[0]=.5*e[0].v[0]);var a=[e[2].point[0]=e[0].point[0]+e[2].v[0]*Math.cos(s),2*(e[0].point[1]=e[1].point[1]=e[2].v[0]*Math.sin(s))];return t}function M(){var e=[[0,0],[0,0],[0,0]],t=yn(O),n=t(e),r=n.rotate;return delete n.rotate,n.points=function(i){if(!arguments.length)return e;e=i;var s=d3.geo.centroid({type:"MultiPoint",coordinates:e}),o=[-s[0],-s[1]];return r.call(n,o),t(e.map(d3.geo.rotation(o)).map(H))},n.points([[-150,55],[-35,55],[-92.5,10]])}function _(e,t,n,r,i,s){var o,f=Math.cos(s);if(Math.abs(e)>1||Math.abs(s)>1)o=a(n*i+t*r*f);else{var l=Math.sin(.5*e),c=Math.sin(.5*s);o=2*u(Math.sqrt(l*l+t*r*c*c))}return Math.abs(o)>ln?[o,Math.atan2(r*Math.sin(s),t*i-n*r*f)]:[0,0]}function D(e,t,n){return a(.5*(e*e+t*t-n*n)/(e*t))}function P(e){return e-2*hn*Math.floor((e+hn)/(2*hn))}function H(e){return[e[0]*vn,e[1]*vn]}function B(e,t){var n=f(1-Math.sin(t));return[2/dn*e*n,dn*(1-n)]}function j(e){function t(e,t){return[e,(e?e/Math.sin(e):1)*(Math.sin(t)*Math.cos(e)-n*Math.cos(t))]}var n=Math.tan(e);return t.invert=n?function(e,t){e&&(t*=Math.sin(e)/e);var r=Math.cos(e);return[e,2*Math.atan2(Math.sqrt(r*r+n*n-t*t)-r,n-t)]}:function(e,t){return[e,u(e?t*Math.tan(e)/e:t)]},t}function F(e,t){var n=Math.sqrt(3);return[n*e*(2*Math.cos(2*t/3)-1)/dn,n*dn*Math.sin(t/3)]}function I(e){function t(e,t){return[e*n,Math.sin(t)/n]}var n=Math.cos(e);return t.invert=function(e,t){return[e/n,u(t*n)]},t}function q(e){function t(e,t){return[e*n,(1+n)*Math.tan(.5*t)]}var n=Math.cos(e);return t.invert=function(e,t){return[e/n,2*Math.atan(t/(1+n))]},t}function R(e,t){var n=Math.sqrt(8/(3*hn));return[n*e*(1-Math.abs(t)/hn),n*t]}function U(e,t){var n=Math.sqrt(4-3*Math.sin(Math.abs(t)));return[2/Math.sqrt(6*hn)*e*n,o(t)*Math.sqrt(2*hn/3)*(2-n)]}function z(e,t){var n=Math.sqrt(hn*(4+hn));return[2/n*e*(1+Math.sqrt(1-4*t*t/(hn*hn))),4/n*t]}function W(e,t){var n=(2+pn)*Math.sin(t);t/=2;for(var r=0,i=1/0;10>r&&Math.abs(i)>ln;r++){var s=Math.cos(t);t-=i=(t+Math.sin(t)*(s+2)-n)/(2*s*(1+s))}return[2/Math.sqrt(hn*(4+hn))*e*(1+Math.cos(t)),2*Math.sqrt(hn/(4+hn))*Math.sin(t)]}function X(e,t){return[e*(1+Math.cos(t))/Math.sqrt(2+hn),2*t/Math.sqrt(2+hn)]}function V(e,t){for(var n=(1+pn)*Math.sin(t),r=0,i=1/0;10>r&&Math.abs(i)>ln;r++)t-=i=(t+Math.sin(t)-n)/(1+Math.cos(t));return n=Math.sqrt(2+hn),[e*(1+Math.cos(t))/n,2*t/n]}function $(e,t){var n=Math.sin(e/=2),r=Math.cos(e),i=Math.sqrt(Math.cos(t)),s=Math.cos(t/=2),o=Math.sin(t)/(s+Math.SQRT2*r*i),u=Math.sqrt(2/(1+o*o)),a=Math.sqrt((Math.SQRT2*s+(r+n)*i)/(Math.SQRT2*s+(r-n)*i));return[Tn*(u*(a-1/a)-2*Math.log(a)),Tn*(u*o*(a+1/a)-2*Math.atan(o))]}function J(e,t){var n=Math.tan(t/2);return[e*Nn*f(1-n*n),(1+Nn)*n]}function K(e,t){var n=t/2,r=Math.cos(n);return[2*e/dn*Math.cos(t)*r*r,dn*Math.tan(n)]}function Q(e,t,n,r,i,s,o,u){function a(a,f){if(!f)return[e*a/hn,0];var l=f*f,c=e+l*(t+l*(n+l*r)),h=f*(i-1+l*(s-u+l*o)),p=(c*c+h*h)/(2*h),d=a*Math.asin(c/p)/hn;return[p*Math.sin(d),f*(1+l*u)+p*(1-Math.cos(d))]}return arguments.length<8&&(u=0),a.invert=function(a,l){var c,h,p=hn*a/e,d=l,v=50;do{var m=d*d,g=e+m*(t+m*(n+m*r)),y=d*(i-1+m*(s-u+m*o)),b=g*g+y*y,w=2*y,E=b/w,S=E*E,x=Math.asin(g/E)/hn,T=p*x;if(xB2=g*g,dxBdA=(2*t+m*(4*n+6*m*r))*d,dyBdA=i+m*(3*s+5*m*o),dpdA=2*(g*dxBdA+y*(dyBdA-1)),dqdA=2*(dyBdA-1),dmdA=(dpdA*w-b*dqdA)/(w*w),cosB=Math.cos(T),sinB=Math.sin(T),mcosB=E*cosB,msinB=E*sinB,dBdA=p/hn*(1/f(1-xB2/S))*(dxBdA*E-g*dmdA)/S,fx=msinB-a,fy=d*(1+m*u)+E-mcosB-l,CxCA=dmdA*sinB+mcosB*dBdA,CxCD=mcosB*x,CyCA=1+dmdA-(dmdA*cosB-msinB*dBdA),CyCD=msinB*x,denominator=CxCA*CyCD-CyCA*CxCD,!denominator)break;p-=c=(fy*CxCA-fx*CyCA)/denominator,d-=h=(fx*CyCD-fy*CxCD)/denominator}while((Math.abs(c)>ln||Math.abs(h)>ln)&&--v>0);return[p,d]},a}function G(e,t){var n=e*e,r=t*t;return[e*(1-.162388*r)*(.87-952426e-9*n*n),t*(1+r/12)]}function Y(e){function t(){var e=!1,t=yn(n),r=t(e);return r.quincuncial=function(n){return arguments.length?t(e=!!n):e},r}function n(t){var n=t?function(t,n){var i=Math.abs(t)<pn,s=e(i?t:t>0?t-hn:t+hn,n),u=(s[0]-s[1])*Math.SQRT1_2,a=(s[0]+s[1])*Math.SQRT1_2;if(i)return[u,a];var f=r*Math.SQRT1_2,l=u>0^a>0?-1:1;return[l*u-o(a)*f,l*a-o(u)*f]}:function(t,n){var i=t>0?-0.5:.5,s=e(t+i*hn,n);return s[0]-=i*r,s};return e.invert&&(n.invert=t?function(t,n){var i=(t+n)*Math.SQRT1_2,s=(n-t)*Math.SQRT1_2,o=Math.abs(i)<.5*r&&Math.abs(s)<.5*r;if(!o){var u=r*Math.SQRT1_2,a=i>0^s>0?-1:1,f=-a*(t+(s>0?1:-1)*u),l=-a*(n+(i>0?1:-1)*u);i=(-f-l)*Math.SQRT1_2,s=(f-l)*Math.SQRT1_2}var c=e.invert(i,s);return o||(c[0]+=i>0?hn:-hn),c}:function(t,n){var i=t>0?-0.5:.5,s=e.invert(t+i*r,n),o=s[0]-i*hn;return-hn>o?o+=2*hn:o>hn&&(o-=2*hn),s[0]=o,s}),n}var r=e(pn,0)[0]-e(-pn,0)[0];return t.raw=n,t}function Z(e,t){var n=o(e),r=o(t),i=Math.cos(t),s=Math.cos(e)*i,a=Math.sin(e)*i,f=Math.sin(r*t);e=Math.abs(Math.atan2(a,f)),t=u(s),Math.abs(e-pn)>ln&&(e%=pn);var l=et(e>hn/4?pn-e:e,t);return e>hn/4&&(f=l[0],l[0]=-l[1],l[1]=-f),l[0]*=n,l[1]*=-r,l}function et(e,t){if(t===pn)return[0,0];var n=Math.sin(t),r=n*n,i=r*r,s=1+i,o=1+3*i,a=1-i,l=u(1/Math.sqrt(s)),c=a+r*s*l,h=(1-n)/c,p=Math.sqrt(h),d=h*s,v=Math.sqrt(d),m=p*a;if(0===e)return[0,-(m+r*v)];var g=Math.cos(t),y=1/g,b=2*n*g,w=(-3*r+l*o)*b,E=(-c*g-(1-n)*w)/(c*c),S=.5*E/p,x=a*S-2*r*p*b,T=r*s*E+h*o*b,N=-y*b,C=-y*T,k=-2*y*x,L=4*e/hn;if(e>.222*hn||hn/4>t&&e>.175*hn){var A=(m+r*f(d*(1+i)-m*m))/(1+i);if(e>hn/4)return[A,A];var O=A,M=.5*A,_=50;A=.5*(M+O);do{var D=Math.sqrt(d-A*A),P=A*(k+N*D)+C*u(A/v)-L;if(!P)break;0>P?M=A:O=A,A=.5*(M+O)}while(Math.abs(O-M)>ln&&--_>0)}else{var H,A=ln,_=25;do{var B=A*A,D=f(d-B),j=k+N*D,P=A*j+C*u(A/v)-L,F=j+(C-N*B)/D;A-=H=D?P/F:0}while(Math.abs(H)>ln&&--_>0)}return[A,-m-r*f(d-A*A)]}function tt(e,t){for(var n=0,r=1,i=.5,s=50;;){var o=i*i,u=Math.sqrt(i),a=Math.asin(1/Math.sqrt(1+o)),f=1-o+i*(1+o)*a,l=(1-u)/f,c=Math.sqrt(l),h=l*(1+o),p=c*(1-o),d=h-e*e,v=Math.sqrt(d),m=t+p+i*v;if(Math.abs(r-n)<cn||0===--s||0===m)break;m>0?n=i:r=i,i=.5*(n+r)}if(!s)return null;var g=Math.asin(u),y=Math.cos(g),b=1/y,w=2*u*y,E=(-3*i+a*(1+3*o))*w,S=(-f*y-(1-u)*E)/(f*f),x=.5*S/c,T=(1-o)*x-2*i*c*w,N=-2*b*T,C=-b*w,k=-b*(i*(1+o)*S+l*(1+3*o)*w);return[hn/4*(e*(N+C*v)+k*Math.asin(e/Math.sqrt(h))),g]}function nt(e,t,n){if(!e){var r=rt(t,1-n);return[[0,r[0]/r[1]],[1/r[1],0],[r[2]/r[1],0]]}var i=rt(e,n);if(!t)return[[i[0],0],[i[1],0],[i[2],0]];var r=rt(t,1-n),s=r[1]*r[1]+n*i[0]*i[0]*r[0]*r[0];return[[i[0]*r[2]/s,i[1]*i[2]*r[0]*r[1]/s],[i[1]*r[1]/s,-i[0]*i[2]*r[0]*r[2]/s],[i[2]*r[1]*r[2]/s,-n*i[0]*i[1]*r[0]/s]]}function rt(e,t){var n,r,i,s,o;if(ln>t)return s=Math.sin(e),r=Math.cos(e),n=.25*t*(e-s*r),[s-n*r,r+n*s,1-.5*t*s*s,e-n];if(t>=1-ln)return n=.25*(1-t),r=g(e),s=v(e),i=1/r,o=r*m(e),[s+n*(o-e)/(r*r),i-n*s*i*(o-e),i+n*s*i*(o+e),2*Math.atan(Math.exp(e))-pn+n*(o-e)/r];var a=[1,0,0,0,0,0,0,0,0],l=[Math.sqrt(t),0,0,0,0,0,0,0,0],c=0;for(r=Math.sqrt(1-t),o=1;Math.abs(l[c]/a[c])>ln&&8>c;)n=a[c++],l[c]=.5*(n-r),a[c]=.5*(n+r),r=f(n*r),o*=2;i=o*a[c]*e;do s=l[c]*Math.sin(r=i)/a[c],i=.5*(u(s)+i);while(--c);return[Math.sin(i),s=Math.cos(i),s/Math.cos(i-r),i]}function it(e,t,n){var r=Math.abs(e),i=Math.abs(t),s=m(i);if(r){var u=1/Math.sin(r),a=1/(Math.tan(r)*Math.tan(r)),l=-(a+n*s*s*u*u-1+n),c=(n-1)*a,h=.5*(-l+Math.sqrt(l*l-4*c));return[st(Math.atan(1/Math.sqrt(h)),n)*o(e),st(Math.atan(f((h/a-1)/n)),1-n)*o(t)]}return[0,st(Math.atan(s),1-n)*o(t)]}function st(e,t){if(!t)return e;if(1===t)return Math.log(Math.tan(e/2+hn/4));for(var n=1,r=Math.sqrt(1-t),i=Math.sqrt(t),s=0;Math.abs(i)>ln;s++){if(e%hn){var o=Math.atan(r*Math.tan(e)/n);0>o&&(o+=hn),e+=o+~~(e/hn)*hn}else e+=e;i=(n+r)/2,r=Math.sqrt(n*r),i=((n=i)-r)/2}return e/(Math.pow(2,s)*n)}function ot(e,t){var n=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-n*n),i=st(pn,r*r),s=-1,o=Math.log(Math.tan(hn/4+Math.abs(t)/2)),u=Math.exp(s*o)/Math.sqrt(n),a=ut(u*Math.cos(s*e),u*Math.sin(s*e)),f=it(a[0],a[1],r*r);return[-f[1],(t>=0?1:-1)*(.5*i-f[0])]}function ut(e,t){var n=e*e,r=t+1,i=1-n-t*t;return[.5*((e>=0?pn:-pn)-Math.atan2(i,2*e)),-0.25*Math.log(i*i+4*n)+.5*Math.log(r*r+n)]}function at(e,t){var n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function ft(e){function t(e,t){var s=i(e,t);e=s[0],t=s[1];var o=Math.sin(t),u=Math.cos(t),f=Math.cos(e),l=a(n*o+r*u*f),c=Math.sin(l),h=Math.abs(c)>ln?l/c:1;return[h*r*Math.sin(e),(Math.abs(e)>pn?h:-h)*(n*u-r*o*f)]}var n=Math.sin(e),r=Math.cos(e),i=lt(e);return i.invert=lt(-e),t.invert=function(e,t){var r=Math.sqrt(e*e+t*t),s=-Math.sin(r),o=Math.cos(r),u=r*o,a=-t*s,l=r*n,c=f(u*u+a*a-l*l),h=Math.atan2(u*l+a*c,a*l-u*c),p=(r>pn?-1:1)*Math.atan2(e*s,r*Math.cos(h)*o+t*Math.sin(h)*s);return i.invert(p,h)},t}function lt(e){var t=Math.sin(e),n=Math.cos(e);return function(e,r){var i=Math.cos(r),s=Math.cos(e)*i,o=Math.sin(e)*i,a=Math.sin(r);return[Math.atan2(o,s*n-a*t),u(a*n+s*t)]}}function ct(){var e=0,t=yn(ft),n=t(e),r=n.rotate,i=n.stream,s=d3.geo.circle();return n.parallel=function(r){if(!arguments.length)return e/hn*180;var i=n.rotate();return t(e=r*hn/180).rotate(i)},n.rotate=function(t){return arguments.length?(r.call(n,[t[0],t[1]-e/hn*180]),s.origin([-t[0],-t[1]]),n):(t=r.call(n),t[1]+=e/hn*180,t)},n.stream=function(e){return e=i(e),e.sphere=function(){e.polygonStart();var t,n=.01,r=s.angle(90-n)().coordinates[0],i=r.length-1,o=-1;for(e.lineStart();++o<i;)e.point((t=r[o])[0],t[1]);for(e.lineEnd(),r=s.angle(90+n)().coordinates[0],i=r.length-1,e.lineStart();--o>=0;)e.point((t=r[o])[0],t[1]);e.lineEnd(),e.polygonEnd()},e},n}function ht(e,t){function n(n,r){var i=On(n/t,r);return i[0]*=e,i}return arguments.length<2&&(t=e),1===t?On:1/0===t?dt:(n.invert=function(n,r){var i=On.invert(n/e,r);return i[0]*=t,i},n)}function pt(){var e=2,t=yn(ht),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n}function dt(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function vt(e,t){for(var n,r=Math.sin(t)*(0>t?2.43763:2.67595),i=0;20>i&&(t-=n=(t+Math.sin(t)-r)/(1+Math.cos(t)),!(Math.abs(n)<ln));i++);return[.85*e*Math.cos(t*=.5),Math.sin(t)*(0>t?1.93052:1.75859)]}function mt(e){function t(t,l){var c,h=Math.abs(l);if(h>r){var p=Math.min(e-1,Math.max(0,Math.floor((t+hn)/f)));t+=hn*(e-1)/e-p*f,c=d3.geo.collignon.raw(t,h),c[0]=c[0]*i/s-i*(e-1)/(2*e)+p*i/e,c[1]=o+4*(c[1]-u)*a/i,0>l&&(c[1]=-c[1])}else c=n(t,l);return c[0]/=2,c}var n=d3.geo.cylindricalEqualArea.raw(0),r=Mn*hn/180,i=2*hn,s=d3.geo.collignon.raw(hn,r)[0]-d3.geo.collignon.raw(-hn,r)[0],o=n(0,r)[1],u=d3.geo.collignon.raw(0,r)[1],a=d3.geo.collignon.raw(0,pn)[1]-u,f=2*hn/e;return t.invert=function(t,r){t*=2;var l=Math.abs(r);if(l>o){var c=Math.min(e-1,Math.max(0,Math.floor((t+hn)/f)));t=(t+hn*(e-1)/e-c*f)*s/i;var h=d3.geo.collignon.raw.invert(t,.25*(l-o)*i/a+u);return h[0]-=hn*(e-1)/e-c*f,0>r&&(h[1]=-h[1]),h}return n.invert(t,r)},t}function gt(){function e(){var e=180/t;return{type:"Polygon",coordinates:[d3.range(-180,180+e/2,e).map(function(e,t){return[e,1&t?90-1e-6:Mn]}).concat(d3.range(180,-180-e/2,-e).map(function(e,t){return[e,1&t?-90+1e-6:-Mn]}))]}}var t=2,n=yn(mt),r=n(t),i=r.stream;return r.lobes=function(e){return arguments.length?n(t=+e):t},r.stream=function(t){var n=r.rotate(),s=i(t),o=(r.rotate([0,0]),i(t));return r.rotate(n),s.sphere=function(){d3.geo.stream(e(),o)},s},r}function yt(e){function t(t,i){var u,a,h=1-Math.sin(i);if(h&&2>h){var p,d=pn-i,v=25;do{var m=Math.sin(d),g=Math.cos(d),y=s+Math.atan2(m,r-g),b=1+c-2*r*g;d-=p=(d-l*s-r*m+b*y-.5*h*n)/(2*r*m*y)}while(Math.abs(p)>cn&&--v>0);u=o*Math.sqrt(b),a=t*y/hn}else u=o*(e+h),a=t*s/hn;return[u*Math.sin(a),f-u*Math.cos(a)]}var n,r=1+e,i=Math.sin(1/r),s=u(i),o=2*Math.sqrt(hn/(n=hn+4*s*r)),f=.5*o*(r+Math.sqrt(e*(2+e))),l=e*e,c=r*r;return t.invert=function(e,t){var i=e*e+(t-=f)*t,h=(1+c-i/(o*o))/(2*r),p=a(h),d=Math.sin(p),v=s+Math.atan2(d,r-h);return[u(e/Math.sqrt(i))*hn/v,u(1-2*(p-l*s-r*d+(1+c-2*r*h)*v)/n)]},t}function bt(){var e=1,t=yn(yt),n=t(e);return n.ratio=function(n){return arguments.length?t(e=+n):e},n}function wt(e,t){return t>-_n?(e=Sn(e,t),e[1]+=Dn,e):L(e,t)}function Et(e,t){return Math.abs(t)>_n?(e=Sn(e,t),e[1]-=t>0?Dn:-Dn,e):L(e,t)}function St(e,t){return[3*e/(2*hn)*Math.sqrt(hn*hn/3-t*t),t]}function xt(e){function t(t,n){if(Math.abs(Math.abs(n)-pn)<ln)return[0,0>n?-2:2];var r=Math.sin(n),i=Math.pow((1+r)/(1-r),e/2),s=.5*(i+1/i)+Math.cos(t*=e);return[2*Math.sin(t)/s,(i-1/i)/s]}return t.invert=function(t,n){var r=Math.abs(n);if(Math.abs(r-2)<ln)return t?null:[0,o(n)*pn];if(r>2)return null;t/=2,n/=2;var i=t*t,s=n*n,a=2*n/(1+i+s);return a=Math.pow((1+a)/(1-a),1/e),[Math.atan2(2*t,1-i-s)/e,u((a-1)/(a+1))]},t}function Tt(){var e=.5,t=yn(xt),n=t(e);return n.spacing=function(n){return arguments.length?t(e=+n):e},n}function Nt(e,t){return[e*(1+Math.sqrt(Math.cos(t)))/2,t/(Math.cos(t/2)*Math.cos(e/6))]}function Ct(e,t){var n=e*e,r=t*t;return[e*(.975534+r*(-0.119161+n*-0.0143059+r*-0.0547009)),t*(1.00384+n*(.0802894+r*-0.02855+199025e-9*n)+r*(.0998909+r*-0.0491032))]}function kt(e,t){return[Math.sin(e)/Math.cos(t),Math.tan(t)*Math.cos(e)]}function Lt(e){function t(t,i){var s=i-e,o=Math.abs(s)<ln?t*n:Math.abs(o=hn/4+i/2)<ln||Math.abs(Math.abs(o)-pn)<ln?0:t*s/Math.log(Math.tan(o)/r);return[o,s]}var n=Math.cos(e),r=Math.tan(hn/4+e/2);return t.invert=function(t,i){var s,o=i+e;return[Math.abs(i)<ln?t/n:Math.abs(s=hn/4+o/2)<ln||Math.abs(Math.abs(s)-pn)<ln?0:t*Math.log(Math.tan(s)/r)/i,o]},t}function At(e,t){return[e,1.25*Math.log(Math.tan(hn/4+.4*t))]}function Ot(e){function t(t,r){for(var i,s=Math.cos(r),o=2/(1+s*Math.cos(t)),u=o*s*Math.sin(t),a=o*Math.sin(r),f=n,l=e[f],c=l[0],h=l[1];--f>=0;)l=e[f],c=l[0]+u*(i=c)-a*h,h=l[1]+u*h+a*i;return c=u*(i=c)-a*h,h=u*h+a*i,[c,h]}var n=e.length-1;return t.invert=function(t,r){var i=20,s=t,o=r;do{for(var a,f=n,l=e[f],c=l[0],h=l[1],p=0,d=0;--f>=0;)l=e[f],p=c+s*(a=p)-o*d,d=h+s*d+o*a,c=l[0]+s*(a=c)-o*h,h=l[1]+s*h+o*a;p=c+s*(a=p)-o*d,d=h+s*d+o*a,c=s*(a=c)-o*h-t,h=s*h+o*a-r;var v,m,g=p*p+d*d;s-=v=(c*p+h*d)/g,o-=m=(h*p-c*d)/g}while(Math.abs(v)+Math.abs(m)>ln*ln&&--i>0);if(i){var y=Math.sqrt(s*s+o*o),b=2*Math.atan(.5*y),w=Math.sin(b);return[Math.atan2(s*w,y*Math.cos(b)),y?u(o*w/y):0]}},t}function Mt(){var e=Pn.miller,t=yn(Ot),n=t(e);return n.coefficients=function(n){return arguments.length?t(e="string"==typeof n?Pn[n]:n):e},n}function _t(e,t){var n=Math.sqrt(6),r=Math.sqrt(7),i=Math.asin(7*Math.sin(t)/(3*n));return[n*e*(2*Math.cos(2*i/3)-1)/r,9*Math.sin(i/3)/r]}function Dt(e,t){for(var n,r=(1+Math.SQRT1_2)*Math.sin(t),i=t,s=0;25>s&&(i-=n=(Math.sin(i/2)+Math.sin(i)-r)/(.5*Math.cos(i/2)+Math.cos(i)),!(Math.abs(n)<ln));s++);return[e*(1+2*Math.cos(i)/Math.cos(i/2))/(3*Math.SQRT2),2*Math.sqrt(3)*Math.sin(i/2)/Math.sqrt(2+Math.SQRT2)]}function Pt(e,t){for(var n,r=Math.sqrt(6/(4+hn)),i=(1+hn/4)*Math.sin(t),s=t/2,o=0;25>o&&(s-=n=(s/2+Math.sin(s)-i)/(.5+Math.cos(s)),!(Math.abs(n)<ln));o++);return[r*(.5+Math.cos(s))*e/1.5,r*s]}function Ht(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-0.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-0.044475+.028874*n-.005916*r)))]}function Bt(e,t){return[e*(1+Math.cos(t))/2,2*(t-Math.tan(t/2))]}function jt(e,t){if(Math.abs(t)<ln)return[e,0];var n=Math.tan(t),r=e*Math.sin(t);return[Math.sin(r)/n,t+(1-Math.cos(r))/n]}function Ft(e){function t(t,r){var i=n?Math.tan(t*n/2)/n:t/2;if(!r)return[2*i,-e];var s=2*Math.atan(i*Math.sin(r)),o=1/Math.tan(r);return[Math.sin(s)*o,r+(1-Math.cos(s))*o-e]}var n=Math.sin(e);return t.invert=function(t,r){if(Math.abs(r+=e)<ln)return[n?2*Math.atan(n*t/2)/n:t,0];var i,s=t*t+r*r,o=0,f=10;do{var l=Math.tan(o),c=1/Math.cos(o),h=s-2*r*o+o*o;o-=i=(l*h+2*(o-r))/(2+h*c*c+2*(o-r)*l)}while(Math.abs(i)>ln&&--f>0);var p=t*(l=Math.tan(o)),d=Math.tan(Math.abs(r)<Math.abs(o+1/l)?.5*u(p):.5*a(p)+hn/4)/Math.sin(o);return[n?2*Math.atan(n*d)/n:2*d,o]},t}function It(e,t){var n,r=Math.min(18,36*Math.abs(t)/hn),i=Math.floor(r),s=r-i,o=(n=Bn[i])[0],u=n[1],a=(n=Bn[++i])[0],f=n[1],l=(n=Bn[Math.min(19,++i)])[0],c=n[1];return[e*(a+s*(l-o)/2+s*s*(l-2*a+o)/2),(t>0?pn:-pn)*(f+s*(c-u)/2+s*s*(c-2*f+u)/2)]}function qt(e){function t(t,n){var r=Math.cos(n),i=(e-1)/(e-r*Math.cos(t));return[i*r*Math.sin(t),i*Math.sin(n)]}return t.invert=function(t,n){var r=t*t+n*n,i=Math.sqrt(r),s=(e-Math.sqrt(1-r*(e+1)/(e-1)))/((e-1)/i+i/(e-1));return[Math.atan2(t*s,i*Math.sqrt(1-s*s)),i?u(n*s/i):0]},t}function Rt(e,t){function n(t,n){var o=r(t,n),u=o[1],a=u*s/(e-1)+i;return[o[0]*i/a,u/a]}var r=qt(e);if(!t)return r;var i=Math.cos(t),s=Math.sin(t);return n.invert=function(t,n){var o=(e-1)/(e-1-n*s);return r.invert(o*t,o*n*i)},n}function Ut(){var e=1.4,t=0,n=yn(Rt),r=n(e,t);return r.distance=function(r){return arguments.length?n(e=+r,t):e},r.tilt=function(r){return arguments.length?n(e,t=r*hn/180):180*t/hn},r}function zt(e,t){var n=Math.tan(t/2),r=Math.sin(hn/4*n);return[e*(.74482-.34588*r*r),1.70711*n]}function Wt(e){function t(t,s){var o=a(Math.cos(s)*Math.cos(t-n)),u=a(Math.cos(s)*Math.cos(t-r)),l=0>s?-1:1;return o*=o,u*=u,[(o-u)/(2*e),l*f(4*i*u-(i-o+u)*(i-o+u))/(2*e)]}if(!e)return d3.geo.azimuthalEquidistant.raw;var n=-e/2,r=-n,i=e*e,s=Math.tan(r),o=.5/Math.sin(r);return t.invert=function(e,t){var i,u,f=t*t,l=Math.cos(Math.sqrt(f+(i=e+n)*i)),c=Math.cos(Math.sqrt(f+(i=e+r)*i));return[Math.atan2(u=l-c,i=(l+c)*s),(0>t?-1:1)*a(Math.sqrt(i*i+u*u)*o)]},t}function Xt(){var e=[[0,0],[0,0]],t=yn(Wt),n=t(0),r=n.rotate;return delete n.rotate,n.points=function(n){if(!arguments.length)return e;e=n;var i=d3.geo.interpolate(n[0],n[1]),s=i(.5),o=d3.geo.rotation([-s[0],-s[1]])(n[0]),a=.5*i.distance,f=(o[0]<0?-1:1)*o[1]*vn,l=u(Math.sin(f)/Math.sin(a));return r.call(o,[-s[0],-s[1],-l*mn]),t(2*a)},n}function Vt(e){function t(e,t){var r=d3.geo.gnomonic.raw(e,t);return r[0]*=n,r}var n=Math.cos(e);return t.invert=function(e,t){return d3.geo.gnomonic.raw.invert(e/n,t)},t}function $t(){var e=[[0,0],[0,0]],t=yn(Vt),n=t(0),r=n.rotate;return delete n.rotate,n.points=function(n){if(!arguments.length)return e;e=n;var i=d3.geo.interpolate(n[0],n[1]),s=i(.5),o=d3.geo.rotation([-s[0],-s[1]])(n[0]),a=.5*i.distance,f=(o[0]<0?-1:1)*o[1]*vn,l=u(Math.sin(f)/Math.sin(a));return r.call(o,[-s[0],-s[1],-l*mn]),t(a)},n}function Jt(e,t){if(Math.abs(t)<ln)return[e,0];var n=Math.abs(t/pn),r=u(n);if(Math.abs(e)<ln||Math.abs(Math.abs(t)-pn)<ln)return[0,o(t)*hn*Math.tan(r/2)];var i=Math.cos(r),s=Math.abs(hn/e-e/hn)/2,a=s*s,f=i/(n+i-1),l=f*(2/n-1),c=l*l,h=c+a,p=f-c,d=a+f;return[o(e)*hn*(s*p+Math.sqrt(a*p*p-h*(f*f-c)))/h,o(t)*hn*(l*d-s*Math.sqrt((a+1)*h-d*d))/h]}function Kt(e,t){if(Math.abs(t)<ln)return[e,0];var n=Math.abs(t/pn),r=u(n);if(Math.abs(e)<ln||Math.abs(Math.abs(t)-pn)<ln)return[0,o(t)*hn*Math.tan(r/2)];var i=Math.cos(r),s=Math.abs(hn/e-e/hn)/2,a=s*s,l=i*(Math.sqrt(1+a)-s*i)/(1+a*n*n);return[o(e)*hn*l,o(t)*hn*f(1-l*(2*s+l))]}function Qt(e,t){if(Math.abs(t)<ln)return[e,0];var n=t/pn,r=u(n);if(Math.abs(e)<ln||Math.abs(Math.abs(t)-pn)<ln)return[0,hn*Math.tan(r/2)];var i=(hn/e-e/hn)/2,s=n/(1+Math.cos(r));return[hn*(o(e)*f(i*i+1-s*s)-i),hn*s]}function Gt(e,t){if(!t)return[e,0];var n=Math.abs(t);if(!e||n===pn)return[0,t];var r=n/pn,i=r*r,s=(8*r-i*(i+2)-5)/(2*i*(r-1)),u=s*s,a=r*s,l=i+u+2*a,c=r+3*s,h=e/pn,p=h+1/h,d=o(Math.abs(e)-pn)*Math.sqrt(p*p-4),v=d*d,m=l*(i+u*v-1)+(1-i)*(i*(c*c+4*u)+12*a*u+4*u*u),g=(d*(l+u-1)+2*f(m))/(4*l+v);return[o(e)*pn*g,o(t)*pn*f(1+d*Math.abs(g)-g*g)]}function Yt(e,t){return[e*Math.sqrt(1-3*t*t/(hn*hn)),t]}function Zt(e,t){var n=.90631*Math.sin(t),r=Math.sqrt(1-n*n),i=Math.sqrt(2/(1+r*Math.cos(e/=3)));return[2.66723*r*i*Math.sin(e),1.24104*n*i]}function en(e,t){var n=Math.cos(t),r=Math.cos(e)*n,i=1-r,s=Math.cos(e=Math.atan2(Math.sin(e)*n,-Math.sin(t))),o=Math.sin(e);return n=f(1-r*r),[o*n-s*i,-s*n-o*i]}function tn(e,t){var n=h(e,t);return[(n[0]+e/pn)/2,(n[1]+t)/2]}d3.geo.project=function(e,n){var r=n.stream;if(!r)throw new Error("not yet supported");return(e&&nn.hasOwnProperty(e.type)?nn[e.type]:t)(e,r)};var nn={Feature:e,FeatureCollection:function(t,n){return{type:"FeatureCollection",features:t.features.map(function(t){return e(t,n)})}}},rn=[],sn=[],on={point:function(e,t){rn.push([e,t])},result:function(){var e=rn.length?rn.length<2?{type:"Point",coordinates:rn[0]}:{type:"MultiPoint",coordinates:rn}:null;return rn=[],e}},un={lineStart:n,point:function(e,t){rn.push([e,t])},lineEnd:function(){rn.length&&(sn.push(rn),rn=[])},result:function(){var e=sn.length?sn.length<2?{type:"LineString",coordinates:sn[0]}:{type:"MultiLineString",coordinates:sn}:null;return sn=[],e}},an={polygonStart:n,lineStart:n,point:function(e,t){rn.push([e,t])},lineEnd:function(){var e=rn.length;if(e){do rn.push(rn[0].slice());while(++e<4);sn.push(rn),rn=[]}},polygonEnd:n,result:function(){if(!sn.length)return null;var e=[],t=[];return sn.forEach(function(n){r(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){return i(e[0],n)?(e.push(t),!0):void 0})||e.push([t])}),sn=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},fn={Point:on,MultiPoint:on,LineString:un,MultiLineString:un,Polygon:an,MultiPolygon:an},ln=1e-6,cn=ln*ln,hn=Math.PI,pn=hn/2,dn=Math.sqrt(hn),vn=hn/180,mn=180/hn,gn=d3.geo.projection,yn=d3.geo.projectionMutator;d3.geo.interrupt=function(e){function t(t,n){for(var r=0>n?-1:1,i=u[+(0>n)],s=0,o=i.length-1;o>s&&t>i[s][2][0];++s);var a=e(t-i[s][1][0],n);return a[0]+=e(i[s][1][0],r*n>r*i[s][0][1]?i[s][0][1]:n)[0],a}function n(){o=u.map(function(t){return t.map(function(t){var n,r=e(t[0][0],t[0][1])[0],i=e(t[2][0],t[2][1])[0],s=e(t[1][0],t[0][1])[1],o=e(t[1][0],t[1][1])[1];return s>o&&(n=s,s=o,o=n),[[r,s],[i,o]]})})}function r(){for(var e=1e-6,t=[],n=0,r=u[0].length;r>n;++n){var s=u[0][n],o=180*s[0][0]/hn,a=180*s[0][1]/hn,f=180*s[1][1]/hn,l=180*s[2][0]/hn,c=180*s[2][1]/hn;t.push(i([[o+e,a+e],[o+e,f-e],[l-e,f-e],[l-e,c+e]],30))}for(var n=u[1].length-1;n>=0;--n){var s=u[1][n],o=180*s[0][0]/hn,a=180*s[0][1]/hn,f=180*s[1][1]/hn,l=180*s[2][0]/hn,c=180*s[2][1]/hn;t.push(i([[l-e,c-e],[l-e,f+e],[o+e,f+e],[o+e,a-e]],30))}return{type:"Polygon",coordinates:[d3.merge(t)]}}function i(e,t){for(var n,r,i,s=-1,o=e.length,u=e[0],a=[];++s<o;){n=e[s],r=(n[0]-u[0])/t,i=(n[1]-u[1])/t;for(var f=0;t>f;++f)a.push([u[0]+f*r,u[1]+f*i]);u=n}return a.push(n),a}function s(e,t){return Math.abs(e[0]-t[0])<ln&&Math.abs(e[1]-t[1])<ln}var o,u=[[[[-hn,0],[0,pn],[hn,0]]],[[[-hn,0],[0,-pn],[hn,0]]]];e.invert&&(t.invert=function(n,r){for(var i=o[+(0>r)],a=u[+(0>r)],f=0,l=i.length;l>f;++f){var c=i[f];if(c[0][0]<=n&&n<c[1][0]&&c[0][1]<=r&&r<c[1][1]){var h=e.invert(n-e(a[f][1][0],0)[0],r);return h[0]+=a[f][1][0],s(t(h[0],h[1]),[n,r])?h:null}}});var a=d3.geo.projection(t),f=a.stream;return a.stream=function(e){var t=a.rotate(),n=f(e),i=(a.rotate([0,0]),f(e));return a.rotate(t),n.sphere=function(){d3.geo.stream(r(),i)},n},a.lobes=function(e){return arguments.length?(u=e.map(function(e){return e.map(function(e){return[[e[0][0]*hn/180,e[0][1]*hn/180],[e[1][0]*hn/180,e[1][1]*hn/180],[e[2][0]*hn/180,e[2][1]*hn/180]]})}),n(),a):u.map(function(e){return e.map(function(e){return[[180*e[0][0]/hn,180*e[0][1]/hn],[180*e[1][0]/hn,180*e[1][1]/hn],[180*e[2][0]/hn,180*e[2][1]/hn]]})})},a},(d3.geo.airy=c).raw=l,h.invert=function(e,t){if(!(e*e+4*t*t>hn*hn+ln)){var n=e,r=t,i=25;do{var s,o=Math.sin(n),u=Math.sin(n/2),f=Math.cos(n/2),l=Math.sin(r),c=Math.cos(r),h=Math.sin(2*r),p=l*l,d=c*c,v=u*u,m=1-d*f*f,g=m?a(c*f)*Math.sqrt(s=1/m):s=0,y=2*g*c*u-e,b=g*l-t,w=s*(d*v+g*c*f*p),E=s*(.5*o*h-2*g*l*u),S=.25*s*(h*u-g*l*d*o),x=s*(p*f+g*v*c),T=E*S-x*w;if(!T)break;var N=(b*E-y*x)/T,C=(y*S-b*w)/T;n-=N,r-=C}while((Math.abs(N)>ln||Math.abs(C)>ln)&&--i>0);return[n,r]}},(d3.geo.aitoff=function(){return gn(h)}).raw=h,(d3.geo.armadillo=d).raw=p,w.invert=function(e,t){if(e*=3/8,t*=3/8,!e&&Math.abs(t)>1)return null;var n=e*e,r=t*t,i=1+n+r,s=Math.sqrt(.5*(i-Math.sqrt(i*i-4*t*t))),a=u(s)/3,f=s?b(Math.abs(t/s))/3:y(Math.abs(e))/3,l=Math.cos(a),c=g(f),h=c*c-l*l;return[2*o(e)*Math.atan2(m(f)*l,.25-h),2*o(t)*Math.atan2(c*Math.sin(a),.25+h)]},(d3.geo.august=function(){return gn(w)}).raw=w;var bn=Math.log(1+Math.SQRT2);E.invert=function(e,t){if((r=Math.abs(t))<bn)return[e,2*Math.atan(Math.exp(t))-pn];var n,r,i=Math.sqrt(8),s=hn/4,u=25;do{var a=Math.cos(s/2),f=Math.tan(s/2);s-=n=(i*(s-hn/4)-Math.log(f)-r)/(i-.5*a*a/f)}while(Math.abs(n)>cn&&--u>0);return[e/(Math.cos(s)*(i-1/Math.sin(s))),o(t)*s]},(d3.geo.baker=function(){return gn(E)}).raw=E;var wn=d3.geo.azimuthalEquidistant.raw;(d3.geo.berghaus=x).raw=S;var En=T(hn),Sn=N(Math.SQRT2/pn,Math.SQRT2,hn);(d3.geo.mollweide=function(){return gn(Sn)}).raw=Sn,C.invert=function(e,t){var n,r,i=2.00276,s=i*t,o=0>t?-hn/4:hn/4,u=25;do r=s-Math.SQRT2*Math.sin(o),o-=n=(Math.sin(2*o)+2*o-hn*Math.sin(r))/(2*Math.cos(2*o)+2+hn*Math.cos(r)*Math.SQRT2*Math.cos(o));while(Math.abs(n)>ln&&--u>0);return r=s-Math.SQRT2*Math.sin(o),[e*(1/Math.cos(r)+1.11072/Math.cos(o))/i,r]},(d3.geo.boggs=function(){return gn(C)}).raw=C,L.invert=function(e,t){return[e/Math.cos(t),t]},(d3.geo.sinusoidal=function(){return gn(L)}).raw=L,(d3.geo.bonne=function(){return k(A).parallel(45)}).raw=A;var xn=N(1,4/hn,hn);(d3.geo.bromley=function(){return gn(xn)}).raw=xn,(d3.geo.chamberlin=M).raw=O,B.invert=function(e,t){var n=(n=t/dn-1)*n;return[n>0?e*Math.sqrt(hn/n)/2:0,u(1-n)]},(d3.geo.collignon=function(){return gn(B)}).raw=B,(d3.geo.craig=function(){return k(j)}).raw=j,F.invert=function(e,t){var n=Math.sqrt(3),r=3*u(t/(n*dn));return[dn*e/(n*(2*Math.cos(2*r/3)-1)),r]},(d3.geo.craster=function(){return gn(F)}).raw=F,(d3.geo.cylindricalEqualArea=function(){return k(I)}).raw=I,(d3.geo.cylindricalStereographic=function(){return k(q)}).raw=q,R.invert=function(e,t){var n=Math.sqrt(8/(3*hn)),r=t/n;return[e/(n*(1-Math.abs(r)/hn)),r]},(d3.geo.eckert1=function(){return gn(R)}).raw=R,U.invert=function(e,t){var n=2-Math.abs(t)/Math.sqrt(2*hn/3);return[e*Math.sqrt(6*hn)/(2*n),o(t)*u((4-n*n)/3)]},(d3.geo.eckert2=function(){return gn(U)}).raw=U,z.invert=function(e,t){var n=Math.sqrt(hn*(4+hn))/2;return[e*n/(1+f(1-t*t*(4+hn)/(4*hn))),t*n/2]},(d3.geo.eckert3=function(){return gn(z)}).raw=z,W.invert=function(e,t){var n=.5*t*Math.sqrt((4+hn)/hn),r=u(n),i=Math.cos(r);return[e/(2/Math.sqrt(hn*(4+hn))*(1+i)),u((r+n*(i+2))/(2+pn))]},(d3.geo.eckert4=function(){return gn(W)}).raw=W,X.invert=function(e,t){var n=Math.sqrt(2+hn),r=t*n/2;return[n*e/(1+Math.cos(r)),r]},(d3.geo.eckert5=function(){return gn(X)}).raw=X,V.invert=function(e,t){var n=1+pn,r=Math.sqrt(n/2);return[2*e*r/(1+Math.cos(t*=r)),u((t+Math.sin(t))/n)]},(d3.geo.eckert6=function(){return gn(V)}).raw=V,$.invert=function(e,t){var n=d3.geo.august.raw.invert(e/1.2,1.065*t);if(!n)return null;var r=n[0],i=n[1],s=20;e/=Tn,t/=Tn;do{var o=r/2,u=i/2,a=Math.sin(o),f=Math.cos(o),l=Math.sin(u),c=Math.cos(u),h=Math.cos(i),p=Math.sqrt(h),d=l/(c+Math.SQRT2*f*p),v=d*d,m=Math.sqrt(2/(1+v)),g=Math.SQRT2*c+(f+a)*p,y=Math.SQRT2*c+(f-a)*p,b=g/y,w=Math.sqrt(b),E=w-1/w,S=w+1/w,x=m*E-2*Math.log(w)-e,T=m*d*S-2*Math.atan(d)-t,N=l&&Math.SQRT1_2*p*a*v/l,C=(Math.SQRT2*f*c+p)/(2*(c+Math.SQRT2*f*p)*(c+Math.SQRT2*f*p)*p),k=-0.5*d*m*m*m,L=k*N,A=k*C,O=(O=2*c+Math.SQRT2*p*(f-a))*O*w,M=(Math.SQRT2*f*c*p+h)/O,_=-(Math.SQRT2*a*l)/(p*O),D=E*L-2*M/w+m*(M+M/b),P=E*A-2*_/w+m*(_+_/b),H=d*S*L-2*N/(1+v)+m*S*N+m*d*(M-M/b),B=d*S*A-2*C/(1+v)+m*S*C+m*d*(_-_/b),j=P*H-B*D;if(!j)break;var F=(T*P-x*B)/j,I=(x*H-T*D)/j;r-=F,i=Math.max(-pn,Math.min(pn,i-I))}while((Math.abs(F)>ln||Math.abs(I)>ln)&&--s>0);return Math.abs(Math.abs(i)-pn)<ln?[0,i]:s&&[r,i]};var Tn=3+2*Math.SQRT2;(d3.geo.eisenlohr=function(){return gn($)}).raw=$,J.invert=function(e,t){var n=t/(1+Nn);return[e?e/(Nn*f(1-n*n)):0,2*Math.atan(n)]};var Nn=Math.cos(35*vn);(d3.geo.fahey=function(){return gn(J)}).raw=J,K.invert=function(e,t){var n=Math.atan(t/dn),r=Math.cos(n),i=2*n;return[e*dn*.5/(Math.cos(i)*r*r),i]},(d3.geo.foucaut=function(){return gn(K)}).raw=K,d3.geo.gilbert=function(e){function t(t){return e([.5*t[0],u(Math.tan(.5*t[1]*vn))*mn])}var n=d3.geo.equirectangular().scale(mn).translate([0,0]);return e.invert&&(t.invert=function(t){return t=e.invert(t),t[0]*=2,t[1]=2*Math.atan(Math.sin(t[1]*vn))*mn,t}),t.stream=function(t){t=e.stream(t);var r=n.stream({point:function(e,n){t.point(.5*e,u(Math.tan(.5*-n*vn))*mn)},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}});return r.sphere=function(){t.sphere()},r.valid=!1,r},t};var Cn=Q(2.8284,-1.6988,.75432,-0.18071,1.76003,-0.38914,.042555);(d3.geo.ginzburg4=function(){return gn(Cn)}).raw=Cn;var kn=Q(2.583819,-0.835827,.170354,-0.038094,1.543313,-0.411435,.082742);(d3.geo.ginzburg5=function(){return gn(kn)}).raw=kn;var Ln=Q(5/6*hn,-0.62636,-0.0344,0,1.3493,-0.05524,0,.045);(d3.geo.ginzburg6=function(){return gn(Ln)}).raw=Ln,G.invert=function(e,t){var n,r=e,i=t,s=50;do{var o=i*i;i-=n=(i*(1+o/12)-t)/(1+o/4)}while(Math.abs(n)>ln&&--s>0);s=50,e/=1-.162388*o;do{var u=(u=r*r)*u;r-=n=(r*(.87-952426e-9*u)-e)/(.87-.00476213*u)}while(Math.abs(n)>ln&&--s>0);return[r,i]},(d3.geo.ginzburg8=function(){return gn(G)}).raw=G;var An=Q(2.6516,-0.76534,.19123,-0.047094,1.36289,-0.13965,.031762);(d3.geo.ginzburg9=function(){return gn(An)}).raw=An,Z.invert=function(e,t){var n=o(e),r=o(t),i=-n*e,s=-r*t,a=1>s/i,f=tt(a?s:i,a?i:s),l=f[0],c=f[1];a&&(l=-pn-l);var h=Math.cos(c),e=Math.cos(l)*h,t=Math.sin(l)*h,p=Math.sin(c);return[n*(Math.atan2(t,-p)+hn),r*u(e)]},d3.geo.gringorten=Y(Z),ot.invert=function(e,t){var n=(Math.SQRT2-1)/(Math.SQRT2+1),r=Math.sqrt(1-n*n),i=st(pn,r*r),s=-1,o=nt(.5*i-t,-e,r*r),u=at(o[0],o[1]),a=Math.atan2(u[1],u[0])/s;return[a,2*Math.atan(Math.exp(.5/s*Math.log(n*u[0]*u[0]+n*u[1]*u[1])))-pn]},d3.geo.guyou=Y(ot),(d3.geo.hammerRetroazimuthal=ct).raw=ft;var On=d3.geo.azimuthalEqualArea.raw;dt.invert=function(e,t){var n=2*u(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(d3.geo.hammer=pt).raw=ht,vt.invert=function(e,t){var n=Math.abs(n=t*(0>t?.5179951515653813:.5686373742600607))>1-ln?n>0?pn:-pn:u(n);return[1.1764705882352942*e/Math.cos(n),Math.abs(n=((n+=n)+Math.sin(n))*(0>t?.4102345310814193:.3736990601468637))>1-ln?n>0?pn:-pn:u(n)]},(d3.geo.hatano=function(){return gn(vt)}).raw=vt;var Mn=41+48/36+37/3600;(d3.geo.healpix=gt).raw=mt,(d3.geo.hill=bt).raw=yt;var _n=.7109889596207567,Dn=.0528035274542;wt.invert=function(e,t){return t>-_n?Sn.invert(e,t-Dn):L.invert(e,t)},(d3.geo.sinuMollweide=function(){return gn(wt).rotate([-20,-55])}).raw=wt,Et.invert=function(e,t){return Math.abs(t)>_n?Sn.invert(e,t+(t>0?Dn:-Dn)):L.invert(e,t)},(d3.geo.homolosine=function(){return gn(Et)}).raw=Et,St.invert=function(e,t){return[2/3*hn*e/Math.sqrt(hn*hn/3-t*t),t]},(d3.geo.kavrayskiy7=function(){return gn(St)}).raw=St,(d3.geo.lagrange=Tt).raw=xt,Nt.invert=function(e,t){var n=Math.abs(e),r=Math.abs(t),i=hn/Math.SQRT2,s=ln,o=pn;i>r?o*=r/i:s+=6*a(i/r);for(var u=0;25>u;u++){var l=Math.sin(o),c=f(Math.cos(o)),h=Math.sin(o/2),p=Math.cos(o/2),d=Math.sin(s/6),v=Math.cos(s/6),m=.5*s*(1+c)-n,g=o/(p*v)-r,y=c?-0.25*s*l/c:0,b=.5*(1+c),w=(1+.5*o*h/p)/(p*v),E=o/p*(d/6)/(v*v),S=y*E-w*b,x=(m*E-g*b)/S,T=(g*y-m*w)/S;if(o-=x,s-=T,Math.abs(x)<ln&&Math.abs(T)<ln)break}return[0>e?-s:s,0>t?-o:o]},(d3.geo.larrivee=function(){return gn(Nt)}).raw=Nt,Ct.invert=function(e,t){var n=o(e)*hn,r=t/2,i=50;do{var s=n*n,u=r*r,a=n*r,f=n*(.975534+u*(-0.119161+s*-0.0143059+u*-0.0547009))-e,l=r*(1.00384+s*(.0802894+u*-0.02855+199025e-9*s)+u*(.0998909+u*-0.0491032))-t,c=.975534-u*(.119161+3*s*.0143059+.0547009*u),h=-a*(.238322+.2188036*u+.0286118*s),p=a*(.1605788+7961e-7*s+ -0.0571*u),d=1.00384+s*(.0802894+199025e-9*s)+u*(3*(.0998909-.02855*s)-.245516*u),v=h*p-d*c,m=(l*h-f*d)/v,g=(f*p-l*c)/v;n-=m,r-=g}while((Math.abs(m)>ln||Math.abs(g)>ln)&&--i>0);return i&&[n,r]},(d3.geo.laskowski=function(){return gn(Ct)}).raw=Ct,kt.invert=function(e,t){var n=e*e,r=t*t,i=r+1,s=e?Math.SQRT1_2*Math.sqrt((i-Math.sqrt(n*n+2*n*(r-1)+i*i))/n+1):1/Math.sqrt(i);return[u(e*s),o(t)*a(s)]},(d3.geo.littrow=function(){return gn(kt)}).raw=kt,(d3.geo.loximuthal=function(){return k(Lt).parallel(40)}).raw=Lt,At.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*hn]},(d3.geo.miller=function(){return gn(At)}).raw=At;var Pn={alaska:[[.9972523,0],[.0052513,-0.0041175],[.0074606,.0048125],[-0.0153783,-0.1968253],[.0636871,-0.1408027],[.3660976,-0.2937382]],gs48:[[.98879,0],[0,0],[-0.050909,0],[0,0],[.075528,0]],gs50:[[.984299,0],[.0211642,.0037608],[-0.1036018,-0.0575102],[-0.0329095,-0.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-0.1435792],[.0075848,-0.1334108],[-0.0216473,.0776645],[-0.0225161,.0853673]],miller:[[.9245,0],[0,0],[.01943,0]],lee:[[.721316,0],[0,0],[-0.00881625,-0.00617325]]};(d3.geo.modifiedStereographic=Mt).raw=Ot,_t.invert=function(e,t){var n=Math.sqrt(6),r=Math.sqrt(7),i=3*u(t*r/9);return[e*r/(n*(2*Math.cos(2*i/3)-1)),u(3*Math.sin(i)*n/7)]},(d3.geo.mtFlatPolarParabolic=function(){return gn(_t)}).raw=_t,Dt.invert=function(e,t){var n=t*Math.sqrt(2+Math.SQRT2)/(2*Math.sqrt(3)),r=2*u(n);return[3*Math.SQRT2*e/(1+2*Math.cos(r)/Math.cos(r/2)),u((n+Math.sin(r))/(1+Math.SQRT1_2))]},(d3.geo.mtFlatPolarQuartic=function(){return gn(Dt)}).raw=Dt,Pt.invert=function(e,t){var n=Math.sqrt(6/(4+hn)),r=t/n;return Math.abs(Math.abs(r)-pn)<ln&&(r=0>r?-pn:pn),[1.5*e/(n*(.5+Math.cos(r))),u((r/2+Math.sin(r))/(1+hn/4))]},(d3.geo.mtFlatPolarSinusoidal=function(){return gn(Pt)}).raw=Pt,Ht.invert=function(e,t){var n,r=t,i=25;do{var s=r*r,o=s*s;r-=n=(r*(1.007226+s*(.015085+o*(-0.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.045255+o*(-0.311325+.259866*s-.005916*11*o)))}while(Math.abs(n)>ln&&--i>0);return[e/(.8707+(s=r*r)*(-0.131979+s*(-0.013791+s*s*s*(.003971-.001529*s)))),r]},(d3.geo.naturalEarth=function(){return gn(Ht)}).raw=Ht,Bt.invert=function(e,t){for(var n=t/2,r=0,i=1/0;10>r&&Math.abs(i)>ln;r++){var s=Math.cos(t/2);t-=i=(t-Math.tan(t/2)-n)/(1-.5/(s*s))}return[2*e/(1+Math.cos(t)),t]},(d3.geo.nellHammer=function(){return gn(Bt)}).raw=Bt;var Hn=Y(ot);(d3.geo.peirceQuincuncial=function(){return Hn().quincuncial(!0).rotate([-90,-90,45]).clipAngle(180-1e-6)}).raw=Hn.raw,jt.invert=function(e,t){if(Math.abs(t)<ln)return[e,0];var n,r=e*e+t*t,i=.5*t,s=10;do{var f=Math.tan(i),l=1/Math.cos(i),c=r-2*t*i+i*i;i-=n=(f*c+2*(i-t))/(2+c*l*l+2*(i-t)*f)}while(Math.abs(n)>ln&&--s>0);return f=Math.tan(i),[(Math.abs(t)<Math.abs(i+1/f)?u(e*f):o(e)*(a(Math.abs(e*f))+pn))/Math.sin(i),i]},(d3.geo.polyconic=function(){return gn(jt)}).raw=jt,(d3.geo.rectangularPolyconic=function(){return k(Ft)}).raw=Ft;var Bn=[[.9986,-0.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Bn.forEach(function(e){e[1]*=1.0144}),It.invert=function(e,t){var n=t/pn,r=90*n,i=Math.min(18,Math.abs(r/5)),s=Math.max(0,Math.floor(i));do{var o=Bn[s][1],u=Bn[s+1][1],a=Bn[Math.min(19,s+2)][1],f=a-o,l=a-2*u+o,c=2*(Math.abs(n)-u)/f,h=l/f,p=c*(1-h*c*(1-2*h*c));if(p>=0||1===s){r=(t>=0?5:-5)*(p+i);var d,v=50;do i=Math.min(18,Math.abs(r)/5),s=Math.floor(i),p=i-s,o=Bn[s][1],u=Bn[s+1][1],a=Bn[Math.min(19,s+2)][1],r-=(d=(t>=0?pn:-pn)*(u+p*(a-o)/2+p*p*(a-2*u+o)/2)-t)*mn;while(Math.abs(d)>cn&&--v>0);break}}while(--s>=0);var m=Bn[s][0],g=Bn[s+1][0],y=Bn[Math.min(19,s+2)][0];return[e/(g+p*(y-m)/2+p*p*(y-2*g+m)/2),r*vn]},(d3.geo.robinson=function(){return gn(It)}).raw=It,(d3.geo.satellite=Ut).raw=Rt,zt.invert=function(e,t){var n=t/1.70711,r=Math.sin(hn/4*n);return[e/(.74482-.34588*r*r),2*Math.atan(n)]},(d3.geo.times=function(){return gn(zt)}).raw=zt,(d3.geo.twoPointEquidistant=Xt).raw=Wt,(d3.geo.twoPointAzimuthal=$t).raw=Vt,Jt.invert=function(e,t){if(Math.abs(t)<ln)return[e,0];if(Math.abs(e)<ln)return[0,pn*Math.sin(2*Math.atan(t/hn))];var n=(e/=hn)*e,r=(t/=hn)*t,i=n+r,s=i*i,u=-Math.abs(t)*(1+i),f=u-2*r+n,l=-2*u+1+2*r+s,c=r/l+(2*f*f*f/(l*l*l)-9*u*f/(l*l))/27,h=(u-f*f/(3*l))/l,p=2*Math.sqrt(-h/3),d=a(3*c/(h*p))/3;return[hn*(i-1+Math.sqrt(1+2*(n-r)+s))/(2*e),o(t)*hn*(-p*Math.cos(d+hn/3)-f/(3*l))]},(d3.geo.vanDerGrinten=function(){return gn(Jt)}).raw=Jt,Kt.invert=function(e,t){if(!e)return[0,pn*Math.sin(2*Math.atan(t/hn))];var n=Math.abs(e/hn),r=(1-n*n-(t/=hn)*t)/(2*n),i=r*r,s=Math.sqrt(i+1);return[o(e)*hn*(s-r),o(t)*pn*Math.sin(2*Math.atan2(Math.sqrt((1-2*r*n)*(r+s)-n),Math.sqrt(s+r+n)))]},(d3.geo.vanDerGrinten2=function(){return gn(Kt)}).raw=Kt,Qt.invert=function(e,t){if(!t)return[e,0];var n=t/hn,r=(hn*hn*(1-n*n)-e*e)/(2*hn*e);return[e?hn*(o(e)*Math.sqrt(r*r+1)-r):0,pn*Math.sin(2*Math.atan(n))]},(d3.geo.vanDerGrinten3=function(){return gn(Qt)}).raw=Qt,Gt.invert=function(e,t){if(!e||!t)return[e,t];t/=hn;var n=o(e)*e/pn,r=(n*n-1+4*t*t)/Math.abs(n),i=r*r,s=2*t,u=50;do{var a=s*s,f=(8*s-a*(a+2)-5)/(2*a*(s-1)),l=(3*s-a*s-10)/(2*a*s),c=f*f,h=s*f,p=s+f,d=p*p,v=s+3*f,m=d*(a+c*i-1)+(1-a)*(a*(v*v+4*c)+c*(12*h+4*c)),g=-2*p*(4*h*c+(1-4*a+3*a*a)*(1+l)+c*(-6+14*a-i+(-8+8*a-2*i)*l)+h*(-8+12*a+(-10+10*a-i)*l)),y=Math.sqrt(m),b=r*(d+c-1)+2*y-n*(4*d+i),w=r*(2*f*l+2*p*(1+l))+g/y-8*p*(r*(-1+c+d)+2*y)*(1+l)/(i+4*d);s-=F=b/w}while(F>ln&&--u>0);return[o(e)*(Math.sqrt(r*r+4)+r)*hn/4,pn*s]},(d3.geo.vanDerGrinten4=function(){return gn(Gt)}).raw=Gt;var jn=function(){var e=4*hn+3*Math.sqrt(3),t=2*Math.sqrt(2*hn*Math.sqrt(3)/e);return N(t*Math.sqrt(3)/hn,t,e/6)}();(d3.geo.wagner4=function(){return gn(jn)}).raw=jn,Yt.invert=function(e,t){return[e/Math.sqrt(1-3*t*t/(hn*hn)),t]},(d3.geo.wagner6=function(){return gn(Yt)}).raw=Yt,Zt.invert=function(e,t){var n=e/2.66723,r=t/1.24104,i=Math.sqrt(n*n+r*r),s=2*u(i/2);return[3*Math.atan2(e*Math.tan(s),2.66723*i),i&&u(t*Math.sin(s)/(1.24104*.90631*i))]},(d3.geo.wagner7=function(){return gn(Zt)}).raw=Zt,en.invert=function(e,t){var n=-0.5*(e*e+t*t),r=Math.sqrt(-n*(2+n)),i=t*n+e*r,s=e*n-t*r,o=Math.sqrt(s*s+i*i);return[Math.atan2(r*i,o*(1+n)),o?-u(r*s/o):0]},(d3.geo.wiechel=function(){return gn(en)}).raw=en,tn.invert=function(e,t){var n=e,r=t,i=25;do{var s,o=Math.cos(r),u=Math.sin(r),f=Math.sin(2*r),l=u*u,c=o*o,h=Math.sin(n),p=Math.cos(n/2),d=Math.sin(n/2),v=d*d,m=1-c*p*p,g=m?a(o*p)*Math.sqrt(s=1/m):s=0,y=.5*(2*g*o*d+n/pn)-e,b=.5*(g*u+r)-t,w=.5*s*(c*v+g*o*p*l)+.5/pn,E=s*(h*f/4-g*u*d),S=.125*s*(f*d-g*u*c*h),x=.5*s*(l*p+g*v*o)+.5,T=E*S-x*w,N=(b*E-y*x)/T,C=(y*S-b*w)/T;n-=N,r-=C}while((Math.abs(N)>ln||Math.abs(C)>ln)&&--i>0);return[n,r]},(d3.geo.winkel3=function(){return gn(tn)}).raw=tn}(),define("d3.geo.projection.v0.min",["d3"],function(){}),function(){define("bloomer2/charts/map",["bloomer2/charts/chart_base","bloomer2/charts/dimension","bloomer2/charts/legend","bloomer2/charts/labels","bloomer/trailing_bubble","models/map_utility","d3","topojson","d3.geo.projection.v0.min"],function(e,t,n,r,i,s,o,u){return function(){var u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D;return a=function(){var e,t,n,r,i;return r=null,e=null,n=null,i=null,t=function(e){var t;return t=e.selectAll("path.country").data(n,r.key),t.enter().append("path").attr({"class":"country",opacity:0,fill:r.color}).on("click",r.click).on("mouseover",r.over).on("mouseout",r.out),t.attr({fill:function(e,t){return r.color(e)}}),t.attr({d:function(e,t){return i(r.geo(e))},opacity:r.opacity}),t.exit().attr("opacity",0).remove()},t.dimension=function(e){return arguments.length?(r=e,t):r},t.constraints=function(n){return arguments.length?(e=n,t):e},t.data=function(e){return arguments.length?(n=e,t):n},t.transformPath=function(e){return arguments.length?(i=e,t):i},t},l=function(){var e,t,n,r;return t=null,e=null,n=1,r=function(r){var i;return r.style({"font-size":n+"em"}),e=e.filter(function(e){return t.geo(e)!=null}),i=r.selectAll("g.entity").data(e,t.key),i.enter().append("g").attr("class","entity").call(function(e){return e.append("text").attr({"class":"text-bg","text-anchor":"middle","pointer-events":"none","stroke-width":3,dx:0,dy:"0.67em"}),e.append("text").attr({"class":"matte","stroke-opacity":0,"text-anchor":"middle","pointer-events":"none",dx:0,dy:"0.67em"})}),i.exit().remove(),i.order().each(function(e,n){return o.select(this).attr("transform","translate("+y(t.geo(e))[0]+" "+y(t.geo(e))[1]+")")}),i.select(".matte").text(t.label),i.select(".text-bg").text(t.label).attr({fill:t.color,stroke:t.color})},r.dimension=function(e){return arguments.length?(t=e,r):t},r.data=function(t){return arguments.length?(e=t,r):e},r.fontSize=function(e){return arguments.length?(n=e,r):n},r},u=function(){var e,t,n,r,s;return n=null,s=[-20,-20],r=i(),t=null,e=function(e){var i;return i=e.selectAll("g.trailing-bubble").data(t.filter(n.bubble),n.key),i.enter().append("g").attr({"class":"trailing-bubble",opacity:0}),i.each(function(e,t){var i,u;i=e[0][0];if(!i)return;return u=n.bubblePt(i),s=[-0.25,-0.25],r.point(u).vector(s,18).text(n.bubbleText(e)).color(o.rgb(n.color(e))),o.select(this).call(r)}).transition().duration(80).attr({opacity:1}),i.exit().remove()},e.dimension=function(t){return arguments.length?(n=t,e):n},e.data=function(n){return arguments.length?(t=n,e):t},e},c=e().dimension(d={color:t(),opacity:t(),geo:t(),label:t().value(function(e){return e.displayName}),key:t().value(function(e,t){return t}),bubble:t(),bubbleText:t(),bubblePt:t().value(function(e){return[y(e)[0],y(e)[1]]}),over:t(),out:t(),click:t()}).layer(E={legend:n().dimension(d),contour:a().dimension(d).transformPath(T),labels:l().dimension(d),chartLabels:r(),bubble:u().dimension(d)}),p=c.constraints(),h=String(Math.random()).substr(2,6),T=null,_=!1,m=1600,f=.6,L=null,g=s.defaultFocus,C=null,A=null,N={},M=null,D=null,b=null,k=null,v=null,O=null,w={focusId:null,projectionType:null,width:null,height:null,showGraticule:null},y=function(e){var t;return N[e.id]==null&&(t=e.properties.centroid,t!=null?N[e.id]=C(t):N[e.id]=T.centroid(e)),N[e.id]},x=function(e){var t,n,r,i,s;w.width=D,w.height=b,p=c.constraints(),s=p.inner.size(),D=s[0],b=s[1],t=c.data();if(!t)return;return c(e),i=w.width!==D||w.height!==b||w.focusId!==g.id||w.projectionType!==L||w.showGraticule!==O||w.regionalZoom!==A,i&&x.setUpProjection(),w.focusId=g.id,w.projectionType=L,w.showGraticule=O,w.regionalZoom=A,M=e.select("svg"),n=M.selectAll("defs").data([null]),n.enter().append("defs").append("clipPath").attr("id","clip_"+h).append("rect"),n.select("rect").attr({x:p.inner.tl[0],y:p.inner.tl[1],width:p.inner.size()[0],height:p.inner.size()[1]}),r=M.selectAll(".layer").data(["contour","labels","legend","chartLabels","bubble"]),r.enter().append("g").attr("class",function(e){return"map "+e+" layer"}),r.exit().remove(),r.each(function(e){var n,r;return n=E[e],r=o.select(this),typeof n.constraints=="function"&&n.constraints(p),typeof n.data=="function"&&n.data(Array.isArray(t)?t:t[n]),e==="contour"&&r.attr("clip-path","url(#clip_"+h+")"),r.call(n)})},S=function(e,t,n,r,i){var s,u;return s=i||{x:.37,y:.65},u=Math.min(D*t*s.x,b*t*s.y),u*=r,e.scale(u*n),o.geo.path().projection(e)},x.setUpProjection=function(){var e,t,n,r,i,o,u,a,l,c,h;return i=C,_&&(L="albers",g=s.usFocus),h=_||!O?[]:graticule,c=_||!O?[]:[{type:"Sphere"}],C=s.projections[L].base(),u=s.projections[L].pull||1,o=s.projections[L].nudge||0,r=s.projections[L].horizNudge||.1,g.id!=="world"&&(o=0,r=.1),l=Math.min(b*f,D*f*.37),L!=="albers"&&C.center(g.center).rotate(g.rotate),C.translate([p.inner.tl[0]+D/2+r*D/2,p.inner.tl[1]+b/2+o*b/2]),T=S(C,f,1,u),g.path!=null&&(e=T.bounds(g.path.geometry),t=e[1][0]-e[0][0],n=e[1][1]-e[0][1],a=.9/Math.max(t/D,n/b)*.6,T=S(C,a,A,u)),g.scaleFactor!=null&&(T=S(C,g.scaleFactor,A,u,g.aspect)),E.contour.transformPath(T),N={}},x.projectionType=function(e){return arguments.length?(L=e,x):L},x.focus=function(e){return arguments.length?(g=e,x):g},x.regionalZoom=function(e){return arguments.length?(A=e,x):A},x.usMode=function(e){var t;return arguments.length?(t=_,_=e,t!==_&&x.setUpProjection(),x):_},x.displayLegend=function(e){return arguments.length?(v=e,x):v},x.showGraticule=function(e){return arguments.length?(O=e,x):O},c.rebind(x)}})}.call(this),function(){define("bloomer2/charts/data_grid",["bloomer2/charts/chart_base","bloomer2/charts/dimension","d3"],function(e,t,n){return function(){var r,i,s,o,u;return u=55,r=e().dimension(s={headers:t().value(function(e,t){return null}),columns:t().value(function(e,t){return e!=null?e:[]}),cell:t(),key:t().value(function(e,t){return t})}).layer(o={table:function(e,t,n,r){var i,o,a,f,l,c;e.style({width:n[0]+"px",height:n[1]+"px","margin-top":r.t+"px","margin-right":r.r+"px","margin-bottom":r.b-"px","margin-left":r.l+"px"}),l=e.selectAll("table.data-grid-table").data([null]),l.enter().append("table").attr("class","data-grid-table"),l.attr({width:n[0],height:n[1]}),a=l.selectAll("tr.data-grid-header").data([s.headers(t)].filter(function(e){return e!=null})),a.enter().append("tr").attr("class","data-grid-header"),a.exit().remove(),o=a.selectAll("th.data-grid-header-cell").data(function(e){return e}),o.enter().append("th").attr("class","data-grid-header-cell"),o.exit().remove(),o.html(function(e){return e}),f=l.selectAll("tr.data-grid-row").data(t!=null?t:[]),f.enter().append("tr").attr("class","data-grid-row"),f.exit().remove(),i=f.selectAll("td.data-grid-cell").data(s.columns),i.enter().append("td").attr("class","data-grid-cell"),i.html(s.cell),i.exit().remove(),c=[l.node().offsetWidth,l.node().offsetHeight],c[1]>n[1]&&l.attr("width",n[0]-u);if(c[0]>=n[0])return l.attr("height",n[1]-u)}}),i=function(e){var t,i,s,u;return u=r.innerSize(),t=r.data(),s=r.padding(),e.classed({"data-grid":!0,bloomer:!0}),i=e.selectAll(".layer").data(r.enabled()?["table"]:[]),i.enter().append("div").attr("class",function(e){return""+e+" layer"}),i.exit().remove(),i.each(function(e){if(e==="table")return n.select(this).call(o.table,t,u,s)})},i.scrollSize=function(e){return arguments.length===0?u:(u=e,i)},r.rebind(i)}})}.call(this),function(){define("bloomer/image",["d3","underscore"],function(e,t){return function(){var n,r,i,s,o,u,a,f,l,c,h,p;return c=null,h=null,r=null,f=null,u={t:4,r:10,b:1,l:10},a="50% 50%",i=null,s=null,l=null,n=!0,p=0,o=function(t){var o,f;return o=t.selectAll(".image").data(n?[c]:[],function(e){return e}),o.enter().append(i!=null?"a":"div").attr({"class":"image",href:i,target:s}).style({position:"absolute",background:"url("+c+") no-repeat"}),o.style({width:""+(h-u.l-u.r)+"px",height:""+(r-u.t-u.b)+"px",margin:""+u.t+"px "+u.r+"px "+u.b+"px "+u.l+"px","background-size":l,"background-position":a}),f=t.selectAll("img.measure-img").data([c],function(e){return e}),f.enter().append("img").attr({src:c,"class":"measure-img"}).style({visibility:"hidden"}).on("load",function(){return p=this.width/this.height,e.select(this).style("display","none")}),f.exit().remove(),o.exit().remove()},o.url=function(e){return arguments.length===0?c:(c=e,o)},o.width=function(e){return arguments.length===0?h:(h=e,o)},o.height=function(e){return arguments.length===0?r:(r=e,o)},o.padding=function(e){return arguments.length===0?t.clone(u):(u=e,o)},o.position=function(e){return arguments.length===0?a:(a=e,o)},o.sizing=function(e){return arguments.length===0?l:(l=e,o)},o.enabled=function(e){return arguments.length===0?n:(n=!!e,o)},o.href=function(e,t){return arguments.length===0?i:(i=e,s=t,o)},o.requiredHeight=function(e){return arguments.length===0?f:(f=e,o)},o.widthHeightRatio=function(){return p},o}})}.call(this),function(){define("bloomer/transition_maybe",["d3"],function(e){var t;return t={duration:250,easing:"cubic-in-out",delay:0},function(e,n){return n==null&&(n=t),function(r,i){var s,o,u,a,f,l;return i==null&&(i=n),e?r:r.transition().duration((f=(l=i.duration)!=null?l:n.duration)!=null?f:t.duration).ease((u=(a=i.easing)!=null?a:n.easing)!=null?u:t.easing).delay((s=(o=i.delay)!=null?o:n.delay)!=null?s:t.delay)}}})}.call(this),function(){define("bloomer2/charts/time_slider",["bloomer2/charts/chart_base","bloomer2/charts/dimension","bloomer/transition_maybe","underscore","d3"],function(e,t,n,r,i){return function(){var r,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L;return o={time:t().scale(i.time.scale())},r=e().dimension(o).padding({t:0,r:80,b:0,l:80}),b=null,E=!1,m=15,N=s=i.time.format("%x"),v=function(e){var t,n,r;return t=o.time.domain(),r=t[1]-t[0],n=1+Math.round(m*(e-t[0])/r),Number(t[0])+Math.round(r*n/m)},h=function(e){return o.time.scale().invert(Math.max(L,Math.min(r.innerSize()[0]-L,e)))},x=18,S=20,g=100,k=8,L=5,y=null,l="cubic-in-out",f=250,c=100,p=!1,d=!1,u=i.dispatch("scrub","change","commit","start"),w=function(e){var t;return t=i.mouse(e)[0],b=h(t+L)},a=i.behavior.drag().on("dragstart",function(){return i.event.sourceEvent.stopPropagation(),i.select(this).select(".pill").transition().style("opacity",1),p=!0,u.start()}).on("drag",function(){var e,t;return e=i.select(this),t=i.select(this.parentNode).select(".track"),w(t.node()),u.scrub()}).on("dragend",function(){return i.event.sourceEvent.stopPropagation(),i.select(this).select(".pill").transition().style("opacity",0),p=!1,u.commit()}),C=function(e,t){var s,c,h,v,m,g,C,A,O,M,_;return C=r.innerSize(),s=r.padding(),e.classed("bloomer",!0),e.classed("time-slider",!0),o.time.rangeOr([x/2+L,C[0]-x/2-L]),M=e.selectAll(".track").data([null]),M.enter().append("div").attr("class","track").style("height",""+k+"px").on("click",function(){return i.event.stopPropagation(),i.select(this.parentNode).select(".pill").transition().style("opacity",1).each("end",function(){return u.commit(),i.select(this).transition().delay(1e3).style("opacity",0)}),w(M.node()),u.change()}),M.style({left:""+(s.l+L)+"px",top:""+(s.t+C[1]/2-k/2)+"px",width:""+(C[0]-L*2)+"px"}),A=e.selectAll(".thumb").data([null]),O=A.enter().append("div").attr("class","thumb").style("width",""+x+"px").call(a),O.append("div").attr("class","pill"),c=A.select(".pill").style("width","auto").text(N(new Date(b))),m=c.node().scrollWidth+30,c.style("left",""+(-m/2+x/2)+"px").style("width",""+m+"px"),_=o.time(b),n(t||p,{duration:f,easing:l,delay:0})(A.style({top:""+(s.t+C[1]/2-S/2)+"px",height:""+(S-2)+"px",display:b!=null?"block":"none"})).style("left",""+(s.l+_-x/2)+"px"),g=e.selectAll(".range-label").data(o.time.domain()||[]),g.enter().append("label").attr("class",function(e,t){return"range-label "+(t===0?"min":"max")+"-label"}),g.style("top",""+(s.t+C[1]/2)+"px").each(function(e,t){var n;return n=t===0?s.r:s.l,i.select(this).style(["right","left"][t],""+(C[0]+n)+"px").style("display",b?"block":"none").text(N(new Date(e)))}),g.exit().remove(),h=e.selectAll(".play-button").data(E?[null]:[]),h.enter().append("div").attr("class","play-button").on("click",function(){return i.event.stopPropagation(),d=!d,d?T(!0):(clearTimeout(y),u.commit())}),E&&(v=72-g.node().scrollWidth),h.classed("paused",!d).style({left:""+(s.l+L-104+v)+"px",top:""+(s.t+C[1]/2-k/2-6)+"px"}),h.exit().remove()},T=function(e){var t,n;return e==null&&(e=!1),t=o.time.domain(),e&&Number(b)===Number(t[1])?b=t[0]:b=v(b),b<t[1]?(u.change(!1,500),n=b===t[0]?400:c,y=setTimeout(T,n)):(b=t[1],d=!1,u.commit())},C.selectedTime=function(e){return arguments.length===0?b:(b=e,C)},C.timeFormat=function(e){return arguments.length===0?N:(N=e!=null?e:s,C)},C.invert=function(e){return!arguments.length===0?h:(h=e,C)},C.showPlay=function(e){return arguments.length===0?E:(E=e,C)},C.nextTime=function(e){return arguments.length===0?v:(v=e,C)},C.frameDuration=function(e){return arguments.length===0?c:(c=e,C)},i.rebind(C,u,"on"),r.rebind(C)}})}.call(this),function(){define("bloomer/text_area",["underscore","d3"],function(e,t){return function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v;return v=null,s=null,c=null,l=null,i="14px",a=1.5,t=!1,u=!1,p="left",n="#555",h="",o="",r=!0,f={t:4,r:10,b:1,l:10},d=function(e){var s;return s=e.selectAll("div.text-area").data(r?[null]:[]),s.enter().append("div").style({overflow:"hidden"}),s.exit().remove(),r?(s.attr({"class":"text-area"}).style({margin:""+f.t+"px "+f.r+"px "+f.b+"px "+f.l+"px",color:n,"font-size":i,"line-height":a,"text-align":p,"font-weight":t?"bold":void 0,"font-style":u?"italic":void 0}),s.html()!==o&&s.html(o),c=s.node().scrollWidth+f.l+f.r,l=s.node().scrollHeight+f.t+f.b):c=l=null},d.remove=function(e){var t;return t=e.selectAll("div.text-area").data([]),t.exit().remove()},d.width=function(e){return arguments.length===0?v:(v=e,d)},d.height=function(e){return arguments.length===0?s:(s=e,d)},d.requiredWidth=function(){return c},d.requiredHeight=function(){return l},d.fontSize=function(e){return arguments.length===0?i:(i=e,d)},d.bold=function(e){return arguments.length===0?t:(t=e,d)},d.italic=function(e){return arguments.length===0?u:(u=e,d)},d.color=function(e){return arguments.length===0?n:(n=e,d)},d.lineHeight=function(e){return arguments.length===0?a:(a=e,d)},d.textAlign=function(e){return arguments.length===0?p:(p=e,d)},d.padding=function(t){return arguments.length===0?e.clone(f):(f=t,d)},d.html=function(e){return arguments.length===0?o:(o=e,d)},d.enabled=function(e){return arguments.length===0?r:(r=e,d)},d}})}.call(this),function(){define("bloomer/masonry_layout",["bloomer/transition_maybe","underscore","d3"],function(e,t,n){var r;return r=0,function(){var i,s,o,u,a;return u=100,s=n.layout.treemap().mode("slice-dice").sort(function(e,t){return n.descending(e.index,t.index)}).value(function(e){return e.weight*Math.max(e.row.height,e.row.minHeight)}),a=null,i=function(e){var n;return e.height=0,t.each(e.children,function(n,i){var s,o,u,a,f,l;return n.index=(s=n.index)!=null?s:i,n.numCols=n.children.length,n.persistentId=(o=n.persistentId)!=null?o:r++,n.minHeight=0,n.height=(u=n.height)!=null?u:(a=n.children[0])!=null?a.height:void 0,n.resizable=(f=n.resizable)!=null?f:!t.any(n.children,function(e){return e.resizable===!1}),t.each(n.children,function(e,t){var i,s,o;e.row=n,e.weight=(i=e.weight)!=null?i:1/n.numCols,e.index=(s=e.index)!=null?s:t,e.persistentId=(o=e.persistentId)!=null?o:r++;if(e.minHeight!=null)return n.minHeight=Math.max(n.minHeight,e.minHeight)}),e.height=((l=e.height)!=null?l:0)+Math.max(n.height,n.minHeight)}),n=u===e.height?.001:0,a=s.size([u+n,e.height]).nodes({children:[e]})},i.cells=function(){return t.filter(a,function(e){return e.depth===3})},i.rows=function(){return t.filter(a,function(e){return e.depth===2})},i.width=function(e){return arguments.length===0?u:(u=e,i)},i.insertRow=function(e,n,r){var i,s,o,u,a,f,l,c;n==null&&(n=e.children.length),i={index:n,height:r!=null?(f=r.row)!=null?f.height:void 0:void 0,resizable:(l=r!=null?(c=r.row)!=null?c.resizable:void 0:void 0)!=null?l:!0,parent:e,children:[t.extend(r!=null?r:{},{index:0,weight:1})]},i.children[0].row=i,o=e.children;for(u=0,a=o.length;u<a;u++)s=o[u],s.index>=i.index&&s.index++;return o.push(i),i.children[0]},i.insertCol=function(e,n,r){var i,s,o,u,a,f;s=e.children,e.numCols++,o=t.extend(r!=null?r:{},{row:e,index:n,weight:1/e.numCols});for(u=0,a=s.length;u<a;u++)i=s[u],i.index>=o.index&&i.index++,i.weight=((f=i.weight)!=null?f:1)*(e.numCols-1)/e.numCols;return s.push(o),o},i.removeCol=function(e){var n,r,s,o,u,a;s=e.parent,r=s.children,s.numCols--,r.splice(t.indexOf(r,e),1),o=t.reduce(r,function(e,t){return e+t.weight},0);for(u=0,a=r.length;u<a;u++)n=r[u],n.index>e.index&&n.index--,n.weight=n.weight/o;if(s.numCols===0)return i.removeRow(s)},i.removeRow=function(e){var n,r,i,s,o;r=e.parent.children,r.splice(t.indexOf(r,e),1),o=[];for(i=0,s=r.length;i<s;i++)n=r[i],n.index>e.index?o.push(n.index--):o.push(void 0);return o},i.replaceCol=function(e,n){var r;return r=t.indexOf(e.parent.children,e),e.parent.children[r]=t.extend(n,{row:e.parent,index:e.index,weight:e.weight})},o=function(){},i.updateCell=function(e){return arguments.length===0?o:(o=e,i)},i.paint=function(t,n){var r,s,u,a,f;return n==null&&(n={}),u=e((a=n.skipTransition)!=null?a:!0),r={position:"absolute",left:function(e){return e.x+"px"},top:function(e){return e.y+"px"},width:function(e){return e.dx+"px"},height:function(e){return e.dy+"px"}},s=t.selectChildren(".cell").data(i.cells(),function(e){return e.persistentId}),s.enter().append("div").classed({cell:!0}).style({position:"absolute"}).style(r),u(s).style(r).each((f=n.updateCell)!=null?f:o),s.exit().remove()},i.nodes=i,n.rebind(i,s,"children")}})}.call(this),function(){define("bloomer/grid_layout",["underscore","d3"],function(e,t){return function(){var n,r,i,s,o,u;return u=100,i=100,s=function(t){return e.map(t.split(""),function(e){return parseInt(e,10)-1})},n=null,o=null,r=function(a){var f,l,c;return n||r.colDivs([.5]),o||r.rowDivs([.5]),l=n.domain().length-1,c=o.domain().length-1,console.log(l,"x",c),f=e.map(a,function(e){var r,a,f,c,h;return r=s(e),c=t.min(r,function(e){return e%l}),a=t.max(r,function(e){return e%l+1}),h=t.min(r,function(e){return Math.floor(e/l)}),f=t.max(r,function(e){return Math.floor(e/l)+1}),{cells:e,x:n(c)*u,y:o(h)*i,width:u*(n(a)-n(c)),height:i*(o(f)-o(h))}})},r.nodes=r,r.width=function(e){return arguments.length===0?u:(u=e,r)},r.height=function(e){return arguments.length===0?i:(i=e,r)},r.colDivs=function(i){var s,o;return arguments.length===0?s:(s=i,o=s.concat(),o.splice(0,0,0),o.push(1),n||(n=t.scale.linear()),n.domain(e.map(o,function(e,t){return t})).range(o),r)},r.rowDivs=function(n){var i,s;return arguments.length===0?s:(s=n,i=s.concat(),i.splice(0,0,0),i.push(1),o||(o=t.scale.linear()),o.domain(e.map(i,function(e,t){return t})).range(i),r)},r}})}.call(this),function(){define("bloomer/lib",["bloomer/layered","bloomer/format","bloomer2/charts/bar_chart","bloomer2/charts/trendline","bloomer2/charts/scatter","bloomer2/charts/map","bloomer2/charts/data_grid","bloomer/trailing_bubble","bloomer/image","bloomer2/charts/time_slider","bloomer/text_area","bloomer/masonry_layout","bloomer/grid_layout"],function(){var e,t,n,r;return d3.selection.prototype.selectChildren=function(e){var t;return t=this.node(),this.selectAll(e).filter(function(){return this.parentNode===t})},e=arguments,n=0,r=function(){return e[n++]},t={layered:r(),format:r(),chart:{barChart:r(),trendline:r(),scatter:r(),map:r(),dataGrid:r()},bubble:{trailing:r()},image:r(),time:{slider:r()},text:{area:r()},layout:{masonry:r(),grid:r()}},window.bloomer=t})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/content",["bloomer/lib","d3","underscore","backbone"],function(e,n,r,i){var s;return s=function(i){function s(e){var t,n,i,o,u;n=typeof this.properties=="function"?this.properties():this.properties,this.properties=s.prototype.properties.concat(n),this.savedAttributes=s.prototype.savedAttributes.concat(this.savedAttributes),s.__super__.constructor.call(this,e,{parse:!0}),u=this.properties;for(i=0,o=u.length;i<o;i++)t=u[i],t.savedAttributes&&this.savedAttributes.push(t.savedAttributes),typeof t.initialize=="function"&&t.initialize(this);this.savedAttributes=r.flatten(this.savedAttributes)}return t(s,i),s.getNew=function(e,t){var n,i,s,o,u;r.isString(e)&&(e={type:e}),s=this.resources.builders,i=(u=s[e.type])!=null?u:s.synonyms[e.type.toLowerCase()],i==null&&(console.log("substitute",e.type),i=e.type==="pager"?s.Visualization:s.Text,e.text=e.type);if(i==null)throw new Error("Content type "+e.type+" not found.");return n=this.resources.isEditable?i.Editable:i,o=n.type||i.type,e.type!==o&&(console.warn("Re-typing "+e.type+" as "+o),e.type=o),new n(e,t)},s.resources={},s.use=function(e){return r.extend(s.resources,e),this},s.instances={},s.type=null,s.icon=null,s.prototype.savedAttributes=["type","entityStates","customClass"],s.prototype.properties=[],s.prototype.property=function(e){return r.find(this.properties,function(t){return t.name===e})},s.prototype.graphic=null,s.prototype.initialize=function(){return s.instances[this.cid]=this,r.extend(this,this.pick(["weight","height"])),this.createGraphic(),this.delegateEvents()},s.prototype.createGraphic=function(){return this.graphic=(new e.layered).forward(["width","height","size","padding"])},s.prototype.delegateEvents=function(){},s.prototype.prepare=function(e){var t,n,r,i;i=this.properties;for(n=0,r=i.length;n<r;n++)t=i[n],t.prepare!=null&&t.prepare(this);return this},s.prototype.render=function(e){return this.graphic.width(this.dx).height(this.dy).size([this.dx,this.dy]).padding(this.get("padding")||0),this.sel.call(this.graphic,e!=null?e.skipTransition:void 0),this},s.prototype.toJSON=function(){var e,t,n,i,s,o,u;t=r.result(this,"defaults"),n={},n.type=this.get("type"),u=this.savedAttributes;for(s=0,o=u.length;s<o;s++)e=u[s],i=this.attributes[e],r.isEqual(i,t[e])||(n[e]=i);return n},s.prototype.setElement=function(e){return this.el=e,this.sel=n.select(this.el).datum(this),this.get("customClass")&&this.sel.classed(this.get("customClass"),!0),this.get("el")||(this.set("el",this.el,{silent:!0}),this.prepare()),this},s.prototype.defaults=function(){var e,t,n,i,s,o,u;e={type:this.constructor.type,icon:this.constructor.icon,height:400},o=this.properties;for(i=0,s=o.length;i<s;i++){t=o[i];if(t.defaults==null&&t["default"]===void 0)continue;n=(u=t.defaults)!=null?u:t["default"],typeof n=="function"&&(n=n.call(t)),typeof n=="object"&&!r.isArray(n)?r.extend(e,n):n!=null&&(e[t.name]=n)}return e},s}(Backbone.Model)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("content_renderer",["builders2/content","backbone","jquery"],function(t,r,i){var s,o;return s=function(r){function s(){return this._updatePane=e(this._updatePane,this),o=s.__super__.constructor.apply(this,arguments),o}return n(s,r),s.prototype.initialize=function(e){return e==null&&(e={}),this.height=e.height||"auto",s.__super__.initialize.call(this,e)},s.prototype.setElement=function(e,t){var n,r,o;return s.__super__.setElement.call(this,e,t),this.$el.addClass("content-renderer"),this.$pane=i(document.createElement("div")).css({position:"relative"}).addClass("content-renderer-pane").appendTo(this.$el),this.$root=i(document.createElement("div")).appendTo(this.$pane),i.scrollSize==null&&(n=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),r=n.children(),o=r.innerWidth()-r.height(99).innerWidth(),n.remove(),i.scrollSize=isNaN(o)||!o?18:Math.max(10,o)),this},s.prototype.setRootCell=function(e){var n;return(n=this.root)!=null&&n.off("change:requiredHeight",this._updatePane),t.use({scrollSize:i.scrollSize}),this.root=e,this.$root.empty(),this.render(),this._updatePane(),this.root.on("change:requiredHeight",this._updatePane)},s.prototype.find=function(e,t,n){var r,i,s,o,u,a;t==null&&(t=this.root),n==null&&(n=!1),typeof e=="string"&&(e={type:e}),n=e.where||n,delete e.where,i=t.get("children"),s=i.where(e),a=i.models;for(o=0,u=a.length;o<u;o++)r=a[o],r.get("children")&&(s=s.concat(this.find(e,r,!0)));return n?s:s[0]},s.prototype.render=function(e){var t;return e==null&&(e=0),this.$el.css("overflow-x","hidden"),t=this.root.dx=this.$pane.width(),this.root.set("height",this.height==="auto"?0:this.height==="viewport"?this.$el.height():isNaN(this.height)?0:this.height),this.root.setElement(this.$root[0]).render(),this.root.hasChanged("requiredHeight")||this._updatePane(),this.$el.css("overflow-x",""),this},s.prototype._updatePane=function(){this.$pane.height()!==this.root.get("requiredHeight")&&this.$pane.height(this.root.get("requiredHeight"));if(this.root.dx!==this.$pane.width())return this.render()},s}(r.View)})}.call(this),function(){define("models/palette",[],function(){var e;return e=function(){function e(){}return e.prototype.rgb=function(){return["#f36e28","#00509a","#794583","#82b337","#d32434","#edc70b","#1d978c","#c32885","#a7552a","#00a2d0","#aaaaaa","#333"]},e}()})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){return function(){return e.apply(t,arguments)}};define("builders2/props_impl",["builders2/content","models/palette","models/map_utility","bloomer2/charts/labels","bloomer2/charts/legend","underscore"],function(e,i,s,o,u,a){var f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at;return{Segments:Z=function(){function e(e){var t,n,r,i;this.name=(n=e.name)!=null?n:"segments",this.type=(r=e.type)!=null?r:ot,this.canHave=(i=e.canHave)!=null?i:2,this.props=function(){var n,r,i,s;i=e.props,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t instanceof N?s.push(t):s.push(new t.type(a.extend({canHave:this.canHave},t,{type:null})));return s}.call(this)}return e.prototype.defaults=function(){var e,t,n,r,i;e={},i=this.props;for(n=0,r=i.length;n<r;n++)t=i[n],t.defaults&&a.extend(e,t.defaults());return e},e.prototype.initialize=function(e){var t,n,r,i;i=this.props;for(n=0,r=i.length;n<r;n++)t=i[n],t.initialize&&t.initialize(e);return this},e.prototype.prepare=function(e){var t,n,r,i;i=this.props;for(n=0,r=i.length;n<r;n++)t=i[n],t.prepare(e);return this},e.prototype.render=function(e){var t,n,r,i;i=this.props;for(n=0,r=i.length;n<r;n++)t=i[n],t.render&&t.render(e);return this},e}(),Multi:R=function(){function e(e){var t,n,r,i,s;this.token=e.token,this.subtype=e.subtype,this.canHave=(i=e.canHave)!=null?i:2,this.subs=[];for(t=r=1,s=this.canHave;1<=s?r<=s:r>=s;t=1<=s?++r:--r)n=new this.subtype(a.extend({token:this.token+t},this._subOptions(t-1,e))),this.subs.push(n)}return e.prototype.defaults=function(){var e,t,n,r,i;e={},i=this.subs;for(n=0,r=i.length;n<r;n++)t=i[n],t.defaults&&a.extend(e,t.defaults());return e},e.prototype.initialize=function(e){var t,n,r,i;i=this.subs;for(n=0,r=i.length;n<r;n++)t=i[n],t.initialize&&t.initialize(e);return this},e.prototype.prepare=function(e){var t,n,r,i;i=this.subs;for(n=0,r=i.length;n<r;n++)t=i[n],t.prepare&&t.prepare(e);return this},e.prototype.render=function(e){var t,n,r,i;i=this.subs;for(n=0,r=i.length;n<r;n++)t=i[n],t.render!=null&&t.render(e);return this},e.prototype.createGraphic=function(e){var t,n,r,i;i=this.subs;for(n=0,r=i.length;n<r;n++)t=i[n],t.createGraphic&&t.createGraphic(e);return this},e.prototype._subOptions=function(e){return{}},e}(),DatasetConfig:T=function(){function t(e){var t;this.token=e.token,this.name=e.name||this.token+"Dataset",this.dataset=this.name,this.prefix=this.token+"Prefix",this.suffix=this.token+"Suffix",this.sorting=e.sorting||"sortBy",this.iRequired=(t=e.iRequired)!=null?t:Infinity}return t.prototype.initialize=function(e){var t;return e.savedAttributes.push(this.dataset),t=e.get("datasets"),t||e.set("datasets",t=[],{silent:!0}),(e.___datasetNames||(e.___datasetNames=[])).push(this.dataset),t.numExpected=e.___datasetNames.length},t.prototype.sync=function(e){var t,n,r,i,s,o,u,a;i=e.get("datasets"),n=!1,a=e.___datasetNames;for(s=o=0,u=a.length;o<u;s=++o)r=a[s],(t=e.get(r))?(n=n||i[s]!==t,i[s]=t):(t=i[s])&&!e.has(r)?(e.set(r,t,{silent:!0}),n=!0):e.hasChanged(r)&&(n=!0);return n},t.prototype.prepare=function(t){var n,r,i,s,o,u,a,f,l=this;if(t.___datasetNames[0]===this.dataset&&(this.sync(t)||t.hasChanged(this.sorting)||t.hasChanged("entityStates")||!t.___datasets)){n=e.resources.db.select({names:t.get("datasets")}),i=t.get("entityStates"),t.___entities=n.transpose(function(e,t){var n;return(i!=null?(n=i[e.name])!=null?n.hidden:void 0:void 0)!==!0&&t<l.iRequired});if(i){a=t.___entities;for(o=0,u=a.length;o<u;o++){r=a[o];if(s=(f=i[r.name])!=null?f.displayName:void 0)r.displayName=s}}return t.___unsortedEntities=t.___entities.concat(),t.___entityDisplayNames=t.___entities.map(function(e){return e.displayName}),t.___datasets=t.___entities.transpose()}},t}(),MultiDataset:U=function(e){function n(e){n.__super__.constructor.call(this,a.extend({subtype:T},e))}return t(n,e),n}(R),DimensionConfig:N=function(){function e(e){var t,n=this;this.dimension=e.dimension||e.token,this.token=e.token||this.dimension,this.name=this.token+"Dimension",this.dataset=this.token+"Dataset",this.domain=this.token+"Domain",this.scale=this.token+"Scale",this.label=this.token+"Label",this.prefix=this.token+"Prefix",this.suffix=this.token+"Suffix",this.customDomain=this.token+"CustomDomain",this.canSpan=a.isArray(e.canSpan)?e.canSpan:typeof e.canSpan=="string"?[e.canSpan]:["allTime"],this.nice=(t=e.nice)!=null?t:!0,this.extractValue=e.extractValue,this.extractExtent=e.extractExtent||function(e){var t,r;t=(r=e.___datasets)!=null?r.byName(e.get(n.dataset)):void 0;if(t)return[t!=null?t.min:void 0,t!=null?t.max:void 0]},this.defaultDomain=e.defaultDomain}return e.prototype.derive=function(e){var t,n,r,i,s,o,u,a,f=this;return t=this.extractExtent(e),t?(r=e.get(this.domain),r==="custom"?n=(i=e.get(this.customDomain))!=null?i:[null,null]:n=[null,null],{domain:[(s=(o=n[0])!=null?o:t[0])!=null?s:null,(u=(a=n[1])!=null?a:t[1])!=null?u:null],scale:function(){switch(e.get(this.scale)){case"square":return d3.scale.pow().exponent(2);case"squareRoot":return d3.scale.sqrt();case"threshold":return d3.scale.threshold();case"time":return d3.time.scale();default:return d3.scale.linear()}}.call(this),nice:this.nice&&r!=="custom",value:this.extractValue||function(t){var n,r;n=t.byName(e.get(f.dataset));if(n!=null)return(r=n.nearest(e.___focusTime))!=null?r.value:void 0},fallback:this.fallback}):null},e.prototype.prepare=function(e){var t,n;t=this.derive(e);if(t==null)return;n=e.chart.dimension(this.dimension),"scale"in t&&n.scale(t.scale),t.domain!=null&&n.domain(t.domain),t.range!=null&&n.range(t.range),t.nice!=null&&n.nice(t.nice),t.fallback!=null&&n.fallback(t.fallback);if(t.value!=null)return n.value(t.value)},e}(),ValueDimension:ot=function(e){function r(e){var t;r.__super__.constructor.call(this,e),this.canBeTime=(t=e.canBeTime)!=null?t:!1}return t(r,e),r.prototype.defaults=function(){var e,t,n;return e={},e[this.domain]=(t=this.defaultDomain)!=null?t:"allTime",e[this.scale]=(n=this.defaultScale)!=null?n:"linear",e},r.prototype.initialize=function(e){e.savedAttributes.push(this.scale),e.savedAttributes.push(this.prefix),e.savedAttributes.push(this.suffix),e.savedAttributes.push(this.label),(this.canSpan.length!==1||this.canSpan[0]!=="allTime")&&e.savedAttributes.push(this.domain);if(n.call(this.canSpan,"custom")>=0)return e.savedAttributes.push(this.customDomain)},r.prototype.prepare=function(e){return r.__super__.prepare.call(this,e)},r}(N),TimeDimension:nt=function(e){function r(e){r.__super__.constructor.call(this,a.extend(e,{extractValue:function(e){return e!=null?e.seq:void 0}}))}return t(r,e),r.prototype.defaults=function(){var e,t,n;return e={},e[this.domain]=(t=this.defaultDomain)!=null?t:"allTime",e[this.scale]=(n=this.defaultScale)!=null?n:"time",e},r.prototype.initialize=function(e){e.savedAttributes.push(this.scale),e.savedAttributes.push(this.label),(this.canSpan.length!==1||this.canSpan[0]!=="allTime")&&e.savedAttributes.push(this.domain);if(n.call(this.canSpan,"custom")>=0)return e.savedAttributes.push(this.customDomain)},r.prototype.prepare=function(e){return r.__super__.prepare.call(this,e)},r.prototype.seqType=function(e){var t,n,r;return(t=e.___datasets)!=null?(n=t[0])!=null?(r=n.meta)!=null?r.seqType:void 0:void 0:void 0},r}(N),SizeFactor:tt=function(e){function n(e){n.__super__.constructor.call(this,a.extend({nice:!1},e)),this.factor=this.token+"Factor"}return t(n,e),n.prototype.defaults=function(){var e;return e={},e[this.factor]=1,e[this.scale]="squareRoot",e},n.prototype.initialize=function(e){return e.savedAttributes.push(this.factor)},n.prototype.derive=function(e){var t,r,i,s,o=this;return t=n.__super__.derive.call(this,e)||{},r=(i=(s=t.domain)!=null?s[1]:void 0)!=null?i:1,a.extend({value:function(t){return.016*e.get(o.factor)},scale:d3.scale.sqrt()},t,{domain:[0,r],range:[0,e.dy*.1*e.get(this.factor)]})},n}(N),ParallelDimensions:J=function(e){function n(e){this.extractValue=e.extractValue,n.__super__.constructor.call(this,a.extend({subtype:ot},e)),this.dimension=this.token}return t(n,e),n.prototype._subOptions=function(e,t){return{dimension:this.token,canSpan:e===0?t.canSpan.filter(function(e){return e!=="asAbove"}):t.canSpan,defaultDomain:e===0?"allTime":"asAbove",extractValue:this.extractValue,extractExtent:t.extractExtent}},n.prototype.prepare=function(e){var t,n;return t=a.filter(this.subs,function(t){return e.___datasets.byName(e.get(t.dataset))!=null}),typeof (n=e.chart.dimension(this.dimension)).n=="function"&&n.n(t.length),N.prototype.prepare.call(this,e)},n.prototype.derive=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;c=[],S=this.subs;for(m=0,b=S.length;m<b;m++)u=S[m],f=e.get(u.domain),f!=="asAbove"&&c.push(t=[]),t.push(u);l=[],p=[],h=[],d=[];for(s=g=0,w=c.length;g<w;s=++g){i=c[s],a=i[0],r=e.get(a.customDomain)||[null,null],n=null;for(o=y=0,E=i.length;y<E;o=++y){u=i[o];if(o===0){n=u.derive(e);if(n==null)break;s===0&&(v=n.value)}l.push(n.domain),p.push(n.scale),h.push(n.nice),d.push(n.value);if(o===0||r[0]!=null&&r[1]!=null)continue;f=(x=u.derive(e))!=null?x.domain:void 0;if(f==null)continue;r[0]==null&&(n.domain[0]=Math.min(n.domain[0],f[0])),r[1]==null&&(n.domain[1]=Math.max(n.domain[1],f[1]))}}return l.length===0?null:{domain:l,scale:p,nice:h,value:d}},n}(R),AxisConfig:c=function(){function e(e){var t,n,r;this.dimension=(t=e.dimension)!=null?t:e.token,this.token=(n=e.token)!=null?n:this.dimension,this.name=this.token+"AxisConfig",this.sides=e.sides,this.assignment=e.assignment||this.token+"AxesAssignment",this.orientation=e.orientation||"orientation",this.valFormat=new(e.formatter||ut)({token:this.token+"Tick",dataset:this.token,defaultPrecision:0}),this.timeFormat=new rt({token:this.token+"Tick","for":"axis"}),this.defaultAssignment=e.defaultAssignment,this.canBeAssigned=(r=e.canBeAssigned)!=null?r:!0}return e.prototype.defaults=function(){var e;return e={},e[this.assignment]=this.defaultAssignment||[this.dimension,this.dimension],a.extend(e,this.valFormat.defaults(),this.timeFormat.defaults())},e.prototype.initialize=function(e){return e.savedAttributes.push(this.assignment),this.valFormat.initialize(e),this.timeFormat.initialize(e)},e.prototype.prepare=function(e){var t,n,r;n=this.derive(e),t=e.chart.layer("axes"),n.formatters&&t.tickFormatters(n.formatters),n.ticks&&t.ticks(n.ticks),r=e.chart.layer("chartLabels");if(n.labels)return r.text(n.labels)},e.prototype.derive=function(e,t){var n,r,i,s,o,u,f,l,c,h,p;t==null&&(t={}),u=this.valFormat.derive(e),o=function(e,t){return u(e)},s=this.timeFormat.derive(e),c=this.sides,a.isArray(c)||(c=c[e.get(this.orientation)]||c.otherwise),i={formatters:{},labels:{}},typeof t.init=="function"&&t.init(i),r=e.get(this.assignment);for(f=h=0,p=r.length;h<p;f=++h){n=r[f];if(!!this.canBeAssigned&&n!==this.dimension)continue;l=c[f],e.get(this.token+"Scale")==="time"?i.formatters[l]=s:i.formatters[l]=o,i.labels[l]=e.get(n+"Label"),typeof t.side=="function"&&t.side(i,l)}return i},e}(),ValueAxis:st=function(e){function n(e){n.__super__.constructor.call(this,e),this.count=this.token+"TickCount",this.responsive=this.token+"Responsiveness"}return t(n,e),n.prototype.defaults=function(){var e;return e={},e[this.count]="7",e[this.responsive]=!0,a.extend(e,n.__super__.defaults.call(this))},n.prototype.initialize=function(e){return e.savedAttributes.push(this.count),n.__super__.initialize.call(this,e)},n.prototype.derive=function(e){var t,r,i;return t=e.get(this.count),t=t==="auto"?null:parseInt(t),i=e.get(this.responsive),i&&t&&(r=e.chart.innerSize()),n.__super__.derive.call(this,e,{init:function(e){return e.ticks={}},side:function(e,n){var s,o;return i&&t&&r?(o=r[n==="l"||n==="r"?1:0],s=Math.max(1,Math.pow(o/400,1)),e.ticks[n]=Math.floor(t*s)):e.ticks[n]=null}})},n.prototype.render=function(e){if(e.get(this.count)!=="auto")return this.prepare(e)},n}(c),CategoricalAxis:y=function(e){function n(e){n.__super__.constructor.call(this,a.extend({formatter:z},e))}return t(n,e),n}(c),AssignedAxes:f=function(e){function n(e){n.__super__.constructor.call(this,a.extend({subtype:st},e)),this.dimension=this.token,this.assignment=this.token+"AxesAssignment"}return t(n,e),n.prototype._subOptions=function(e,t){return{dimension:this.token+(e+1),sides:t.sides,assignment:this.token+"AxesAssignment",defaultAssignment:[this.token+(e+1),this.token+(e+1)]}},n.prototype.defaults=function(){var e;return e={},a.extend(e,n.__super__.defaults.call(this)),e[this.assignment]=[this.subs[0].dimension,this.subs[0].dimension],e},n.prototype.prepare=function(e){var t,r,i;return r=a.map(this.subs,function(e){return e.dimension}),t=(i=e.get(this.assignment))!=null?i:[null,null],t[0]==null&&(t[0]=this.subs[0].dimension),t[1]==null&&(t[1]=this.subs[0].dimension),e.chart.primaryAxis(r.indexOf(t[0])).secondaryAxis(r.indexOf(t[1])),n.__super__.prepare.call(this,e)},n}(R),SegmentOpacity:Y=function(e){function n(){return at=n.__super__.constructor.apply(this,arguments),at}return t(n,e),n.prototype.initialize=function(e){return e.savedAttributes.push(this.token)},n.prototype.defaults=function(){return{}},n.prototype.derive=function(e){var t,n;return t=(n=e.get(this.token))!=null?n:[],{domain:[0,1],scale:d3.scale.linear(),nice:!1,value:function(n,r,i){var s,o;return s=(typeof e.___isDimmed=="function"?e.___isDimmed(e.___entities[r]):void 0)?.25:1,Math.max(.15,s*((o=t[i])!=null?o:1-i/4))}}},n}(N),SegmentColor:G=function(e){function n(e){n.__super__.constructor.call(this,e),this.colors=this.token+"s"}return t(n,e),n.prototype.palette=(new i).rgb(),n.prototype.initialize=function(e){return e.savedAttributes.push(this.colors)},n.prototype.defaults=function(){var e;return e={},e[this.colors]=[this.palette[0],this.palette[1],this.palette[1]],e},n.prototype.derive=function(e){var t,n,r=this;return t=(n=e.get(this.colors))!=null?n:[],{domain:this.palette.concat(),range:this.palette.concat(),scale:d3.scale.ordinal(),nice:!1,value:function(t,n,i){return e.get(r.colors)[i]}}},n}(N),LineStyle:F=function(){function e(e){var t,n,r,i;this.token=e.token||"lineStyle",this.canHave=e.canHave||1,this.plural=e.canHave>1,this.lineStyle=this.plural?this.token+"s":this.token,this.defaultLineStyle=e.defaultLineStyle||(this.plural?function(){i=[];for(var e=1,t=this.canHave;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(e);return i}.apply(this).map(function(e){return e===1?"solid":e===2?"dashed":"dotted"}):"solid"),this.canOverride=(r=e.canOverride)!=null?r:!1,this.overriden=this.token}return e.prototype.initialize=function(e){e.savedAttributes.push(this.lineStyle);if(this.plural)return e.savedAttributes.push(this.token)},e.prototype.defaults=function(){var e;return e={},e[this.lineStyle]=this.defaultLineStyle,this.plural&&(e[this.token]="segment"),e},e.prototype.prepare=function(e){var t,n,r,i,s,o,u,a=this;r=e.get(this.lineStyle),i=e.get(this.token),u=["marker","dashes"];for(s=0,o=u.length;s<o;s++){n=u[s],t=e.chart.dimension(n).scale(d3.scale.ordinal());if(this.plural){if(e.get(this.token)!=="segment")return;t.domain(r.map(this._index)).range(r.map(this["_"+n])).value(function(e,t,n){return n})}else t.domain(e.___entities.map(this._index)).range(e.___entities.map(function(t,i){var s,o;return r==="manual"?s=(o=e.get("entityStates")[t.name])!=null?o[a.lineStyle]:void 0:s=r,a["_"+n](s)})).value(function(e,t,n){return t})}},e.prototype._marker=function(e){return e==="area"?"area":"line"},e.prototype._dashes=function(e){return e==="dashed"?"4 3":e==="dotted"?"2 2":"none"},e.prototype._index=function(e,t){return t},e}(),LineWeight:I=function(){function e(e){var t,n,r,i;this.token=e.token||"lineWeight",this.canHave=e.canHave||1,this.plural=e.canHave>1,this.lineWeight=this.plural?this.token+"s":this.token,this.defaultLineWeight=e.defaultLineWeight||(this.plural?function(){i=[];for(var e=1,t=this.canHave;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(e);return i}.apply(this).map(function(e){return e===1?"medium":e===2?"thin":"thin"}):"medium"),this.canOverride=(r=e.canOverride)!=null?r:!1,this.overriden=this.token}return e.prototype.initialize=function(e){return e.savedAttributes.push(this.lineWeight)},e.prototype.defaults=function(){var e;return e={},e[this.lineWeight]=this.defaultLineWeight,this.plural&&(e[this.token]="segment"),e},e.prototype.prepare=function(e){var t,n,r,i=this;n=e.get(this.lineWeight),r=e.get(this.token),t=e.chart.dimension("weight").scale(d3.scale.ordinal());if(this.plural){if(e.get(this.token)!=="segment")return;t.domain(n.map(this._index)).range(n.map(this._weight)).value(function(e,t,n){return n})}else t.domain(e.___entities.map(this._index)).range(e.___entities.map(function(t,r){var s,o;return n==="manual"?s=(o=e.get("entityStates")[t.name])!=null?o[i.lineWeight]:void 0:s=n,i._weight(s)})).value(function(e,t,n){return t});return t.transform(function(t,n,r,i){var s;return((s=e.___hovered)!=null?s.name:void 0)===n.name?t*2:t})},e.prototype._weight=function(e){return 3*function(){switch(e){case"thin":return 1/3;case"thick":return 4/3;default:return 2/3}}()},e.prototype._index=function(e,t){return t},e}(),ValueFormat:ut=function(){function e(e){var t,n,r;this.token=(t=e.token)!=null?t:e.dimension,this.dimension=(n=e.dimension)!=null?n:this.token,this.dataset=(r=e.dataset)!=null?r:this.token,this.name=this.token+"ValueFormat",this.format=this.token+"ValueFormat",this.defaultPrecision=e.defaultPrecision}return e.prototype.defaults=function(){var e,t,n;return e={},e[this.format]=(t=this.defaultFormat)!=null?t:{precision:(n=this.defaultPrecision)!=null?n:1,notations:["prefix","suffix","commas"]},e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.format)},e.prototype.derive=function(e){var t,r,i,s,o,u,a,f,l,c,h=this;return r=e.get(this.format),o=r.precision,t=n.call(r.notations,"commas")>=0?",":"",a=n.call(r.notations,"sign")>=0?"+":"",u=n.call(r.notations,"prefix")>=0?function(t){var n;return(n=e.get(t+"Prefix"))!=null?n:""}:function(){return""},f=n.call(r.notations,"suffix")>=0?function(t){var n;return(n=e.get(t+"Suffix"))!=null?n:""}:function(){return""},((l=e.___datasets)!=null?(c=l.byName(e.get(this.dataset+"Dataset")))!=null?c.meta.isBinary:void 0:void 0)?s=function(e){return e===0?"No":"Yes"}:s=d3.format(a+t+"."+Math.max(0,o)+"f"),o<=0&&(i=s,s=function(e){var t;return t=Math.pow(10,o),i(Math.round(e*t)/t)}),function(e,t){return e==null?"N/A":u(h.dataset+(t||""))+s(e)+f(h.dataset+(t||""))}},e}(),TimeFormat:rt=function(){function e(e){this.token=e.token,this.name=e.name||this.token,this.format=this.token+"TimeFormat",this["for"]=e["for"]||"label"}return e.prototype.defaults=function(){var e;return e={},e[this.format]=function(){switch(this["for"]){case"axis":return"auto";case"context":return"on %x";default:return"%x"}}.call(this),e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.format)},e.prototype.derive=function(e){var t,n;return t=e.get(this.format),this.seqType(e)==="relative"?(n=d3.format(",.0f"),function(e){return"T+"+n(e)}):!t||t==="auto"?null:d3.time.format(t)},e.prototype.seqType=function(e){var t,n,r;return(t=e.___datasets)!=null?(n=t[0])!=null?(r=n.meta)!=null?r.seqType:void 0:void 0:void 0},e}(),NameFormat:z=function(){function e(){}return e.prototype.defaults=function(){return null},e.prototype.initialize=function(e){return null},e.prototype.derive=function(e){return function(e){return e}},e}(),LabelDisplay:H=function(){function e(e){this.token=e.token,this.display=this.token+"LabelDisplay",this.name=e.name||this.display,this.canOverride=e.canOverride||!1,this.overriden=this.display,this.defaultVisiblity=e.defaultVisiblity||"on"}return e.prototype.defaults=function(){var e;return e={},e[this.display]=this.defaultVisiblity,e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.display)},e.prototype.isDisplayed=function(e,t){var n,r,i;n=e.get(this.display),n==="manual"&&(n=(r=e.get("entityStates")[t.name])!=null?r[this.display]:void 0);if(n==="on"&&(typeof e.___isDimmed=="function"?!e.___isDimmed(t):!void 0))return!0;if(n==="off")return!1;if(n==="hover")return t.name===((i=e.___hovered)!=null?i.name:void 0)||e.___anyDimmed&&(typeof e.___isDimmed=="function"?!e.___isDimmed(t):!void 0)},e}(),LabelSize:B=function(){function e(e){this.token=e.token,this.size=this.token+"LabelSize",this.layer=e.layer||"labels",this.name=e.name||this.size}return e.prototype.defaults=function(){var e;return e={},e[this.size]="small",e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.size)},e.prototype.prepare=function(e){return e.chart.layer(this.layer).fontSize(function(){switch(e.get(this.size)){case"tiny":return.66;case"small":return.8;case"medium":return 1;case"large":return 1.5}}.call(this))},e}(),EntityLabel:A=function(){function e(e){var t;this.token=e.token,this.name=this.token+"Label",this.parts=this.token+"Label",this.dataset=e.dataset||e.token,this.dimension=e.dimension||e.token,this.canHave=(t=e.canHave)!=null?t:["name","segment","value"],this.layer=e.layer||"labels",e.skipDisplay||(this.labelDisplay=new H({token:this.token,canOverride:!0,defaultVisiblity:e.defaultVisiblity})),e.skipSize||(this.labelSize=new B({token:this.token,layer:this.layer})),this.valFormatter=new ut({token:this.token,dataset:this.dataset}),this.timeFormatter=new rt({token:this.token,dataset:this.dataset,"for":"context"}),this.nameFormatter=new z,this.extractEntity=e.extractEntity||function(e,t){return t},this.extractValue=e.extractValue||function(e,t,n,r){return t.nearest(e.___focusTime).value},this.defaultParts=e.defaultParts||["name"]}return e.prototype.defaults=function(){var e,t,n;return e={},e[this.parts]=this.defaultParts,a.extend(e,(t=this.labelDisplay)!=null?t.defaults():void 0,(n=this.labelSize)!=null?n.defaults():void 0,this.valFormatter.defaults(),this.timeFormatter.defaults())},e.prototype.initialize=function(e){var t,n;return e.savedAttributes.push(this.parts),(t=this.labelDisplay)!=null&&t.initialize(e),(n=this.labelSize)!=null&&n.initialize(e),this.valFormatter.initialize(e),this.timeFormatter.initialize(e)},e.prototype.derive=function(e){var t,r;return r=e.get(this.parts),t={},n.call(r,"segment")>=0&&(t.segment=function(e,t,n){return n==null&&(n=0),e[n].isSequential?e[n].displayName:e[n][0].name}),n.call(r,"value")>=0&&(t.value=this.valFormatter.derive(e)),n.call(r,"name")>=0&&(t.name=this.nameFormatter.derive(e)),n.call(r,"time")>=0&&(t.time=this.timeFormatter.derive(e)),t},e.prototype.prepare=function(e){var t,n,r,i,s,o,u=this;return s=this.derive(e),t=s.name,n=s.segment,i=s.value,r=s.time,(o=this.labelSize)!=null&&o.prepare(e),e.chart.dimension(this.dimension).value(function(s,o,a){var f,l,c;return f=u.extractEntity(e,s,o,a),f?u.labelDisplay&&!u.labelDisplay.isDisplayed(e,f)?"":(c=u.extractValue(e,s,o,a),l="",t&&(l+=t(f.displayName)),t&&n&&(l+=" "),n&&(l+=n(s,o,a)),i&&(n||t)&&(l+=": "),i!=null&&(l+=i(c,a+1)),r&&l.length>0&&(l+=" "),r!=null&&(l+=r(new Date(e.___focusTime))),l):""})},e}(),BarLabel:d=function(e){function r(e){r.__super__.constructor.call(this,a.extend(e,{defaultParts:["value"],extractValue:function(e,t,n,r){var i;return(i=t[r].nearest(e.___focusTime))!=null?i.value:void 0}})),this.position=this.token+"LabelPosition",this.alignment=this.token+"LabelAlignment"}return t(r,e),r.prototype.defaults=function(){var e;return e={},e[this.position]="inside",e[this.alignment]="middle",a.extend(e,r.__super__.defaults.call(this))},r.prototype.initialize=function(e){return e.savedAttributes.push(this.position),e.savedAttributes.push(this.alignment),r.__super__.initialize.call(this,e)},r.prototype.prepare=function(e){var t,i;return r.__super__.prepare.call(this,e),e.chart.layer(this.layer).position([e.get(this.position),e.get(this.alignment)]),t=e.get("entityStates"),i=a.any(t,function(e){return e.benchmark==="on"}),i&=n.call(e.get(this.parts),"name")<0,e.chart.dimension(this.dimension).transform(function(e,n,r,s){var o;return i&&((o=t[n.name])!=null?o.benchmark:void 0)==="on"?n.displayName+" "+e:e})},r}(A),BubbleMode:g=function(){function e(e){var t;this.token=e.token,this.mode=this.token,this.dimension=e.dimension||this.token,this["for"]=e["for"]||"any",this.defaultMode=e.defaultMode||(this["for"]==="Trendline"?"nearest":"hover"),this.extractEntity=e.extractEntity||(this["for"]==="Trendline"?function(e,t,n,r){return e.___entities[n]}:function(e,t){return t}),this.canOverride=(t=e.canOverride)!=null?t:!1,this.overriden=this.mode}return e.prototype.defaults=function(){var e;return e={},e[this.mode]=this.defaultMode,e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.mode)},e.prototype.prepare=function(e){var t=this;return e.chart.dimension(this.dimension).value(function(n,r,i){var s,o,u,a,f,l,c;s=t.extractEntity(e,n,r,i),o=e.get(t.mode),o==="manual"&&(o=(a=e.get("entityStates"))!=null?(f=a[s.name])!=null?f[t.mode]:void 0:void 0);if(o==="on"&&(typeof e.___isDimmed=="function"?!e.___isDimmed(n):!void 0))return!0;if(o==="off")return null;if(o==="hover")return s.name===((l=e.___hovered)!=null?l.name:void 0)||e.___anyDimmed&&(typeof e.___isDimmed=="function"?!e.___isDimmed(n):!void 0);if(o==="tracking"&&e.___hovered!=null||o==="nearest"&&s.name===((c=e.___hovered)!=null?c.name:void 0)){u=n.nearest(e.___hoveredVal.seq);if((u!=null?u.value:void 0)!=null)return u}else if(o==="focusTime"){u=n.nearest(e.___focusTime||e.get("parent").get("focusTime"));if((u!=null?u.value:void 0)!=null)return u}})},e}(),EntityHover:L=function(){function e(e){var t,n=this;e.throttled&&(this._render=a.throttle(function(e){return e.render()},30,{leading:!1})),this.sort=(t=e.sort)!=null?t:!1}return e.prototype._render=function(e){return e.render()},e.prototype.prepare=function(e){var t=this;return e.chart.dimension("over").value(function(n,r){return e.___hovered=n,e.___hoveredVal=r,t._render(e),e.get("parent").set("highlightedEntityName",n.displayName)}),e.chart.dimension("out").value(function(n){return e.___hovered=null,e.get("parent").set("highlightedEntityName",null),t._render(e)})},e.prototype.render=function(e){var t,n=this;t=e.___hovered;if(t&&this.sort)return e.___entities.sort(function(e,n){var r,i;return r=e.name===t.name,i=n.name===t.name,d3.ascending(r,i)||d3.ascending(e.name,n.name)})},e}(),EntityHighlighting:k=function(){function e(e){var t=this;e.throttled&&(this._render=a.throttle(function(e){return e.render()},30,{leading:!1}))}return e.prototype.initialize=function(e){return e.___isDimmed=function(){return!1}},e.prototype._render=function(e){return e.render()},e.prototype.prepare=function(e){return null},e.prototype.render=function(e){var t,r;t=e.get("parent");if(t!=null?t.hasChanged("highlightedEntityName"):void 0)return e.___highlightedNames=(r=t.get("highlightedEntityName"))!=null?r.split(/\s*\,\s*/):void 0,e.___anyDimmed=t.___anyDimmed&&e.___highlightedNames!=null&&a.any(e.___highlightedNames,function(t){return n.call(e.___entityDisplayNames,t)>=0}),e.___isDimmed=function(t){var r;return e.___anyDimmed&&e.___highlightedNames!=null&&!(r=t.displayName,n.call(e.___highlightedNames,r)>=0)}},e}(),OnChartLabel:X=function(){function e(e){e==null&&(e={}),this.token=e.token||"onChart",this.formatter="___"+this.token+"TimeFormatter",this.timeFormat=new rt({token:this.token,"for":"label"})}return e.prototype.defaults=function(){return a.extend({},this.timeFormat.defaults())},e.prototype.initialize=function(e){return this.timeFormat.initialize(e)},e.prototype.prepare=function(e){return e[this.formatter]=this.timeFormat.derive(e)},e.prototype.render=function(e){var t,n,r;return(n=(r=e.___entities)!=null?r.nearest(e.___focusTime):void 0)?t=new Date(n.seq):t=new Date(e.___focusTime),e.chart.layer("chartLabels").text({d:e[this.formatter](t)})},e}(),EntityClick:C=function(){function e(){}return e.prototype.prepare=function(e){var t=this;return e.chart.dimension("click").value(function(t,n,r){return $(e.el).trigger("clickEntity",[t])})},e}(),FocusTime:D=function(){function e(e){e==null&&(e={}),this.token=e.token||"focusTime",this.name=e.name||this.token,this.focusTime=this.token,this.timeOption=this.token+"Option",this.series=function(){return this.___datasets}}return e.prototype.defaults=function(){var e;return e={},e[this.timeOption]="timeSlider",e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.focusTime),e.savedAttributes.push(this.timeOption)},e.prototype.prepare=function(e){var t,n,r,i,s,o;return t=(r=e.get(this.timeOption))!=null?r:"timeSlider",n=function(){var n;switch(t){case"constant":return e.get(this.focusTime);case"timeSlider":return(n=e.get("parent"))!=null?n.get(this.focusTime):void 0}}.call(this),e.___focusTime=n!=null?n:(i=this.series.call(e))!=null?i.seqMax:void 0,t==="timeSlider"?e.___sortTime=(s=(o=e.get("parent"))!=null?o.get("sortTime"):void 0)!=null?s:e.___focusTime:e.___sortTime=e.___focusTime},e.prototype.render=function(e){return this.prepare(e)},e}(),FocusBar:_=function(){function e(e){e==null&&(e={}),this.token=e.token||"focusBar",this.focusBar=this.token}return e.prototype.defaults=function(){var e;return e={},e[this.focusBar]="off",e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.focusBar)},e.prototype.render=function(e){return e.chart.focus(e.get(this.focusBar)==="on"?e.___focusTime:null)},e}(),Orientation:V=function(){function e(e){this.token=e.token,this.name=this.token}return e.prototype.defaults=function(){var e;return e={},e[this.token]="left",e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.token)},e.prototype.prepare=function(e){var t;return t=e.get(this.token),e.chart.orient(t)},e}(),SidesVisibility:et=function(){function e(e){var t;this.token=e.token,this.name=this.token+"Visibility",this.visibility=this.token+"Visibility",this.orientation=e.orientation||"orientation",this.sides=e.sides||["t","r","b","l"],this.includeInside=n.call(this.sides,"inside")>=0||n.call(this.sides,"d")>=0,this.defaultVisiblity=e.defaultVisiblity||(typeof (t=this.sides).concat=="function"?t.concat():void 0)}return e.prototype.defaults=function(){var e;return e={},e[this.visibility]=this.defaultVisiblity,e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.visibility)},e.prototype.derive=function(e){var t,r,i,s,o,u;t={},i=this._sides(e),s=e.get(this.visibility)||i.concat();for(o=0,u=i.length;o<u;o++)r=i[o],t[r]=n.call(s,r)>=0;return t},e.prototype.prepare=function(e){return null},e.prototype._sides=function(e){var t;return t=this.sides,a.isArray(t)||(t=t[e.get(this.orientation)]||t.otherwise),t},e}(),AxesVisibility:l=function(e){function r(e){e==null&&(e={}),r.__super__.constructor.call(this,a.extend({token:"axes",sides:["t","r","b","l","d"],defaultVisiblity:["t","b","l","d"]},e)),this.horzLabelRotation=this.token+"HorzLabelRotation"}return t(r,e),r.prototype.initialize=function(e){return e.savedAttributes.push(this.horzLabelRotation),r.__super__.initialize.call(this,e)},r.prototype.defaults=function(){var e;return e={},e[this.horzLabelRotation]=0,a.extend(r.__super__.defaults.call(this),e)},r.prototype.prepare=function(e){var t;return r.__super__.prepare.call(this,e),t=this.derive(e),delete t.d,e.chart.layer("axes").enabled(t).graticule({b:this.includeInside&&n.call(e.get(this.visibility),"d")>=0,l:this.includeInside&&n.call(e.get(this.visibility),"d")>=0}).horzLabelRotation(e.get(this.horzLabelRotation))},r}(et),ChartLabels:b=function(e){function n(e){e==null&&(e={}),n.__super__.constructor.call(this,a.extend({token:"chartLabels",sides:["t","r","b","l","d"],defaultVisiblity:["t","b"]},e)),this.alignments=this.token+"Alignment"}return t(n,e),n.prototype.defaultLabels=o(),n.prototype.defaults=function(){var e;return e={},e[this.alignments]=this.defaultLabels.alignments(),a.extend(n.__super__.defaults.call(this),e)},n.prototype.initialize=function(e){return n.__super__.initialize.call(this,e),e.savedAttributes.push(this.alignments)},n.prototype.prepare=function(e){return n.__super__.prepare.call(this,e),e.chart.layer("chartLabels").enabled(this.derive(e)).alignments(e.get(this.alignments))},n}(et),BarSpacing:v=function(){function e(e){this.token=e.token,this.name=e.name||this.token,this.bar=this.token,this.subBar="sub"+this.token}return e.prototype.defaults=function(){var e;return e={},e[this.bar]=.1,e[this.subBar]=.07,e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.bar),e.savedAttributes.push(this.subBar)},e.prototype.prepare=function(e){return e.chart.spacing(e.get(this.bar)),e.chart.subSpacing(e.get(this.subBar))},e}(),EntitySorting:O=function(){function e(e){this.token=e.token||"sortBy"}return e.prototype.defaults=function(){var e;return e={},e[this.token]="natural|ascending",e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.token)},e.prototype.prepare=function(e){var t,n,r;return r=(e.get(this.token)||"").split("|"),n=r[0]||"natural",t=d3[r[1]],n==="natural"?e.___sortBy=function(e,n){return t(e.index,n.index)}:n==="name"?e.___sortBy=function(e,n){return t(e.displayName,n.displayName)}:e.___sortBy=function(n,r){var i,s,o,u;return t((i=n[0])!=null?i.nearest((s=e.___sortTime)!=null?s:e.___focusTime).value:void 0,(o=r[0])!=null?o.nearest((u=e.___sortTime)!=null?u:e.___focusTime).value:void 0)||t(n.index,r.index)}},e.prototype.render=function(e){return e.___entities.sort(e.___sortBy)},e}(),EntityStates:M=function(){function e(e){this.resolve=r(this.resolve,this);var t;this.token=e.token||"entityStates",this.name=e.name||this.token,this.props=function(){var n,r,i,s;i=e.props,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(new t.type(t));return s}(),this.resolvers=e.resolvers||{}}return e.prototype.defaults=function(){var e;return e={},e[this.token]={},e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.token)},e.prototype.prepare=function(e){var t,n,r,i,s;i=this.props,s=[];for(n=0,r=i.length;n<r;n++){t=i[n];if(!(!e.get(t.overriden)||e.get(t.overriden)==="manual"&&t.canHave!=null))continue;if(t.plural==null)throw new Error('It is unexpected for a "canHave" prop not to have "plural".');s.push(t.prepare(e))}return s},e.prototype.render=function(e){var t,n,r,i,s;i=this.props,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.render&&s.push(t.render(e));return s},e.prototype.resolve=function(e,t){var n,r,i,s,o,u,a,f,l;i={},n=e.get("entityStates"),a=this.props;for(o=0,u=a.length;o<u;o++)r=a[o],((f=n[t.name])!=null?f.hidden:void 0)?s=null:!e.get(r.overriden)||e.get(r.overriden)==="manual"?s=(l=n[t.name])!=null?l[r.overriden]:void 0:this.resolvers[r.overriden]!=null?s=this.resolvers[r.overriden](e,t):s=e.get(r.overriden),s==null&&r.fallback!=null&&(s=typeof r.fallback=="function"?r.fallback(t):void 0),s!=null&&(i[r.overriden]=s);return i},e}(),ColorMode:S=function(e){function n(e){var t,r,i;n.__super__.constructor.call(this,a.extend({nice:!1},e)),this.mode=this.token,this.canBe=e.canBe||["palette","same"],this.defaultMode=e.defaultMode||"palette",this.legend=new j({dataset:this.token,colorMode:this.mode}),this.impls={},i=e.modes;for(t in i)r=i[t],this.impls[t]=new r.type(a.extend({token:this.token},r,{type:null,dimension:this.dimension,precision:function(e){return e.get("legendTickValueFormat").precision}}));this.canOverride=e.canOverride||!1,this.overriden=this.token}return t(n,e),n.prototype.createGraphic=function(e){var t;return typeof (t=this.legend).createGraphic=="function"?t.createGraphic(e):void 0},n.prototype.defaults=function(){var e,t,n,r;e={},e[this.mode]=this.defaultMode,a.extend(e,this.legend.defaults()),r=this.impls;for(n in r)t=r[n],t.defaults&&a.extend(e,t.defaults());return e},n.prototype.initialize=function(e){var t,n,r,i;e.savedAttributes.push(this.mode),this.legend.initialize(e),r=this.impls,i=[];for(n in r)t=r[n],t.initialize&&i.push(t.initialize(e));return i},n.prototype.prepare=function(e){return n.__super__.prepare.call(this,e),this.legend.prepare(e)},n.prototype.derive=function(e){var t,n=this;return t=e.get(this.mode),t==="manual"?{scale:null,value:function(t){var r;return((r=e.get("entityStates")[t.name])!=null?r[n.overriden]:void 0)||"#ddd"}}:this.impls[t]==null?this.impls[this.defaultMode].derive(e):this.impls[t].derive(e)},n}(N),ColorDataset:E=function(e){function n(e){n.__super__.constructor.call(this,e),this.nice=!1,this.index=this.token+"Index",this.interpolation=this.index+"Interpolation",this.precision=e.precision,this.scale=this.interpolation,this.palette=(new i).rgb(),this.datasetConfig=new T({token:this.token}),this.fallback=e.fallback||function(){return"#ddd"}}return t(n,e),n.prototype.defaults=function(){var e;return e={},e[this.interpolation]="linear",e},n.prototype.initialize=function(e){return e.savedAttributes.push(this.index),e.savedAttributes.push(this.interpolation),e.savedAttributes.push(this.prefix),e.savedAttributes.push(this.suffix),e.savedAttributes.push(this.label),this.datasetConfig.initialize(e)},n.prototype.prepare=function(e){return this.datasetConfig.prepare(e)},n.prototype.derive=function(e){var t,r,i,s,o,u,f,l,c=this;t=n.__super__.derive.call(this,e);if(!t)return;return i=e.get(this.index),r=t.domain,o=r[1]-r[0],i||(r[0]+=.25*o,r[1]-=.25*o,t&&(t.range=[this.palette[this.palette.length-2],this.palette[1]]),i=r.map(function(e,n){return{value:e,color:t.range[n]}})),i.forEach(function(t){var n;t.value=Math.max(r[0],Math.min(r[1],t.value));if(c.precision)return n=Math.pow(10,c.precision(e)),t.value=Math.round(t.value*n)/n}),t.domain=a.pluck(i,"value"),t.range=a.pluck(i,"color"),t.fallback=this.fallback,((f=e.___datasets)!=null?(l=f.byName(e.get(this.datasetConfig.dataset)))!=null?l.meta.isBinary:void 0:void 0)?(t.scale=d3.scale.ordinal(),t.domain=[0,1]):e.get(this.interpolation)==="linear"?typeof (u=t.scale).clamp=="function"&&u.clamp(!0):e.get(this.interpolation)==="threshold"&&(s=t.domain.length-1,t.domain[s]=r[1]+.001),t.index=i,t},n}(N),ColorPalette:x=function(e){function n(e){n.__super__.constructor.call(this,e),this.palette=(new i).rgb()}return t(n,e),n.prototype.derive=function(e){var t,n=this;return t=e.___unsortedEntities||[],{scale:d3.scale.ordinal(),domain:t.map(function(e,t){return e.name}),range:t.map(function(e,t){return n.palette[t%n.palette.length]}),nice:!1,value:function(e){return e.name}}},n}(N),Color:w=function(e){function n(e){n.__super__.constructor.call(this,e),this.color=this.token,this.palette=(new i).rgb(),this.defaultColor=e.defaultColor||this.palette[0],this.overriden=this.color}return t(n,e),n.prototype.defaults=function(e){var t;return t={},t[this.color]=this.defaultColor,t},n.prototype.initialize=function(e){return e.savedAttributes.push(this.color)},n.prototype.derive=function(e){var t;return t=e.get(this.color),{scale:null,value:function(){return t}}},n}(N),Legend:j=function(){function e(e){e==null&&(e={}),this.token=e.token||"legend",this.visibility=this.token+"Visibility",this.alignment=this.token+"Alignment",this.size=this.token+"SizeFactor",this.label="colorLabel",this.colorMode=e.colorMode,this.formatter=new ut({token:this.token+"Tick",dataset:e.dataset,defaultPrecision:0})}return e.prototype.defaultLegend=u(),e.prototype.defaults=function(e){var t;return t={},t[this.visibility]="on",t[this.size]="1",t[this.alignment]=this.defaultLegend.alignment(),a.extend(t,this.formatter.defaults())},e.prototype.initialize=function(e){return e.savedAttributes.push(this.visibility),e.savedAttributes.push(this.alignment),e.savedAttributes.push(this.size),this.formatter.initialize(e)},e.prototype.prepare=function(e){var t;t=e.chart.layer("legend");if(t)return t.enabled("on"===e.get(this.visibility)&&"dataset"===e.get(this.colorMode)).format(this.formatter.derive(e)).alignment(e.get(this.alignment)).sizeFactor(e.get(this.size)).title(e.get(this.label))},e}(),ScatterMarker:K=function(e){function n(e){n.__super__.constructor.call(this,e),this.marker=e.marker||this.token,this.name=e.name||this.marker,this.canHave=1,this.plural=!1,this.canOverride=e.canOverride||!1,this.overriden=this.marker,this.fallback=function(){return"circle"}}return t(n,e),n.prototype.defaults=function(){var e;return e={},e[this.marker]="circle",e},n.prototype.initialize=function(e){return e.savedAttributes.push(this.marker)},n.prototype.derive=function(e){var t,n,r=this;return n=e.get("entityStates"),t=e.chart,{scale:null,value:function(e){var i,s,o,u,a,f,l;return f=n!=null?(l=n[e.name])!=null?l[r.marker]:void 0:void 0,a=f==="vertical"||f==="crosshair",u=f==="horizontal"||f==="crosshair",s=t.dimension("x")(e)!=null,o=t.dimension("y")(e)!=null,i=t.dimension("r")(e)!=null,a&&u&&s&&o?["vertical","horizontal"]:a?o&&"vertical":u?o&&"horizontal":s&&o&&i?"circle":s&&o?["vertical","horizontal"]:s?["vertical"]:o?["horizontal"]:null}}},n}(N),BarBenchmark:h=function(){function e(e){this.token=e.token,this.benchmark=this.token,this.overriden=this.benchmark,this.layer="benchmarks",this.size="barsLabelSize",this.plural=!1}return e.prototype.defaults=function(){var e;return e={},e[this.benchmark]="off",e},e.prototype.initialize=function(e){return e.savedAttributes.push(this.benchmark)},e.prototype.prepare=function(e){var t,n,r,i,s,o,u,a;i=e.get("entityStates"),n=[],t=[],u=e.___entities;for(s=0,o=u.length;s<o;s++)r=u[s],((a=i[r.name])!=null?a[this.benchmark]:void 0)==="on"?n.push(r):t.push(r);return e.___entities.benchmarks=n,e.___entities.bars=e.___entities.labels=t,e.chart.layer(this.layer).marks().fontSize(function(){switch(e.get(this.size)){case"tiny":return.66;case"small":return.8;case"medium":return 1;case"large":return 1.5}}.call(this))},e.prototype.render=function(e){return e.___entities.benchmarks.sort(e.___sortBy),e.___entities.bars.sort(e.___sortBy)},e}(),BaseMap:m=function(e){function n(e){n.__super__.constructor.call(this,a.extend({token:"geo"},e)),this.projection="projection",this.focus="regionalFocus",this.zoom="regionalZoom",this.currentlyLoading={},this.nameList=s.focusesForTypeahead}return t(n,e),n.prototype.defaults=function(){var e;return e={},e[this.dataset]="world",e[this.projection]="times",e[this.zoom]=1,e},n.prototype.initialize=function(e){return n.__super__.initialize.call(this,e),e.savedAttributes.push(this.projection),e.savedAttributes.push(this.focus),e.savedAttributes.push(this.zoom)},n.prototype.prepare=function(e){var t,r,i=this;return n.__super__.prepare.call(this,e),t=e.___datasets.byName(e.get(this.dataset)),r=t&&e.has(this.focus)?s.getFocusForName(e.get(this.focus),t):void 0,e.chart.focus(r||s.defaultFocus).regionalZoom(e.get(this.zoom)).usMode(e.get(this.dataset)==="usa").projectionType(e.get(this.projection)),e.chart.dimension("geo").value(function(t){var n;return(n=t.byName(e.get(i.dataset)))!=null?n[0]:void 0})},n}(T),NoOp:W=function(){function e(){}return e.prototype.derive=function(){return null},e}(),Group:P=function(e){function n(e){this.subs=e}return t(n,e),n}(R),ScatterOptions:Q=function(e){function n(e){this.name=e.name,this.subs=[new P([new T({token:"x",iRequired:2}),new ot({dimension:"x",canSpan:["allTime","custom"],canBeTime:!0}),new st({dimension:"x",sides:["t","b"],canBeAssigned:!1})]),new P([new T({token:"y"}),new ot({dimension:"y",canSpan:["allTime","custom"]}),new st({dimension:"y",sides:["l","r"],canBeAssigned:!1})]),new P([new T({token:"r"}),new tt({dimension:"r"})]),new P([new l({defaultVisiblity:["b","l","d"]}),new b({defaultVisiblity:["b","l"]}),new D,new X,new L({throttled:!0,sort:!0}),new C,new k({throttled:!0})]),new S({token:"color",canBe:["palette","same","dataset"],canOverride:!0,modes:{palette:{type:x},same:{type:w,token:"sameColor"},dataset:{type:E}}}),new P([new A({token:"label",canHave:["name"]})]),new P([new M({token:"entityStates",props:[{type:w,token:"color"},{type:H,token:"label"},{type:K,token:"marker"}],resolvers:{color:function(e,t){return e.chart.dimension("color")(t)}}})])]}return t(n,e),n.prototype.prepare=function(e){var t=this;return n.__super__.prepare.call(this,e),e.chart.dimension("opacity").value(function(t,n){return(typeof e.___isDimmed=="function"?e.___isDimmed(t):void 0)?.25:1})},n}(R),BarChartOptions:p=function(e){function n(e){this.name=e.name,this.subs=[new Z({canHave:4,props:[{type:U,token:"d"},{type:J,token:"d",canSpan:["allTime","custom","asAbove"],extractExtent:function(e){var t,n;t=(n=e.___datasets)!=null?n.byName(e.get(this.dataset)):void 0;if(t)return[Math.min(0,t!=null?t.min:void 0),t!=null?t.max:void 0]}},{type:f,token:"d",sides:{left:["t","b"],right:["t","b"],otherwise:["l","r"]}},{type:G,dimension:"color"},{type:Y,dimension:"opacity"}]}),new P([new V({token:"orientation"}),new l({defaultVisiblity:["b","l","d"]}),new b({sides:{left:["t","b","d"],right:["t","b","d"],otherwise:["l","r","d"]},defaultVisiblity:["b"]}),new v({token:"spacing"}),new D,new O({token:"sortBy"}),new L({throttled:!0}),new C,new k({throttled:!0}),new X]),new y({token:"p",sides:{left:["l","r"],right:["l","r"],otherwise:["t","b"]}}),new d({token:"bars",dimension:"label",dataset:"d"}),new P([new S({token:"color",canBe:["palette","segment"],canOverride:!0,defaultMode:"segment",modes:{palette:{type:x},segment:{type:W}}})]),new M({token:"entityStates",props:[{type:w,token:"color"},{type:H,token:"bars"},{type:h,token:"benchmark"}],resolvers:{color:function(e,t){return e.chart.dimension("color")(t,null,0)}}})]}return t(n,e),n.prototype.prepare=function(e){var t;return n.__super__.prepare.call(this,e),t=e.chart.dimension("d").subs().map(function(e){return e.scale().domain()[0]}),e.chart.dimension("d0").value(function(e,n,r){return Math.max(0,t[r])})},n}(R),TrendlineOptions:it=function(e){function n(e){this.name=e.name,this.subs=[new Z({canHave:3,props:[{type:U,token:"y"},{type:J,token:"y",extractValue:function(e){return e!=null?e.value:void 0},canSpan:["allTime","custom","asAbove"]},{type:f,token:"y",sides:["l","r"]},{type:G,dimension:"color"},{type:Y,dimension:"opacity"},{type:F},{type:I}]}),new P([new l({defaultVisiblity:["b","l","d"]}),new b({defaultVisiblity:["b","l"]}),new X,new L({throttled:!0,sort:!1}),new C,new k({throttled:!0})]),new P([new D,new _,new nt({token:"x",nice:!1,canSpan:["allTime","custom"],extractExtent:function(e){var t;t=e.___datasets;if(t)return[t.seqMin,t.seqMax]}}),new st({dimension:"x",sides:["b","t"],canBeAssigned:!1})]),new P([new A({token:"label",canHave:["name","segment"],extractValue:function(e,t,n,r){return t.nearest(e.___focusTime).value}})]),new P([new g({"for":"Trendline",token:"bubble",dimension:"bubblePt",canOverride:!0}),new A({token:"bubble",canHave:["name","segment","value","time"],layer:"bubble",dataset:"y",skipDisplay:!0,skipSize:!0,extractValue:function(e,t,n,r){var i,s;return i=e.get("bubble"),i==="nearest"||i==="tracking"?t.nearest((s=e.___hoveredVal)!=null?s.seq:void 0).value:t.nearest(e.___focusTime).value}})]),new P([new S({token:"color",canBe:["palette","segment"],canOverride:!0,modes:{palette:{type:x},segment:{type:W}}})]),new P([new M({token:"entityStates",props:[{type:w,token:"color"},{type:F},{type:I},{type:g,"for":"Trendline",token:"bubble",dimension:"bubblePt"},{type:H,token:"label"}],resolvers:{color:function(e,t){return e.chart.dimension("color")(t,null,0)},lineStyle:function(e,t){if(e.get("lineStyle")==="segment")return e.get("lineStyles")[0]}}})])]}return t(n,e),n}(R),MapOptions:q=function(e){function n(e){this.name=e.name,this.subs=[new P([new m,new L({throttled:!0}),new C,new k({throttled:!0})]),new P([new S({token:"color",defaultMode:"dataset",canBe:["palette","same","dataset"],canOverride:!0,modes:{palette:{type:x},same:{type:w,token:"sameColor"},dataset:{type:E}}})]),new P([new D,new X,new b({defaultVisiblity:["d"],sides:["d"]})]),new P([new A({token:"label",canHave:["name"],defaultParts:["name"],defaultVisiblity:"hover"})]),new P([new g({token:"bubble",canOverride:!0}),new A({token:"bubble",canHave:["name","value"],defaultParts:["name","value"],layer:"bubble",dimension:"bubbleText",dataset:"color",skipDisplay:!0,skipSize:!0,extractValue:function(e,t,n,r){var i;return(i=t[1].nearest(e.___focusTime))!=null?i.value:void 0}})]),new P([new M({token:"entityStates",props:[{type:w,token:"color"},{type:g,token:"bubble"},{type:H,token:"label"}],resolvers:{color:function(e,t){return e.chart.dimension("color")(t)}}})])]}return t(n,e),n.prototype.prepare=function(e){var t=this;return n.__super__.prepare.call(this,e),e.chart.dimension("opacity").value(function(t,n){return(typeof e.___isDimmed=="function"?e.___isDimmed(t):void 0)?.25:1})},n}(R)}})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/bar_chart",["builders2/content","builders2/props_impl","bloomer/lib","underscore","d3"],function(e,n,r,i,s){var o,u;return o=function(e){function s(){return u=s.__super__.constructor.apply(this,arguments),u}return t(s,e),s.type="BarChart",s.label="bar chart",s.icon="/img/visualization_icons/type_bar.png",s.prototype.savedAttributes=["padding"],s.prototype.properties=[new n.BarChartOptions({name:"options"})],s.prototype.createGraphic=function(){var e,t,n,i,o,u=this;s.__super__.createGraphic.call(this),this.chart=r.chart.barChart(),this.graphic.add(this.chart),this.chart.dimension("key").value(function(e){return e.name}),this.chart.dimension("d").segments(function(e){return e!=null?e:[]}),this.chart.dimension("d").value(function(e,t,n){var r;return(r=e[n].nearest(u.___focusTime))!=null?r.value:void 0}),this.chart.dimension("p").value(function(e){return e.displayName}),i=this.properties,o=[];for(t=0,n=i.length;t<n;t++)e=i[t],e.createGraphic!=null&&o.push(e.createGraphic(this));return o},s.prototype.prepare=function(){return s.__super__.prepare.call(this),this.chart.data(this.___entities)},s.prototype.render=function(e){var t,n,r,o;o=this.properties;for(n=0,r=o.length;n<r;n++)t=o[n],t.render!=null&&t.render(this);return this.chart.dimension("p").domain(i.map(this.___entities.bars,function(e){return e.displayName})),s.__super__.render.call(this,e)},s.prototype.defaults=function(){return i.extend(s.__super__.defaults.call(this),{padding:{t:30,r:60,b:30,l:120}})},s}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/blank_cell",["builders2/content"],function(e){var n,r;return n=function(e){function n(){return r=n.__super__.constructor.apply(this,arguments),r}return t(n,e),n.type="BlankCell",n}(e)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("builders2/content_container",["builders2/content","backbone","underscore"],function(t,r,i){var s,o;return s=function(s){function a(){return this._prepareChild=e(this._prepareChild,this),o=a.__super__.constructor.apply(this,arguments),o}var u=this;return n(a,s),a.type="Container",a.ChildrenCollection=r.Collection.extend({_prepareModel:function(e){return e}}),a.prototype.initialize=function(){var e,n,r,i,s;n=this.get("children");for(r=i=0,s=n.length;i<s;r=++i)e=n[r],e.type!=null&&(n[r]=t.getNew(e));return n=new a.ChildrenCollection(n),n.each(this._prepareChild),this.set("children",n,{slient:!0}),a.__super__.initialize.call(this)},a.prototype.addChild=function(e){return this.get("children").add(e),this},a.prototype.removeChild=function(e){return this.get("children").remove(e)},a.prototype.childAt=function(e){return this.get("children").at(e)},a.prototype.replaceChild=function(e,t){var n,r;return n=this.get("children"),r=n.models.concat(),r.splice(i.indexOf(r,e),1,t),this.get("children").set(r)},a.prototype.delegateEvents=function(){var e=this;return this.get("children").on("add",this._prepareChild).on("reset",function(t){return t.each(e._prepareChild)}),a.__super__.delegateEvents.call(this)},a.prototype.defaults=function(){return i.extend(a.__super__.defaults.call(this),{children:[]})},a.prototype._prepareChild=function(e){return e.set("parent",this,{silent:!1})},a}.call(this,t)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/grid",["builders2/content_container","builders2/content","bloomer/lib","d3","underscore"],function(e,n,r,i,s){var o,u;return o=function(e){function o(){return u=o.__super__.constructor.apply(this,arguments),u}return t(o,e),o.type="Grid",o.prototype.savedAttributes=[],o.prototype.addChild=function(e,t){return t==null&&(t=!0),t&&this.layout.insertRow(this.get("grid"),null,e),o.__super__.addChild.call(this,e)},o.prototype.createGraphic=function(){return o.__super__.createGraphic.call(this),this.layout=r.layout.masonry(),this.graphic.add(this.layout.paint)},o.prototype.delegateEvents=function(){var e=this;return this.on("change:grid",function(){return e.get("children").reset(e.parse(e.attributes).children),e.render()}),this.get("children").on("change:requiredHeight",function(){if(!e._isRendering)return e.render()}),this.get("children").comparator=function(e,t){var n,r;return i.ascending((n=e.row)!=null?n.index:void 0,(r=t.row)!=null?r.index:void 0)||i.ascending(e.index,t.index)},o.__super__.delegateEvents.call(this)},o.prototype.replaceChild=function(e,t){return this.layout.replaceCol(e,t),o.__super__.replaceChild.call(this,e,t),this.render()},o.prototype.removeChild=function(e){return this.layout.removeCol(e),o.__super__.removeChild.call(this,e),this.render()},o.prototype.childAt=function(e,t){var n,r,i,s,u,a,f,l;if(t==null)return o.__super__.childAt.call(this,e);f=this.get("grid").children;for(i=0,u=f.length;i<u;i++){r=f[i];if(r.index===e){l=r.children;for(s=0,a=l.length;s<a;s++){n=l[s];if(n.index===t)return n}}}},o.prototype.render=function(e){var t,n,r,s,o,u;return t=(e!=null?e.allow2ndPass:void 0)!==!1,this._isRendering=!0,o=this.get("padding"),r=this.get("grid"),this.layout.width(this.dx-o.l-o.r),this.layout(r),this.sel.style({width:""+(this.dx-o.l-o.r)+"px",margin:""+o.t+"px "+o.r+"px "+o.b+"px "+o.l+"px"}).call(this.graphic),s=!1,u=this,n=this.get("children"),this.sel.selectAll(".cell").filter(function(e){return n.include(e)}).each(function(e){var t;e.el!==this&&e.setElement(this),e.render(),t=e.get("requiredHeight");if(e.row.dy<t||e.minHeight!=null&&e.minHeight!==t)s=!0,e.minHeight=t;return i.select(this).call(function(t){var n;return n=t.selectChildren(".cell-exit-icon").data(e.get("removable")===!1?[]:[null]),n.enter().append("a").attr({"class":"cell-exit-icon",href:"#"}).on("click",function(){return i.event.preventDefault(),u.removeChild(e)})})}),this._isRendering=!1,s&&(t?(e||(e={}),e.allow2ndPass=!1,this.render(e)):console.log("Grid unexpectedly needs a 2nd rendering pass. Rejected to avoid infinite loop.")),this.set("requiredHeight",r.height)},o.prototype.toJSON=function(){var e;return e=function(e,t){return i.ascending(e.index,t.index)},s.extend(o.__super__.toJSON.call(this),{grid:s.map(this.get("grid").children.sort(e),function(t){var n;return n={height:t.height,resizable:t.resizable,children:s.map(t.children.sort(e),function(e){return s.extend(e.toJSON(),{weight:e.weight})})},t.customClass!=null&&(n.customClass=t.customClass),n})})},o.prototype.parse=function(e,t){var r,i,u,a,f,l,c,h,p,d,v,m;e.layout!=null&&(e.grid=e.layout),e.cells!=null&&(e.children=e.cells),e=s.clone(e),r=[];if(e.grid){s.isArray(e.grid)?a={children:e.grid.concat()}:a=s.clone(e.grid),h=a.children;for(f=p=0,v=h.length;p<v;f=++p){c=h[f],c=h[f]=s.clone(c),u=c.children=s.clone(c.children);for(l=d=0,m=u.length;d<m;l=++d)i=u[l],s.isNumber(i)?i=e.children[i]:s.isNumber(i.content)&&(i=s.extend(i,e.children[i.content])),i.type!=null&&(i=n.getNew(i)),u[l]=i,r.push(i)}e.grid=a}return e.children=r,o.__super__.parse.call(this,e,t)},o.prototype.defaults=function(){return s.extend(o.__super__.defaults.call(this),{padding:{t:0,r:0,b:0,l:0},grid:{children:[]}})},o}(e)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("builders2/chapter_selector",["builders2/grid","builders2/content","underscore"],function(t,r,i){var s,o;return s=function(t){function s(){return this.removeChild=e(this.removeChild,this),o=s.__super__.constructor.apply(this,arguments),o}return n(s,t),s.type="Chapters",s.prototype.delegateEvents=function(){var e=this;return s.__super__.delegateEvents.call(this),this.on("change:selectedChapter",function(){return e.get("parent").set("selectedContent",e.get("selectedChapter").get("content")),e.render()})},s.prototype.render=function(e){var t;if(!this.get("grid"))return;return this.get("selectedChapter")==null&&this.set("selectedChapter",this.get("children").at(0),{silent:!1}),t=this.dx<80,this.dx=Math.max(this.dx,36),i.each(this.get("grid").children,function(e){return e.children[0].textArea.enabled(!t),e.height=t?42:null}),s.__super__.render.call(this,e)},s.prototype.removeChild=function(e){s.__super__.removeChild.call(this,e);if(e===this.get("selectedChapter"))return this.set("selectedChapter",this.get("children").at(0),{silent:!1})},s.prototype.setElement=function(e){return s.__super__.setElement.call(this,e),this.sel.classed({"s_chapter-selector":!0}),this},s.prototype.parse=function(e){return e.chapters!=null&&(e.grid=i.map(e.chapters,function(e){return{children:[e]}})),s.__super__.parse.call(this,e)},s.prototype.toJSON=function(){return i.extend(r.prototype.toJSON.call(this),{chapters:this.get("children").sort().toJSON()})},s}(t)})}.call(this);var Showdown={extensions:{}},forEach=Showdown.forEach=function(e,t){if(typeof e.forEach=="function")e.forEach(t);else{var n,r=e.length;for(n=0;n<r;n++)t(e[n],n,e)}},stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(e){var t,n,r,i=0,s=[],o=[];if(typeof module!="undefind"&&typeof exports!="undefined"&&typeof require!="undefind"){var u=require("fs");if(u){var a=u.readdirSync((__dirname||".")+"/extensions").filter(function(e){return~e.indexOf(".js")}).map(function(e){return e.replace(/\.js$/,"")});Showdown.forEach(a,function(e){var t=stdExtName(e);Showdown.extensions[t]=require("./extensions/"+e)})}}this.makeHtml=function(e){return t={},n={},r=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=F(e),e=e.replace(/^[ \t]+$/mg,""),Showdown.forEach(s,function(t){e=l(t,e)}),e=N(e),e=h(e),e=c(e),e=d(e),e=B(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),Showdown.forEach(o,function(t){e=l(t,e)}),e};if(e&&e.extensions){var f=this;Showdown.forEach(e.extensions,function(e){typeof e=="string"&&(e=Showdown.extensions[stdExtName(e)]);if(typeof e!="function")throw"Extension '"+e+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(e(f),function(e){e.type?e.type==="language"||e.type==="lang"?s.push(e):(e.type==="output"||e.type==="html")&&o.push(e):o.push(e)})})}var l=function(e,t){if(e.regex){var n=new RegExp(e.regex,"g");return t.replace(n,e.replace)}if(e.filter)return e.filter(t)},c=function(e){return e+="~0",e=e.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(e,r,i,s,o){return r=r.toLowerCase(),t[r]=_(i),s?s+o:(o&&(n[r]=o.replace(/"/g,"&quot;")),"")}),e=e.replace(/~0/,""),e},h=function(e){e=e.replace(/\n/g,"\n\n");var t="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del|style|section|header|footer|nav|article|aside",n="p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside";return e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,p),e=e.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,p),e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,p),e=e.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,p),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,p),e=e.replace(/\n\n/g,"\n"),e},p=function(e,t){var n=t;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(r.push(n)-1)+"K\n\n",n},d=function(e){e=E(e);var t=C("<hr />");return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,t),e=e.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,t),e=x(e),e=T(e),e=O(e),e=h(e),e=M(e),e},v=function(e){return e=k(e),e=m(e),e=D(e),e=b(e),e=g(e),e=P(e),e=_(e),e=A(e),e=e.replace(/  +\n/g," <br />\n"),e},m=function(e){var t=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(t,function(e){var t=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return t=I(t,"\\`*_"),t}),e},g=function(e){return e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y),e=e.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,y),e=e.replace(/(\[([^\[\]]+)\])()()()()()/g,y),e},y=function(e,r,i,s,o,u,a,f){f==undefined&&(f="");var l=r,c=i,h=s.toLowerCase(),p=o,d=f;if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(t[h]!=undefined)p=t[h],n[h]!=undefined&&(d=n[h]);else{if(!(l.search(/\(\s*\)$/m)>-1))return l;p=""}}p=I(p,"*_");var v='<a href="'+p+'"';return d!=""&&(d=d.replace(/"/g,"&quot;"),d=I(d,"*_"),v+=' title="'+d+'"'),v+=">"+c+"</a>",v},b=function(e){return e=e.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w),e=e.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w),e},w=function(e,r,i,s,o,u,a,f){var l=r,c=i,h=s.toLowerCase(),p=o,d=f;d||(d="");if(p==""){h==""&&(h=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+h;if(t[h]==undefined)return l;p=t[h],n[h]!=undefined&&(d=n[h])}c=c.replace(/"/g,"&quot;"),p=I(p,"*_");var v='<img src="'+p+'" alt="'+c+'"';return d=d.replace(/"/g,"&quot;"),d=I(d,"*_"),v+=' title="'+d+'"',v+=" />",v},E=function(e){function t(e){return e.replace(/[^\w]/g,"").toLowerCase()}return e=e.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(e,n){return C('<h1 id="'+t(n)+'">'+v(n)+"</h1>")}),e=e.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(e,n){return C('<h2 id="'+t(n)+'">'+v(n)+"</h2>")}),e=e.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(e,n,r){var i=n.length;return C("<h"+i+' id="'+t(r)+'">'+v(r)+"</h"+i+">")}),e},S,x=function(e){e+="~0";var t=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return i?e=e.replace(t,function(e,t,n){var r=t,i=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var s=S(r);return s=s.replace(/\s+$/,""),s="<"+i+">"+s+"</"+i+">\n",s}):(t=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,e=e.replace(t,function(e,t,n,r){var i=t,s=n,o=r.search(/[*+-]/g)>-1?"ul":"ol",s=s.replace(/\n{2,}/g,"\n\n\n"),u=S(s);return u=i+"<"+o+">\n"+u+"</"+o+">\n",u})),e=e.replace(/~0/,""),e};S=function(e){return i++,e=e.replace(/\n{2,}$/,"\n"),e+="~0",e=e.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(e,t,n,r,i){var s=i,o=t,u=n;return o||s.search(/\n{2,}/)>-1?s=d(j(s)):(s=x(j(s)),s=s.replace(/\n$/,""),s=v(s)),"<li>"+s+"</li>\n"}),e=e.replace(/~0/g,""),i--,e};var T=function(e){return e+="~0",e=e.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(e,t,n){var r=t,i=n;return r=L(j(r)),r=F(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",C(r)+i}),e=e.replace(/~0/,""),e},N=function(e){return e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,t,n){var r=t,i=n;return i=L(i),i=F(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>",C(i)}),e=e.replace(/~0/,""),e},C=function(e){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.push(e)-1)+"K\n\n"},k=function(e){return e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,t,n,r,i){var s=r;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=L(s),t+"<code>"+s+"</code>"}),e},L=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=I(e,"*_{}[]\\",!1),e},A=function(e){return e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),e=e.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e},O=function(e){return e=e.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,t){var n=t;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=d(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /mg,"~0"),n=n.replace(/~0/g,""),n}),C("<blockquote>\n"+n+"\n</blockquote>")}),e},M=function(e){e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");var t=e.split(/\n{2,}/g),n=[],i=t.length;for(var s=0;s<i;s++){var o=t[s];o.search(/~K(\d+)K/g)>=0?n.push(o):o.search(/\S/)>=0&&(o=v(o),o=o.replace(/^([ \t]*)/g,"<p>"),o+="</p>",n.push(o))}i=n.length;for(var s=0;s<i;s++)while(n[s].search(/~K(\d+)K/)>=0){var u=r[RegExp.$1];u=u.replace(/\$/g,"$$$$"),n[s]=n[s].replace(/~K\d+K/,u)}return n.join("\n\n")},_=function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),e},D=function(e){return e=e.replace(/\\(\\)/g,q),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,q),e},P=function(e){return e=e.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),e=e.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(e,t){return H(B(t))}),e},H=function(e){var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if(e=="@")e=t[Math.floor(Math.random()*2)](e);else if(e!=":"){var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">'),e},B=function(e){return e=e.replace(/~E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e},j=function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,""),e},F=function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,t,n){var r=t,i=4-r.length%4;for(var s=0;s<i;s++)r+=" ";return r}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,""),e},I=function(e,t,n){var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,q),e},q=function(e,t){var n=t.charCodeAt(0);return"~E"+n+"E"}},typeof module!="undefined"&&(module.exports=Showdown),typeof define=="function"&&define.amd&&define("showdown",[],function(){return Showdown}),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/text",["builders2/content","bloomer/lib","showdown","underscore","d3"],function(e,n,r,i,s){var o,u,a,f;return a=function(e){function l(){return f=l.__super__.constructor.apply(this,arguments),f}var s,a;return t(l,e),a="___FOCUSTIME___",s=new RegExp(a,"g"),l.type="Text",l.icon="/img/visualization_icons/type_text.png",l.prototype.savedAttributes=["text","padding","fontSize","lineHeight","bold","italic","color","textAlign","tabIndex","timeFormat"],l.prototype.textArea=null,l.prototype.converter=new r.converter,l.prototype.createGraphic=function(){return l.__super__.createGraphic.call(this),this.textArea=n.text.area(),this.graphic.add(this.textArea,0)},l.prototype.initialize=function(){var e;return this.set({html:this._prepareLinks(this.converter.makeHtml((e=this.get("text"))!=null?e:this.get("defaultText")))},{silent:!0}),l.__super__.initialize.call(this)},l.prototype.defaults=function(){return i.extend(l.__super__.defaults.call(this),{height:35,timeFormat:"%x",fontSize:"normal",lineHeight:"normal",bold:!1,italic:!1,textAlign:"left",padding:{t:4,r:10,b:1,l:10},defaultText:"TEXT NOT PROVIDED"})},l.prototype.render=function(e){var t,r,i;return i=this.get("html"),this.needsFocusTime&&(t=this.get("parent").get("focusTime"),r=t?n.format.time(this.get("timeFormat"))(new Date(t)):"<b>N.A</b>",i=i.replace(s,r)),this.textArea.fontSize(function(){switch(this.get("fontSize")){case"small":return"12px";case"large":return"16px";case"title":return"24px";default:return"14px"}}.call(this)).lineHeight(function(){switch(this.get("lineHeight")){case"tight":return 1.2;case"far":return 1.8;default:return 1.5}}.call(this)).bold(this.get("bold")).italic(this.get("italic")).color(this.get("color")).textAlign(this.get("textAlign")).html(i),l.__super__.render.call(this,e),this.set({requiredWidth:this.textArea.requiredWidth(),requiredHeight:this.textArea.requiredHeight()})},l.prototype._prepareLinks=function(e){var t,n,r,i,s,f,l,c,h;r=/\[focus\s?time\]/ig;if(this.needsFocusTime=r.test(e))e=e.replace(r,'<span class="focus-time">'+a+"</span>");l=/href="recall ([^"]*)"/ig,l.test(e)&&(n="javascript:"+u.path+".exec('"+this.cid+"', '$1');",t="javascript:"+u.path+".exec('"+this.cid+"', '$1', true);",h="javascript:"+u.path+".undo('"+this.cid+"');",e=e.replace(l,'class="action" href="'+t+'" onmouseover="'+n+'" onmouseout="'+h+'"')),i=/href="highlight ([^"]*)"/ig,this.___entityDisplayNames=[];while(f=i.exec(e))this.___entityDisplayNames.push.apply(this.___entityDisplayNames,f[1].split(/\s*\,\s*/));return this.___entityDisplayNames.length&&(n="javascript:"+o.path+".exec('"+this.cid+"', '$1');",h="javascript:"+o.path+".undo('"+this.cid+"');",e=e.replace(i,'class="action" href="javascript:void 0;" onmouseover="'+n+'" onmouseout="'+h+'"')),c=/href="terminal ([^"]*)"/ig,c.test(e)&&(s=e.match(c)[0].replace("terminal ","bbg://"),e=e.replace(c,""+s+" target='blank' class='terminal-link action'")),e},l}(e),u=function(){function n(){}var t;return n.path="window.bloomer.actions.Recall",(t=window.bloomer).actions==null&&(t.actions={}),window.bloomer.actions.Recall=n,n._dateParser=s.time.format("%x").parse,n.parseTimeStr=function(e){var t;if((t=e.split("/")).length===3)return t[2].length===2&&(t[2]="20"+t),this._dateParser(t.join("/"));if(e.length===4)return new Date(parseInt(e),0)},n.exec=function(t,n,r){var i,s,o,u;i=this.parseTimeStr(n),s=e.instances[t].get("parent"),s.set({focusTime:i,sortTime:i,_undoFocusTime:r?null:(o=s.get("_undoFocusTime"))!=null?o:s.get("focusTime"),_undoSortTime:r?null:(u=s.get("_undoSortTime"))!=null?u:s.get("sortTime")});if(this.timeoutId!=null)return clearTimeout(this.timeoutId)},n.undo=function(t){return this.timeoutId=setTimeout(function(){var n,r,i;return n=e.instances[t].get("parent"),n.set({focusTime:(r=n.get("_undoFocusTime"))!=null?r:n.get("focusTime"),sortTime:(i=n.get("_undoSortTime"))!=null?i:n.get("sortTime"),_undoFocusTime:null,_undoSortTime:null})},200)},n}(),o=function(){function n(){}var t;return n.path="window.bloomer.actions.Highlight",(t=window.bloomer).actions==null&&(t.actions={}),window.bloomer.actions.Highlight=n,n.exec=function(t,n){var r;return r=e.instances[t].get("parent"),r.set("highlightedEntityName",n)},n.undo=function(t){var n;return n=e.instances[t].get("parent"),n.set("highlightedEntityName",null)},n}(),a})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/chapter_tab",["builders2/text","builders2/content","builders2/content_container","underscore"],function(e,n,r,i){var s,o;return s=function(e){function s(){return o=s.__super__.constructor.apply(this,arguments),o}return t(s,e),s.type="Chapter",s.prototype.createGraphic=function(){var e=this;return s.__super__.createGraphic.call(this),this.graphic.add(function(t){var n;return t.classed("s_selected-chapter",e.isSelected),n=t.selectAll("h1.s_chapter-number").data([null]),n.enter().append("h1").classed("s_chapter-number",!0).style({top:0,left:e.get("padding").l+"px"}),n.text(e.row.index+1)})},s.prototype.render=function(e){return this.isSelected=this.get("parent").get("selectedChapter")===this,s.__super__.render.call(this)},s.prototype.defaults=function(){return i.extend(s.__super__.defaults.call(this),{fontSize:"small",lineHeight:"tight",padding:{t:40,r:12,b:24,l:12},height:100})},s.prototype.parse=function(e){var t;return e=i.clone(e),((t=e.content)!=null?t.type:void 0)!=null&&(e.content=n.getNew(e.content)),e.content!=null&&(e.children=new r.ChildrenCollection([e.content])),s.__super__.parse.call(this,e)},s.prototype.toJSON=function(){return i.extend(s.__super__.toJSON.call(this),{content:this.get("content").toJSON()})},s.prototype.setElement=function(e){return s.__super__.setElement.call(this,e),this.sel.classed({s_chapter:!0}).on("click",function(e){var t,n;t=d3.select(this).datum(),n=t.get("parent");if(n.get("children").include(t))return n.set("selectedChapter",t)}),this},s}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/data_grid",["builders2/content","builders2/props_impl","bloomer/lib","underscore","d3"],function(e,n,r,i,s){var o,u;return o=function(o){function a(){return u=a.__super__.constructor.apply(this,arguments),u}return t(a,o),a.type="DataGrid",a.label="data grid",a.icon="/img/visualization_icons/type_text.png",a.prototype.savedAttributes=["padding"],a.prototype.properties=[new n.DatasetConfig({token:"dataset",name:"dataset"})],a.prototype.initialize=function(e,t){return this.seqFormatter=s.time.format("%x"),a.__super__.initialize.call(this,e,t)},a.prototype.createGraphic=function(){return a.__super__.createGraphic.call(this),this.grid=this.chart=r.chart.dataGrid(),this.graphic.add(this.grid)},a.prototype.prepare=function(){var t,n,r,s,o,u,f=this;a.__super__.prepare.call(this),t=this.___datasets[0];if(!t)return;return n=((o=t.meta)!=null?o.prefix:void 0)||"",r=((u=t.meta)!=null?u.suffix:void 0)||"",s=function(e){return n+e.value+r},t.meta.format==="date"&&(s=function(e){return f.seqFormatter(new Date(e.value))}),this.grid.dimension("columns").value(function(e){return[e.displayName].concat(e)}),this.grid.dimension("cell").value(function(e,t){return t===0?e:e.value!=null?s(e):"-"}),this.grid.dimension("headers").value(function(e,t){if(e)return[""].concat(i.map(e.headers,e.isSequential?e.meta.seqType==="relative"?function(e){return"T+"+e.seq}:function(e){return f.seqFormatter(new Date(e.seq))}:function(e){return e.name}))}),e.resources.scrollSize!=null&&this.grid.scrollSize(e.resources.scrollSize),this.grid.data(t),this},a.prototype.defaults=function(){return i.extend(a.__super__.defaults.call(this),{padding:{t:15,r:15,b:30,l:15}})},a}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/html_layout",["builders2/content_container"],function(e){var n,r,i;return r={},n=function(e){function n(){return i=n.__super__.constructor.apply(this,arguments),i}return t(n,e),n.type="HtmlLayout",n.prototype.delegateEvents=function(){var e=this;return this.get("children").on("change:requiredWidth change:requiredHeight",function(){if(!e._isRendering)return e.render()}),n.__super__.delegateEvents.call(this)},n.prototype.render=function(e){var t=this;return this._isRendering=!0,this.get("children").each(function(t){var n,r;if(t.el!=null)return t.dx=(n=t.get("requiredWidth"))!=null?n:t.el.scrollWidth,t.dy=(r=t.get("requiredHeight"))!=null?r:t.el.scrollHeight,t.render(e)}),this._isRendering=!1,this.sel.style("height",0),this.set({requiredHeight:this.el.scrollHeight}),this.sel.style("height",this.dy+"px")},n.prototype.setElement=function(e){var t,r=this;return t=this.el,n.__super__.setElement.call(this,e),t!==this.el&&(this.sel.html(this.get("html")),this.get("children").each(function(e){var t;t=r.sel.select("[data-name="+e.get("name")+"]").node();if(t)return e.setElement(t)})),this},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/image",["builders2/content","bloomer/lib","underscore"],function(e,n,r){var i,s;return i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments),s}return t(i,e),i.type="Image",i.icon="/img/visualization_icons/type_image.png",i.prototype.savedAttributes=["url","padding","sizing","horizontalAlignment","verticalAlignment","href"],i.prototype.createGraphic=function(){return i.__super__.createGraphic.call(this),this.image=n.image(),this.graphic.add(this.image,0)},i.prototype.render=function(e){var t,n,r,s;return r=this.get("url"),this.image.enabled(r!=null).url(r).href(this.get("href"),this.get("target")).sizing(this.get("sizing")).position(""+this.get("horizontalAlignment")+" "+this.get("verticalAlignment")),this.get("sizing")==="fitWidth"?(n=this.get("padding"),s=this.image.width()-n.l-n.r,t=parseInt(s/this.image.widthHeightRatio()),this.set("requiredHeight",t)):this.set("requiredHeight",null),i.__super__.render.call(this,e)},i.prototype.defaults=function(){return r.extend(i.__super__.defaults.call(this),{sizing:"contain",horizontalAlignment:"50%",verticalAlignment:"50%",padding:{t:4,r:10,b:1,l:10}})},i}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/map",["builders2/content","models/palette","builders2/props_impl","bloomer/lib","underscore"],function(e,n,r,i,s){var o,u;return o=function(e){function o(){return u=o.__super__.constructor.apply(this,arguments),u}var n;return t(o,e),o.type="Map",o.label="map",o.icon="/img/visualization_icons/type_map.png",n={yes:function(e){return e.name},no:function(e){return e.displayName}},o.prototype.lastDatasetName="",o.prototype.lastTranspose=null,o.prototype.geometries=null,o.prototype.savedAttributes=["padding"],o.prototype.properties=[new r.MapOptions({name:"options"})],o.prototype.initialize=function(){return o.__super__.initialize.call(this)},o.prototype.createGraphic=function(){var e,t,n,r,s;o.__super__.createGraphic.call(this),this.chart=i.chart.map(),this.chart.dimension("key").value(function(e){return e.name}),this.graphic.add(this.chart),r=this.properties,s=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.createGraphic!=null&&s.push(e.createGraphic(this));return s},o.prototype.prepare=function(){return o.__super__.prepare.call(this),this.chart.data(this.___entities)},o.prototype.render=function(e){var t,n,r,i;i=this.properties;for(n=0,r=i.length;n<r;n++)t=i[n],t.render!=null&&t.render(this);return o.__super__.render.call(this,e)},o.prototype.defaults=function(){return s.extend(o.__super__.defaults.call(this),{padding:{t:0,r:0,b:0,l:0}})},o}(e)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};define("builders2/pager",["builders2/content","underscore"],function(t,r){var i,s;return i=function(t){function r(){return this._updateRequiredHeight=e(this._updateRequiredHeight,this),s=r.__super__.constructor.apply(this,arguments),s}return n(r,t),r.type="Pager",r.prototype.delegateEvents=function(){var e=this;return r.__super__.delegateEvents.call(this),this.on({"change:parent":function(){return e.get("parent").on("change:selectedContent",function(){return e.set("content",e.get("parent").get("selectedContent"))})},"change:content":function(){var t;return(t=e.previous("content"))!=null&&t.off("change:requiredHeight"),e.sel!=null&&e.render(),e.get("content").on("change:requiredHeight",function(){if(!e._isRendering)return e._updateRequiredHeight()})}})},r.prototype.render=function(e){var t;return this._isRendering=!0,t=this.get("content"),t!=null&&(t.dx=this.dx,t.setElement(this.sel.select(".pager-content").node()).render(),this._updateRequiredHeight()),this._isRendering=!1},r.prototype.setElement=function(e){return r.__super__.setElement.call(this,e),this.sel.selectChildren(".pager-content").data([null]).enter().append("div").attr({"class":"pager-content"}),this},r.prototype._updateRequiredHeight=function(){return this.set("requiredHeight",this.get("content").get("requiredHeight"))},r}(t)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/scatter",["builders2/content","builders2/props_impl","bloomer/lib","underscore","d3"],function(e,n,r,i,s){var o,u;return o=function(e){function s(){return u=s.__super__.constructor.apply(this,arguments),u}return t(s,e),s.type="Scatter",s.label="Scatter",s.icon="/img/visualization_icons/type_plot.png",s.prototype.savedAttributes=["padding","labelPosition"],s.prototype.properties=[new n.ScatterOptions({name:"options"})],s.prototype.createGraphic=function(){var e,t,n,i,o;s.__super__.createGraphic.call(this),this.chart=r.chart.scatter(),this.graphic.add(this.chart),this.chart.dimension("key").value(function(e){return e.name}),i=this.properties,o=[];for(t=0,n=i.length;t<n;t++)e=i[t],e.createGraphic!=null&&o.push(e.createGraphic(this));return o},s.prototype.prepare=function(){return s.__super__.prepare.call(this),this.chart.data(this.___entities).enabled(this.___datasets[0]!=null&&this.___datasets[1]!=null).smartLabels(this.get("labelPosition")==="smart")},s.prototype.render=function(e){var t,n,r,i;i=this.properties;for(n=0,r=i.length;n<r;n++)t=i[n],t.render!=null&&t.render(this);return s.__super__.render.call(this,e)},s.prototype.defaults=function(){return i.extend(s.__super__.defaults.call(this),{padding:{t:10,r:20,b:30,l:70},labelPosition:"smart"})},s}(e)})}.call(this),!function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){function n(e,t){var n;return t=t||window,(n=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||function(){t.setTimeout(function(){e(+(new Date))},1e3/60)})(e)}function r(e,t){return Math.sin(Math.PI/2*t)*e}function i(e,t,r,i,s){function o(){var f=+(new Date),l=f-u,c=Math.min(l/r,1),h=i?i(t,c):t*c,p=1==c;e(h,p),p||n(o,s)}var u=+(new Date);n(o)}t.exports={animate:i,requestAnimationFrame:n,easeOut:r}},{}],2:[function(e,t){function n(){return a.builtUrl(f)}function r(e,t){var n,r,i;return n="default",r=u.isRtlLang(t)?"rtl":"ltr",i=[e,o.css,n,r,"css"].join("."),a.base()+"/css/"+i}function i(e){return function(){return s.isEnabled()?e.apply(null,arguments):n()}}var s=e("assets/refresh"),o=e("assets/thumbprints"),u=e("i18n/util"),a=e("tfw/util/assets"),f="embed/timeline.css";t.exports={tweet:i(r.bind(null,"tweet")),timeline:n,video:i(r.bind(null,"video"))}},{"assets/refresh":3,"assets/thumbprints":4,"i18n/util":16,"tfw/util/assets":33}],3:[function(e,t){function n(){return u.contains(i.location.hash,a)}function r(){return n()||o.asBoolean(s.val("widgets:new-embed-design"))}var i=e("env/window"),s=e("globals/pagemetadata"),o=e("util/typevalidator"),u=e("util/util"),a="__twREFRESH__";t.exports={isEnabled:r}},{"env/window":10,"globals/pagemetadata":13,"util/typevalidator":62,"util/util":65}],4:[function(e,t){t.exports={css:"f1e22e3193d8d68b631f5450b216475e"}},{}],5:[function(e,t){function n(e){return new RegExp("\\b"+e+"\\b","g")}function r(e,t){return e.classList?void e.classList.add(t):void (n(t).test(e.className)||(e.className+=" "+t))}function i(e,t){return e.classList?void e.classList.remove(t):void (e.className=e.className.replace(n(t)," "))}function s(e,t,n){return void 0===n&&e.classList&&e.classList.toggle?e.classList.toggle(t,n):(n?r(e,t):i(e,t),n)}function o(e,t,s){return e.classList&&u(e,t)?(i(e,t),void r(e,s)):void (e.className=e.className.replace(n(t),s))}function u(e,t){return e.classList?e.classList.contains(t):n(t).test(e.className)}t.exports={add:r,remove:i,replace:o,toggle:s,present:u}},{}],6:[function(e,t){function n(e){var t=e.getAttribute("data-twitter-event-id");return t?t:(e.setAttribute("data-twitter-event-id",++d),d)}function r(e,t,n){var r=0,i=e&&e.length||0;for(r=0;i>r;r++)e[r].call(t,n)}function i(e,t,n){for(var s=n||e.target||e.srcElement,o=s.className.split(" "),u=0,a=o.length;a>u;u++)r(t["."+o[u]],s,e);r(t[s.tagName],s,e),e.cease||s!==this&&i.call(this,e,t,s.parentElement||s.parentNode)}function s(e,t,n,r){function s(r){i.call(e,r,n[t])}o(e,s,t,r),e.addEventListener(t,s,!1)}function o(e,t,n,r){e.id&&(v[e.id]=v[e.id]||[],v[e.id].push({el:e,listener:t,type:n,rootId:r}))}function u(e){var t=v[e];t&&(t.forEach(function(e){e.el.removeEventListener(e.type,e.listener,!1),delete p[e.rootId]}),delete v[e])}function a(e,t,r,i){var o=n(e);p[o]=p[o]||{},p[o][t]||(p[o][t]={},s(e,t,p[o],o)),p[o][t][r]=p[o][t][r]||[],p[o][t][r].push(i)}function f(e,t,r){var s=n(t),o=p[s]&&p[s];i.call(t,{target:r},o[e])}function l(e){return h(e),c(e),!1}function c(e){e&&e.preventDefault?e.preventDefault():e.returnValue=!1}function h(e){e&&(e.cease=!0)&&e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}var p={},d=-1,v={};t.exports={stop:l,stopPropagation:h,preventDefault:c,delegate:a,simulate:f,removeDelegatesForWidget:u}},{}],7:[function(e,t){function n(e){var t=e.charAt(0);return"."===t?function(t){var n=t.className?t.className.split(/\s+/):[];return i.contains(n,e.slice(1))}:"#"===t?function(t){return t.id===e.slice(1)}:function(t){return t.tagName===e.toUpperCase()}}function r(e,t,s){var o;if(t)return s=s||t&&t.ownerDocument,o=i.isType("function",e)?e:n(e),t===s?o(t)?t:void 0:o(t)?t:r(o,t.parentNode,s)}var i=e("util/util");t.exports={closest:r}},{"util/util":65}],8:[function(e,t){function n(e){return e&&1===e.nodeType?e.offsetWidth||n(e.parentNode):0}t.exports={effectiveWidth:n}},{}],9:[function(e,t){function n(e,t,n){for(var r,i=[],s=0;r=n[s];s++)i.push(r[0]),i.push(r[1]);return e+t+i.join(":")}function r(e){var t=e||"";return t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var i={};t.exports=function(e,t,s){var o,u=document.createElement("span"),a={},f="",l=0,c=0,h=[];if(s=s||[],t=t||"",f=n(e,t,s),i[f])return i[f];u.className=t+" twitter-measurement";try{for(;o=s[l];l++)u.style[o[0]]=o[1]}catch(p){for(;o=s[c];c++)h.push(r(o[0])+":"+o[1]);u.setAttribute("style",h.join(";")+";")}return u.innerHTML=e,document.body.appendChild(u),a.width=u.clientWidth||u.offsetWidth,a.height=u.clientHeight||u.offsetHeight,document.body.removeChild(u),u=null,i[f]=a}},{}],10:[function(e,t){t.exports=window},{}],11:[function(e,t){function n(e,t,n){t.ready=e.then.bind(e),n&&Array.isArray(t[n])&&(t[n].forEach(e.then.bind(e)),delete t[n])}t.exports={exposeReadyPromise:n}},{}],12:[function(e,t){function n(e){return s.isType("string",e)?e.split("."):s.isType("array",e)?e:[]}function r(e,t){var r=n(t),i=r.slice(0,-1);return i.reduce(function(e,t,n){if(e[t]=e[t]||{},!s.isObject(e[t]))throw new Error(i.slice(0,n+1).join(".")+" is already defined with a value.");return e[t]},e)}function i(e,t){t=t||window,t[e]=t[e]||{},Object.defineProperty(this,"base",{value:t[e]}),Object.defineProperty(this,"name",{value:e})}var s=e("util/util");s.aug(i.prototype,{get:function(e){var t=n(e);return t.reduce(function(e,t){return s.isObject(e)?e[t]:void 0},this.base)},set:function(e,t,i){var s=n(e),o=r(this.base,e),u=s.slice(-1);return i&&u in o?o[u]:o[u]=t},init:function(e,t){return this.set(e,t,!0)},"delete":function(e){var t=n(e),r=this.get(t.slice(0,-1));r&&delete r[t.slice(-1)]},aug:function(e){var t=this.get(e),n=s.toRealArray(arguments).slice(1);if(t="undefined"!=typeof t?t:{},n.unshift(t),!n.every(s.isObject))throw new Error("Cannot augment non-object.");return this.set(e,s.aug.apply(null,n))},call:function(e){var t=this.get(e),n=s.toRealArray(arguments).slice(1);if(!s.isType("function",t))throw new Error("Function "+e+"does not exist.");return t.apply(null,n)},fullPath:function(e){var t=n(e);return t.unshift(this.name),t.join(".")}}),t.exports=i},{"util/util":65}],13:[function(e,t){function n(e){var t,n,r,s=0;for(i={},e=e||document,t=e.getElementsByTagName("meta");n=t[s];s++)/^twitter:/.test(n.name)&&(r=n.name.replace(/^twitter:/,""),i[r]=n.content)}function r(e){return i[e]}var i;n(),t.exports={init:n,val:r}},{}],14:[function(e,t){var n=e("globals/object");t.exports=new n("__twttr")},{"globals/object":12}],15:[function(e,t){var n=e("globals/object");t.exports=new n("twttr")},{"globals/object":12}],16:[function(e,t){function n(e){return e=String(e).toLowerCase(),r.contains(i,e)}var r=e("util/util"),i=["ar","fa","he","ur"];t.exports={isRtlLang:n}},{"util/util":65}],17:[function(e,t){function n(e){var t=~location.host.indexOf("poptip.com")?"https://poptip.com":location.href,n="original_referer="+t;return[e,n].join(-1==e.indexOf("?")?"?":"&")}function r(e){var t,r;e.altKey||e.metaKey||e.shiftKey||(t=o.closest(function(e){return"A"===e.tagName||"AREA"===e.tagName},e.target),t&&a.isIntentURL(t.href)&&(r=n(t.href),r=r.replace(/^http[:]/,"https:"),r=r.replace(/^\/\//,"https://"),u.open(r,t),s.preventDefault(e)))}function i(e){e.addEventListener("click",r,!1)}var s=e("dom/delegate"),o=e("dom/get"),u=e("tfw/widget/intent"),a=e("util/twitter");t.exports={attachTo:i}},{"dom/delegate":6,"dom/get":7,"tfw/widget/intent":41,"util/twitter":61}],18:[function(e,t){function n(e){var t=[];return l.forIn(e,function(e,n){t.push(e+"="+n)}),t.join(",")}function r(){return c+f.generate()}function i(e,t){function n(e){return Math.round(e/2)}return e>t?{coordinate:0,size:t}:{coordinate:n(t)-n(e),size:e}}function s(e,t,r){var s,u;t=o.parse(t),r=r||{},s=i(t.width,r.width||h),t.left=s.coordinate,t.width=s.size,u=i(t.height,r.height||p),t.top=u.coordinate,t.height=u.size,this.win=e,this.features=n(t)}var o,u=e("util/options_parser"),a=e("util/twitter"),f=e("util/uid"),l=e("util/util"),c="intent_",h=window.screen.width,p=window.screen.height;o=(new u).defaults({width:550,height:520,personalbar:"0",toolbar:"0",location:"1",scrollbars:"1",resizable:"1"}),s.prototype.open=function(e){return a.isTwitterURL(e)?(this.name=r(),this.popup=this.win.open(e,this.name,this.features),this):void 0},s.open=function(e,t){var n=new s(window,t);return n.open(e)},t.exports=s},{"util/options_parser":56,"util/twitter":61,"util/uid":63,"util/util":65}],19:[function(e,t){function n(e){a[e]=+(new Date)}function r(e){return a[e]?+(new Date)-a[e]:null}function i(e,t,n,i,o){var u=r(t);u&&s(e,n,i,u,o)}function s(e,t,n,r,i){var s,a=void 0===i?f:i;100*Math.random()>a||(n=u.aug(n||{},{duration_ms:r}),s={page:t,component:"performance",action:e},o.clientEvent(s,n,!0))}var o=e("scribe/pixel"),u=e("util/util"),a={},f=1;t.exports={start:n,end:r,track:s,endAndTrack:i}},{"scribe/pixel":28,"util/util":65}],20:[function(e,t){t.exports={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INTERNAL_ERROR:{code:-32603,message:"Internal error"}}},{}],21:[function(e,t){function n(e){this.registry=e||{}}function r(e){return c.isType("string",e)?JSON.parse(e):e}function i(e){var t,n,r;return c.isObject(e)?(t=e.jsonrpc===p,n=c.isType("string",e.method),r=!("id"in e)||s(e.id),t&&n&&r):!1}function s(e){var t,n,r;return t=c.isType("string",e),n=c.isType("number",e),r=null===e,t||n||r}function o(e){return c.isObject(e)&&!c.isType("function",e)}function u(e,t){return{jsonrpc:p,id:e,result:t}}function a(e,t){return{jsonrpc:p,id:s(e)?e:null,error:t}}function f(e){return h.every.apply(h,e).then(function(e){return e=e.filter(function(e){return void 0!==e}),e.length?e:void 0})}var l=e("rpc/jsonrpc/errors"),c=e("util/util"),h=e("util/promise"),p="2.0";n.prototype._invoke=function(e,t){var n,r,i;n=this.registry[e.method],r=e.params||[],r=c.isType("array",r)?r:[r];try{i=n.apply(t.source||null,r)}catch(s){i=h.reject(s.message)}return h.isThenable(i)?i:h.fulfill(i)},n.prototype._processRequest=function(e,t){function n(t){return u(e.id,t)}function r(){return a(e.id,l.INTERNAL_ERROR)}var s;return i(e)?(s="params"in e&&!o(e.params)?h.fulfill(a(e.id,l.INVALID_PARAMS)):this.registry[e.method]?this._invoke(e,{source:t}).then(n,r):h.fulfill(a(e.id,l.METHOD_NOT_FOUND)),null!=e.id?s:h.fulfill()):h.fulfill(a(e.id,l.INVALID_REQUEST))},n.prototype.attachReceiver=function(e){return e.attachTo(this),this},n.prototype.bind=function(e,t){return this.registry[e]=t,this},n.prototype.receive=function(e,t){var n,i,s,o=this;try{e=r(e)}catch(u){return h.fulfill(a(null,l.PARSE_ERROR))}return t=t||null,n=c.isType("array",e),i=n?e:[e],s=i.map(function(e){return o._processRequest(e,t)}),n?f(s):s[0]},t.exports=n},{"rpc/jsonrpc/errors":20,"util/promise":58,"util/util":65}],22:[function(e,t){function n(e,t){e&&e.postMessage&&(t=l?JSON.stringify(t):t,e.postMessage(t,"*"))}function r(e){var t=e.document;this.server=null,this.isTwitterFrame=a.isTwitterURL(t.location.href),e.addEventListener("message",this._onMessage.bind(this),!1)}function i(e){this.pending={},this.target=e,this.isTwitterHost=a.isTwitterURL(document.location.href),window.addEventListener("message",this._onMessage.bind(this),!1)}function s(e){return arguments.length>0&&(l=!!e),l}var o=e("util/util"),u=e("util/env"),a=e("util/twitter"),f=e("util/promise"),l=u.ie9();o.aug(r.prototype,{_onMessage:function(e){this.server&&(!this.isTwitterFrame||a.isTwitterURL(e.origin))&&this.server.receive(e.data,e.source).then(function(t){t&&n(e.source,t)})},attachTo:function(e){this.server=e},detach:function(){this.server=null}}),o.aug(i.prototype,{_processResponse:function(e){var t=this.pending[e.id];t&&(t.fulfill(e),delete this.pending[e.id])},_onMessage:function(e){var t=e.data;if(!this.isTwitterHost||a.isTwitterURL(e.origin)){if(o.isType("string",t))try{t=JSON.parse(t)}catch(n){return}t=o.isType("array",t)?t:[t],t.forEach(this._processResponse.bind(this))}},send:function(e){var t,r=this.pending;return t=e.id?new f(function(t){r[e.id]=t}):f.fulfill(),n(this.target,e),t}}),t.exports={Receiver:r,Dispatcher:i,_stringifyPayload:s}},{"util/env":51,"util/promise":58,"util/twitter":61,"util/util":65}],23:[function(e,t){function n(e,t,n,r){var o,u=this;this.readyPromise=new s(function(e){u.resolver=e}),this.attrs=e||{},this.styles=t||{},this.appender=n||function(e){document.body.appendChild(e)},this.layout=r||function(e){return new s(function(t){return t.fulfill(e())})},this.frame=o=i(this.attrs,this.styles),o.onreadystatechange=o.onload=this.getCallback(this.onLoad),this.layout(function(){u.appender(o)})}var r=e("util/env"),i=e("util/iframe"),s=e("util/promise"),o=e("globals/private"),u=0;n.prototype.getCallback=function(e){var t=this,n=!1;return function(){n||(n=!0,e.call(t))}},n.prototype.registerCallback=function(e){var t="cb"+u++;return o.set(["sandbox",t],e),t},n.prototype.onLoad=function(){try{this.document=this.frame.contentWindow.document}catch(e){return void this.setDocDomain()}this.writeStandardsDoc(),this.resolver.fulfill(this)},n.prototype.ready=function(){return this.readyPromise},n.prototype.setDocDomain=function(){var e=this,t=i(this.attrs,this.styles),n=this.registerCallback(this.getCallback(this.onLoad));t.src=["javascript:",'document.write("");',"try { window.parent.document; }","catch (e) {",'document.domain="'+document.domain+'";',"}","window.parent."+o.fullPath(["sandbox",n])+"();"].join(""),this.layout(function(){e.frame.parentNode.removeChild(e.frame),e.frame=null,e.appender?e.appender(t):document.body.appendChild(t),e.frame=t})},n.prototype.writeStandardsDoc=function(){if(r.anyIE()&&!r.cspEnabled()){var e=["<!DOCTYPE html>","<html>","<head>","<scr","ipt>","try { window.parent.document; }",'catch (e) {document.domain="'+document.domain+'";}',"</scr","ipt>","</head>","<body></body>","</html>"].join("");this.document.write(e),this.document.close()}},t.exports=n},{"globals/private":14,"util/env":51,"util/iframe":53,"util/promise":58}],24:[function(e,t){function n(){var e,t;d={},s||(e=document.body.offsetHeight,t=document.body.offsetWidth,(e!=m||t!=v)&&(p.forEach(function(e){e.dispatchFrameResize(v,m)}),m=e,v=t))}function r(e){var t;return e.id?e.id:(t=e.getAttribute("data-twttr-id"))?t:(t="twttr-sandbox-"+h++,e.setAttribute("data-twttr-id",t),t)}function i(e,t){var n=this;u.apply(this,[e,t]),this._resizeHandlers=[],p=p.filter(function(e){var t=e._frame.parentElement;return t||l.async(function(){c.removeDelegatesForWidget(e._frame.id)}),t}),p.push(this),this._win.addEventListener("resize",function(){n.dispatchFrameResize()},!1)}var s,o=e("sandbox/baseframe"),u=e("sandbox/minimal"),a=e("util/env"),f=e("util/promise"),l=e("util/util"),c=e("dom/delegate"),h=0,p=[],d={},v=0,m=0;window.addEventListener("resize",n,!1),i.prototype=new u,l.aug(i.prototype,{dispatchFrameResize:function(){var e=this._frame.parentNode,t=r(e),n=d[t];s=!0,this._resizeHandlers.length&&(n||(n=d[t]={w:this._frame.offsetWidth,h:this._frame.offsetHeight}),(this._frameWidth!=n.w||this._frameHeight!=n.h)&&(this._frameWidth=n.w,this._frameHeight=n.h,this._resizeHandlers.forEach(function(e){e(n.w,n.h)}),window.setTimeout(function(){d={}},50)))},appendStyleSheet:function(e){var t=this,n=this._doc.createElement("link");return n.type="text/css",n.rel="stylesheet",n.href=e,this.layout(function(){return t._head.appendChild(n)})},appendCss:function(e){var t,n=this;return a.cspEnabled()?f.reject("CSP enabled; cannot embed inline styles."):(t=this._doc.createElement("style"),t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(this._doc.createTextNode(e)),this.layout(function(){return n._head.appendChild(t)}))},style:function(e){var t=this;return this.layout(function(){l.forIn(e,function(e,n){t._frame.style[e]=n})})},onresize:function(e){this._resizeHandlers.push(e)},width:function(e){return void 0!==e&&(this._frame.style.width=e+"px"),a.ios()?Math.min(this._frame.parentNode.offsetWidth,this._frame.offsetWidth):this._frame.offsetWidth},height:function(e){return void 0!==e&&(this._frame.height=e),this._frame.offsetHeight}}),i.createSandbox=function(e,t,n,r){var s=new o(e,t,n,r);return s.ready().then(function(e){return new i(e.frame,e.layout)})},t.exports=i},{"dom/delegate":6,"sandbox/baseframe":23,"sandbox/minimal":25,"util/env":51,"util/promise":58,"util/util":65}],25:[function(e,t){function n(e,t){e&&(this._frame=e,this._win=e.contentWindow,this._doc=this._win.document,this._body=this._doc.body,this._head=this._body.parentNode.children[0],this.layout=t)}var r=e("sandbox/baseframe"),i=e("util/util");i.aug(n.prototype,{createElement:function(e){return this._doc.createElement(e)},createDocumentFragment:function(){return this._doc.createDocumentFragment()},appendChild:function(e){var t=this;return this.layout(function(){return t._body.appendChild(e)})},setBaseTarget:function(e){var t=this,n=this._doc.createElement("base");return n.target=e,this.layout(function(){return t._head.appendChild(n)})},setTitle:function(e){e&&(this._frame.title=e)},element:function(){return this._frame},document:function(){return this._doc}}),n.createSandbox=function(e,t,i,s){var o=new r(e,t,i,s);return o.ready().then(function(e){return new n(e.frame,e.layout)})},t.exports=n},{"sandbox/baseframe":23,"util/util":65}],26:[function(e,t){function n(){return f.formatGenericEventData("syndicated_impression",{})}function r(){u("tweet")}function i(){u("timeline")}function s(){u("video")}function o(){u("partnertweet")}function u(e){l.isHostPageSensitive()||c[e]||(c[e]=!0,a.scribe(f.formatClientEventNamespace({page:e,action:"impression"}),n(),f.AUDIENCE_ENDPOINT))}var a=e("scribe/pixel"),f=e("scribe/util"),l=e("util/tld"),c={};t.exports={scribePartnerTweetAudienceImpression:o,scribeTweetAudienceImpression:r,scribeTimelineAudienceImpression:i,scribeVideoAudienceImpression:s,resetTracking:function(){c={}}}},{"scribe/pixel":28,"scribe/util":29,"util/tld":60}],27:[function(e,t){function n(){return T?N:(v.createSandbox({id:"rufous-sandbox"},{display:"none"}).then(function(e){c=e,f=u(),l=a(),h.fulfill([f,l])}),T=!0,N)}function r(e,t){var n,r,i;y.isObject(e)&&y.isObject(t)&&(i=g.flattenClientEventPayload(e,t),n=f.firstChild,n.value=+(+n.value||i.dnt||0),r=c.createElement("input"),r.type="hidden",r.name="l",r.value=g.stringify(i),f.appendChild(r))}function i(e,t,n){var i=!y.isObject(e),s=t?!y.isObject(t):!1;i||s||N.then(function(){r(g.formatClientEventNamespace(e),g.formatClientEventData(t,n))})}function s(){return N.then(function(){if(f.children.length<=2)return m.reject();var e=m.every(c.appendChild(f),c.appendChild(l)).then(function(e){var t=e[0],n=e[1];return n.addEventListener("load",function(){o(t,n)(),b.get("events").trigger("logFlushed")}),t.submit(),e});return f=u(),l=a(),e})}function o(e,t){return function(){var n=e.parentNode;n&&(n.removeChild(e),n.removeChild(t))}}function u(){var e=c.createElement("form"),t=c.createElement("input"),n=c.createElement("input");return x++,e.action=g.CLIENT_EVENT_ENDPOINT,e.method="POST",e.target=E+x,e.id=S+x,t.type="hidden",t.name="dnt",t.value=d.enabled(),n.type="hidden",n.name="tfw_redirect",n.value=g.RUFOUS_REDIRECT,e.appendChild(t),e.appendChild(n),e}function a(){var e=E+x;return p({id:e,name:e,width:0,height:0,border:0},{display:"none"},c.document())}var f,l,c,h,p=e("util/iframe"),d=e("util/donottrack"),v=e("sandbox/minimal"),m=e("util/promise"),g=e("scribe/util"),y=e("util/util"),b=e("globals/twttr"),w=Math.floor(1e3*Math.random())+"_",E="rufous-frame-"+w+"-",S="rufous-form-"+w+"-",x=0,T=!1,N=new m(function(e){h=e});t.exports={clientEvent:i,flush:s,init:n}},{"globals/twttr":15,"sandbox/minimal":25,"scribe/util":29,"util/donottrack":50,"util/iframe":53,"util/promise":58,"util/util":65}],28:[function(e,t){function n(e,t,n){return r(e,t,n,2)}function r(e,t,n,r){var i=!p.isObject(e),o=t?!p.isObject(t):!1;i||o||s(h.formatClientEventNamespace(e),h.formatClientEventData(t,n,r),h.CLIENT_EVENT_ENDPOINT)}function i(e,t,n,i){var s=h.extractTermsFromDOM(e.target||e.srcElement);s.action=i||"click",r(s,t,n)}function s(e,t,n){var r,i;n&&p.isObject(e)&&p.isObject(t)&&(r=h.flattenClientEventPayload(e,t),i={l:h.stringify(r)},r.dnt&&(i.dnt=1),f(c.url(n,i)))}function o(e,t,n,r){var i,s=!p.isObject(e),o=t?!p.isObject(t):!1;if(!s&&!o)return i=h.flattenClientEventPayload(h.formatClientEventNamespace(e),h.formatClientEventData(t,n,r)),u(i)}function u(e){return v.push(e),v}function a(){var e,t,n=c.url(h.CLIENT_EVENT_ENDPOINT,{dnt:0,l:""}),r=encodeURIComponent(n).length;return v.length>1&&o({page:"widgets_js",component:"scribe_pixel",action:"batch_log"},{}),e=v,v=[],t=e.reduce(function(t,n,i){var s,o,u=t.length,a=u&&t[u-1],f=i+1==e.length;return f&&n.event_namespace&&"batch_log"==n.event_namespace.action&&(n.message=["entries:"+i,"requests:"+u].join("/")),s=h.stringify(n),o=encodeURIComponent(s).length+3,r+o>d?t:((!a||a.urlLength+o>d)&&(a={urlLength:r,items:[]},t.push(a)),a.urlLength+=o,a.items.push(s),t)},[]),t.map(function(e){var t={l:e.items};return l.enabled()&&(t.dnt=1),f(c.url(h.CLIENT_EVENT_ENDPOINT,t))})}function f(e){var t=new Image;return t.src=e}var l=e("util/donottrack"),c=e("util/querystring"),h=e("scribe/util"),p=e("util/util"),d=2083,v=[];t.exports={_enqueueRawObject:u,scribe:s,clientEvent:r,clientEvent2:n,enqueueClientEvent:o,flushClientEvents:a,interaction:i}},{"scribe/util":29,"util/donottrack":50,"util/querystring":59,"util/util":65}],29:[function(e,t){function n(e,t){var r;return t=t||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute("data-scribe"))&&r.split(" ").forEach(function(e){var n=e.trim().split(":"),r=n[0],i=n[1];r&&i&&!t[r]&&(t[r]=i)}),n(e.parentNode,t)):t}function r(e){return f.aug({client:"tfw"},e||{})}function i(e,t,n){var r=e&&e.widget_origin||document.referrer;return e=s("tfw_client_event",e,r),e.client_version=c,e.format_version=void 0!==n?n:1,t||(e.widget_origin=r),e}function s(e,t,n){return t=t||{},f.aug(t,{_category_:e,triggered_on:t.triggered_on||+(new Date),dnt:a.enabled(n)})}function o(e,t){return f.aug({},t,{event_namespace:e})}function u(e){var t,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,t=JSON.stringify(e),n&&(Array.prototype.toJSON=n),t}var a=e("util/donottrack"),f=e("util/util"),l=e("globals/private"),c="9004cb77e76a3835dd166aaf93c9c8377b98a014:1423682742277",h=l.get("endpoints.rufous")||"https://syndication.twitter.com/i/jot",p=l.get("endpoints.rufous")||"https://syndication.twitter.com/i/jot/syndication",d=l.get("endpoints.rufousRedirect")||"https://platform.twitter.com/jot.html";t.exports={extractTermsFromDOM:n,flattenClientEventPayload:o,formatGenericEventData:s,formatClientEventData:i,formatClientEventNamespace:r,stringify:u,AUDIENCE_ENDPOINT:p,CLIENT_EVENT_ENDPOINT:h,RUFOUS_REDIRECT:d}},{"globals/private":14,"util/donottrack":50,"util/util":65}],30:[function(e,t){function n(e,t,n,r){return e=e||[],n=n||{},function(){var o,a,f,l,c=Array.prototype.slice.apply(arguments,[0,e.length]),h=Array.prototype.slice.apply(arguments,[e.length]);return h.forEach(function(e){return e?1===e.nodeType?void (f=e):i.isType("function",e)?void (o=e):void (i.isType("object",e)&&(a=e)):void 0}),c.length!=e.length||0===h.length?(o&&i.async(function(){o(!1)}),s.reject("Not enough parameters")):f?(a=i.aug(a||{},n),a.targetEl=f,e.forEach(function(e){a[e]=c.shift()}),l=new t(a),u.doLayout(),l.render(),r&&r(),o&&l.completed().then(o,function(){o(!1)}),l.completed()):(o&&i.async(function(){o(!1)}),s.reject("No target specified"))}}function r(e){var t;e.linkColor=e.linkColor||e.previewParams.link_color,e.theme=e.theme||e.previewParams.theme,e.height=e.height||e.previewParams.height,t=new h(e),this.render=t.render.bind(t),this.completed=t.completed.bind(t)}var i=e("util/util"),s=e("util/promise"),o=e("util/twitter"),u=e("tfw/widget/base"),a=e("tfw/widget/tweetbutton"),f=e("tfw/widget/follow"),l=e("tfw/widget/embed"),c=e("tfw/widget/video"),h=e("tfw/widget/timeline"),p=n(["url"],a,{type:"share"}),d=n(["hashtag"],a,{type:"hashtag"}),v=n(["screenName"],a,{type:"mention"}),m=n(["screenName"],f),g=n(["tweetId"],l,{},l.fetchAndRender),y=n(["tweetId"],c,{},c.fetchAndRender),b=n(["widgetId"],h),w=n(["previewParams"],r),E={createShareButton:p,createMentionButton:v,createHashtagButton:d,createFollowButton:m,createTweet:g,createVideo:y,createTweetEmbed:g,createTimeline:b};o.isTwitterURL(window.location.href)&&(E.createTimelinePreview=w),t.exports=E},{"tfw/widget/base":38,"tfw/widget/embed":39,"tfw/widget/follow":40,"tfw/widget/timeline":43,"tfw/widget/tweetbutton":44,"tfw/widget/video":45,"util/promise":58,"util/twitter":61,"util/util":65}],31:[function(e,t){function n(e,t){var n=u.connect({src:e,iframe:{name:t,style:"position:absolute;top:-9999em;width:10px;height:10px"}});return a(n).expose({trigger:function(e,t,n){t=t||{};var r=t.region;delete t.region,c.get("events").trigger(e,{target:f.find(n),data:t,region:r,type:e})},initXPHub:function(){i(!0)}}),n}function r(e){return e?l.secureHubId:l.contextualHubId}function i(e){var t=o.base(e)+"/widgets/hub.e49de384ce9235929b9e175019bc4213.html",i=r(e);if(!document.getElementById(i))return n(t,i)}function s(e,t){var n=u.connect({window:{width:550,height:450},src:e});a(n).expose({trigger:function(e,n){c.get("events").trigger(e,{target:t,region:"intent",type:e,data:n})}})}var o=e("tfw/util/assets"),u=e("xd/parent"),a=e("xd/jsonrpc"),f=e("tfw/widget/base"),l=e("util/widgetrpc"),c=e("globals/twttr");t.exports={init:i,openIntent:s}},{"globals/twttr":15,"tfw/util/assets":33,"tfw/widget/base":38,"util/widgetrpc":66,"xd/jsonrpc":71,"xd/parent":72}],32:[function(e,t){function n(e){return e=e||window,e.top.postMessage?e===e.top?void e.addEventListener("message",function(e){var t;if(!e.data||"{"==e.data[0]){try{t=JSON.parse(e.data)}catch(n){}t&&"twttr:private:requestArticleUrl"==t.name&&e.source.postMessage(JSON.stringify({name:"twttr:private:provideArticleUrl",data:{url:r.rootDocumentLocation(),dnt:i.enabled()}}),"*")}},!1):(e.addEventListener("message",function(e){var t;if(!e.data||"{"==e.data[0]){try{t=JSON.parse(e.data)}catch(n){}if(t&&"twttr:private:provideArticleUrl"==t.name){if(!t.data)return;r.rootDocumentLocation(t.data.url),t.data.dnt&&i.setOn()}}},!1),void e.top.postMessage(JSON.stringify({name:"twttr:private:requestArticleUrl"}),"*")):void 0}var r=e("util/document"),i=e("util/donottrack");t.exports={requestArticleUrl:n}},{"util/document":48,"util/donottrack":50}],33:[function(e,t){function n(e,t){var n,i=u[e];return"embed/timeline.css"===e&&o.contains(location.href,"localhost.twitter.com")?"/components/syndication-templates/lib/css/index.css":(n=s.retina()?"2x":"default",t&&(n+=".rtl"),r()+"/"+i[n])}function r(e){var t=i.get("host");return a(e)+"://"+t}var i=e("globals/private"),s=e("util/env"),o=e("util/util"),u={"embed/timeline.css":{"default":"embed/timeline.a859548807e55557ddb88a1a9e94dd6f.default.css","2x":"embed/timeline.a859548807e55557ddb88a1a9e94dd6f.2x.css",gif:"embed/timeline.a859548807e55557ddb88a1a9e94dd6f.gif.css","default.rtl":"embed/timeline.a859548807e55557ddb88a1a9e94dd6f.default.rtl.css","2x.rtl":"embed/timeline.a859548807e55557ddb88a1a9e94dd6f.2x.rtl.css","gif.rtl":"embed/timeline.a859548807e55557ddb88a1a9e94dd6f.gif.rtl.css"}},a=function(){return/^http\:$/.test(window.location.protocol)?function(e){return e?"https":"http"}:function(){return"https"}}();t.exports={builtUrl:n,base:r}},{"globals/private":14,"util/env":51,"util/util":65}],34:[function(e,t){function n(e){return function(t){t.error?e.error&&e.error(t):t.headers&&200!=t.headers.status?(e.error&&e.error(t),u.warn(t.headers.message)):e.success&&e.success(t),e.complete&&e.complete(t),r(e)}}function r(e){var t=e.script;t&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),e.script=void 0,t=void 0),e.callbackName&&o.delete(["callbacks",e.callbackName])}function i(e){var t={};return e.success&&a.isType("function",e.success)&&(t.success=e.success),e.error&&a.isType("function",e.error)&&(t.error=e.error),e.complete&&a.isType("function",e.complete)&&(t.complete=e.complete),t}var s=e("assets/refresh"),o=e("globals/private"),u=e("util/logger"),a=e("util/util"),f=e("util/querystring"),l="cb",c=0,h=!1,p={},d=a.aug({tweets:"https://syndication.twitter.com/tweets.json",timeline:"https://cdn.syndication.twimg.com/widgets/timelines/",timelinePoll:"https://syndication.twitter.com/widgets/timelines/paged/",timelinePreview:"https://syndication.twitter.com/widgets/timelines/preview/",videos:"https://syndication.twitter.com/widgets/video/"},o.get("endpoints")||{});p.jsonp=function(e,t,r){var i=r||l+c,s=o.fullPath(["callbacks",i]),u=document.createElement("script"),a={callback:s,suppress_response_codes:!0};o.set(["callbacks",i],n(t)),(h||!/^https?\:$/.test(window.location.protocol))&&(e=e.replace(/^\/\//,"https://")),u.src=f.url(e,a),u.async="async",document.body.appendChild(u),t.script=u,t.callbackName=i,r||c++},p.config=function(e){(e.forceSSL===!0||e.forceSSL===!1)&&(h=e.forceSSL)},p.tweets=function(e){var t,n=i(e),r={ids:e.ids.join(","),lang:e.lang};s.isEnabled()&&(r.new_html=!0),t=f.url(d.tweets,r),this.jsonp(t,n)},p.videos=function(e){var t=i(e),n={ids:e.ids.join(","),lang:e.lang},r=f.url(d.videos,n);this.jsonp(r,t)},p.timeline=function(e){var t,n=i(e),r=9e5,s=Math.floor(+(new Date)/r),o={lang:e.lang,t:s,domain:window.location.host,dnt:e.dnt,override_type:e.overrideType,override_id:e.overrideId,override_name:e.overrideName,override_owner_id:e.overrideOwnerId,override_owner_name:e.overrideOwnerName,with_replies:e.withReplies};a.compact(o),t=f.url(d.timeline+e.id,o),this.jsonp(t,n,"tl_"+e.id+"_"+e.instanceId)},p.timelinePoll=function(e){var t,n=i(e),r={lang:e.lang,since_id:e.sinceId,max_id:e.maxId,min_position:e.minPosition,max_position:e.maxPosition,domain:window.location.host,dnt:e.dnt,override_type:e.overrideType,override_id:e.overrideId,override_name:e.overrideName,override_owner_id:e.overrideOwnerId,override_owner_name:e.overrideOwnerName,with_replies:e.withReplies};a.compact(r),t=f.url(d.timelinePoll+e.id,r),this.jsonp(t,n,"tlPoll_"+e.id+"_"+e.instanceId+"_"+(e.sinceId||e.maxId||e.maxPosition||e.minPosition))},p.timelinePreview=function(e){var t=i(e),n=e.params,r=f.url(d.timelinePreview,n);this.jsonp(r,t)},t.exports=p},{"assets/refresh":3,"globals/private":14,"util/logger":55,"util/querystring":59,"util/util":65}],35:[function(e,t){function n(){var e=36e5,t=i.combined(document.location)._;return void 0!==r?r:(r=!1,t&&/^\d+$/.test(t)&&(r=+(new Date)-parseInt(t)<e),r)}var r,i=e("util/params");t.exports={isDynamicWidget:n}},{"util/params":57}],36:[function(e,t){function n(e,t){return 2==e||3==e&&0===+t}function r(e){var t=e.split(" ");this.url=decodeURIComponent(t[0].trim()),this.width=+t[1].replace(/w$/,"").trim()}function i(e,t,n){var i,s,o,u;if(e=window.devicePixelRatio?e*window.devicePixelRatio:e,s=t.split(",").map(function(e){return new r(e)}),n)for(u=0;u<s.length;u++)s[u].url===n&&(i=s[u]);return o=s.reduce(function(t,n){return n.width<t.width&&n.width>=e?n:t},s[0]),i&&i.width>o.width?i:o}function s(e,t){var n,r=e.getAttribute("data-srcset"),s=e.src;r&&(n=i(t,r,s),e.src=n.url)}function o(e,t){t=void 0!==t?!!t:c.retina(),t&&l.toRealArray(e.getElementsByTagName("IMG")).forEach(function(e){var t=e.getAttribute("data-src-2x");t&&(e.src=t)})}function u(e,t,r,i){var o=0,u=e.querySelector(".multi-photo"),c=u&&+u.getAttribute("data-photo-count");if(e)return l.toRealArray(e.querySelectorAll(".autosized-media")).forEach(function(e){var n=a(e.getAttribute("data-width"),e.getAttribute("data-height"),t,r);i(function(){s(e,t),e.width=n.width,e.height=n.height,f(e,n)}),o=n.height>o?n.height:o}),l.toRealArray(e.querySelectorAll("img.cropped-media")).forEach(function(e){var u,f,l,h=t-12,g=e.parentNode,y=e.getAttribute("data-crop-x")||0,b=e.getAttribute("data-crop-y")||0,w=n(c,e.getAttribute("data-image-index")),E=Math.floor(h/2-p),S=Math.floor(E/(w?d:v));w||(S-=p/2),l=a(e.getAttribute("data-width"),e.getAttribute("data-height"),E,r,E,S),u=l.width-E-y,f=l.height-S-b,0>u&&Math.max(0,y+=u),0>f&&Math.max(0,b+=f),i(function(){s(e,E),e.width=l.width,e.height=l.height,g.style.width=E-1+"px",g.style.height=S+"px",y&&(e.style.marginLeft="-"+Math.floor(l.width*y/100)+"px"),b&&(e.style.marginTop="-"+Math.floor(l.height*b/100)+"px")}),o=l.height*(w?2:1)>o?l.height:o}),o}function a(e,t,n,r,i,s){return n=n||e,r=r||t,i=i||0,s=s||0,e>n&&(t*=n/e,e=n),t>r&&(e*=r/t,t=r),i>e&&(t*=i/e,e=i),s>t&&(e*=s/t,t=s),{width:Math.floor(e),height:Math.floor(t)}}function f(e,t){function n(){var e={name:"tfw:resize",dimensions:t};i.postMessage(e,"*")}var r,i,s,o,u;e&&(i=e.contentWindow,r=e.ownerDocument&&e.ownerDocument.defaultView,s=c.ios()||c.android(),o=h.isTwitterURL(e.src),u=i&&c.canPostMessage(i),s&&o&&u&&(n(),r&&r.addEventListener("message",function(e){"tfw:requestsize"===e.data&&n()},!1)))}var l=e("util/util"),c=e("util/env"),h=e("util/twitter"),p=6,d=8/9,v=16/9;t.exports={scaleDimensions:a,retinize:o,constrainMedia:u,__setSrcFromSet:s}},{"util/env":51,"util/twitter":61,"util/util":65}],37:[function(e,t){var n=e("util/querystring"),r=e("util/twitter");t.exports=function(e,t){return function(s){var o,u,a="data-tw-params";if(s&&r.isTwitterURL(s.href)&&!s.getAttribute(a)){if(s.setAttribute(a,!0),"function"==typeof t){o=t.call(this,s);for(u in o)o.hasOwnProperty(u)&&(e[u]=o[u])}s.href=n.url(s.href,e)}}}},{"util/querystring":59,"util/twitter":61}],38:[function(e,t){function n(e){var t,n=this;e&&(e.ownerDocument?(this.srcEl=e,this.classAttr=e.className.split(" ")):(this.srcOb=e,this.classAttr=[]),t=this.params(),this.id=this.generateId(),this.setLanguage(),this.related=t.related||this.dataAttr("related"),this.partner=t.partner||this.dataAttr("partner")||d.val("partner"),this.styleAttr=[],this.targetEl=e.targetEl,h.asBoolean(t.dnt||this.dataAttr("dnt"))&&v.setOn(),w[this.id]=this,this.completePromise=new l(function(e){n.completeResolver=e}),this.completed().then(function(e){e&&e!=document.body&&y.get("events").trigger("rendered",{target:e})}))}function r(){E.forEach(function(e){e()}),n.doLayout()}function i(e){return e?e.lang?e.lang:i(e.parentNode):void 0}var s,o=e("tfw/util/assets"),u=e("performance/perf-timers"),a=e("util/iframe"),f=e("util/layout"),l=e("util/promise"),c=e("util/querystring"),h=e("util/typevalidator"),p=e("util/util"),d=e("globals/pagemetadata"),v=e("util/donottrack"),m=e("util/logger"),g=e("util/document"),y=e("globals/twttr"),b=0,w={},E=[],S=new f,x="data-twttr-rendered",T={ar:{"%{followers_count} followers":"عدد المتابعين %{followers_count}","100K+":"+100 ألف","10k unit":"10 آلاف وحدة",Follow:"تابِع","Follow %{screen_name}":"تابِع %{screen_name}",K:"ألف",M:"م",Tweet:"غرِّد","Tweet %{hashtag}":"غرِّد %{hashtag}","Tweet to %{name}":"غرِّد لـ %{name}"},bn:{"Follow %{screen_name}":"%{screen_name}-কে অনুসরণ করুন"},cs:{"Follow %{screen_name}":"Sledovat uživatele %{screen_name}"},da:{"%{followers_count} followers":"%{followers_count} følgere","10k unit":"10k enhed",Follow:"Følg","Follow %{screen_name}":"Følg %{screen_name}","Tweet to %{name}":"Tweet til %{name}"},de:{"%{followers_count} followers":"%{followers_count} Follower","100K+":"100Tsd+","10k unit":"10tsd-Einheit",Follow:"Folgen","Follow %{screen_name}":"%{screen_name} folgen",K:"Tsd",Tweet:"Twittern","Tweet to %{name}":"Tweet an %{name}"},es:{"%{followers_count} followers":"%{followers_count} seguidores","10k unit":"unidad de 10 mil",Follow:"Seguir","Follow %{screen_name}":"Seguir a %{screen_name}",Tweet:"Twittear","Tweet %{hashtag}":"Twittear %{hashtag}","Tweet to %{name}":"Twittear a %{name}"},fa:{"%{followers_count} followers":"%{followers_count} دنبال‌کننده","100K+":">۱۰۰هزار","10k unit":"۱۰هزار واحد",Follow:"دنبال کردن","Follow %{screen_name}":"دنبال کردن %{screen_name}",K:"هزار",M:"میلیون",Tweet:"توییت","Tweet %{hashtag}":"توییت کردن %{hashtag}","Tweet to %{name}":"به %{name} توییت کنید"},fi:{"%{followers_count} followers":"%{followers_count} seuraajaa","100K+":"100 000+","10k unit":"10 000 yksikköä",Follow:"Seuraa","Follow %{screen_name}":"Seuraa käyttäjää %{screen_name}",K:"tuhatta",M:"milj.",Tweet:"Twiittaa","Tweet %{hashtag}":"Twiittaa %{hashtag}","Tweet to %{name}":"Twiittaa käyttäjälle %{name}"},fil:{"%{followers_count} followers":"%{followers_count} mga tagasunod","10k unit":"10k yunit",Follow:"Sundan","Follow %{screen_name}":"Sundan si %{screen_name}",Tweet:"I-tweet","Tweet %{hashtag}":"I-tweet ang %{hashtag}","Tweet to %{name}":"Mag-Tweet kay %{name}"},fr:{"%{followers_count} followers":"%{followers_count} abonnés","10k unit":"unité de 10k",Follow:"Suivre","Follow %{screen_name}":"Suivre %{screen_name}",Tweet:"Tweeter","Tweet %{hashtag}":"Tweeter %{hashtag}","Tweet to %{name}":"Tweeter à %{name}"},he:{"%{followers_count} followers":"%{followers_count} עוקבים","100K+":"מאות אלפים","10k unit":"עשרות אלפים",Follow:"מעקב","Follow %{screen_name}":"לעקוב אחר %{screen_name}",K:"אלף",M:"מיליון",Tweet:"ציוץ","Tweet %{hashtag}":"צייצו %{hashtag}","Tweet to %{name}":"ציוץ אל %{name}"},hi:{"%{followers_count} followers":"%{followers_count} फ़ॉलोअर्स","100K+":"1 लाख से अधिक","10k unit":"10 हजार इकाईयां",Follow:"फ़ॉलो","Follow %{screen_name}":"%{screen_name} को फ़ॉलो करें",K:"हजार",M:"मिलियन",Tweet:"ट्वीट","Tweet %{hashtag}":"ट्वीट %{hashtag}","Tweet to %{name}":"%{name} के प्रति ट्वीट करें"},hu:{"%{followers_count} followers":"%{followers_count} követő","100K+":"100E+","10k unit":"10E+",Follow:"Követés","Follow %{screen_name}":"%{screen_name} követése",K:"E","Tweet %{hashtag}":"%{hashtag} tweetelése","Tweet to %{name}":"Tweet küldése neki: %{name}"},id:{"%{followers_count} followers":"%{followers_count} pengikut","100K+":"100 ribu+","10k unit":"10 ribu unit",Follow:"Ikuti","Follow %{screen_name}":"Ikuti %{screen_name}",K:"&nbsp;ribu",M:"&nbsp;juta","Tweet to %{name}":"Tweet ke %{name}"},it:{"%{followers_count} followers":"%{followers_count} follower","10k unit":"10k unità",Follow:"Segui","Follow %{screen_name}":"Segui %{screen_name}","Tweet %{hashtag}":"Twitta %{hashtag}","Tweet to %{name}":"Twitta a %{name}"},ja:{"%{followers_count} followers":"%{followers_count}人のフォロワー","100K+":"100K以上","10k unit":"万",Follow:"フォローする","Follow %{screen_name}":"%{screen_name}さんをフォロー",Tweet:"ツイート","Tweet %{hashtag}":"%{hashtag} をツイートする","Tweet to %{name}":"%{name}さんへツイートする"},ko:{"%{followers_count} followers":"%{followers_count}명의 팔로워","100K+":"100만 이상","10k unit":"만 단위",Follow:"팔로우","Follow %{screen_name}":"%{screen_name} 님 팔로우하기",K:"천",M:"백만",Tweet:"트윗","Tweet %{hashtag}":"%{hashtag} 관련 트윗하기","Tweet to %{name}":"%{name} 님에게 트윗하기"},msa:{"%{followers_count} followers":"%{followers_count} pengikut","100K+":"100 ribu+","10k unit":"10 ribu unit",Follow:"Ikut","Follow %{screen_name}":"Ikut %{screen_name}",K:"ribu",M:"juta","Tweet to %{name}":"Tweet kepada %{name}"},nl:{"%{followers_count} followers":"%{followers_count} volgers","100K+":"100k+","10k unit":"10k-eenheid",Follow:"Volgen","Follow %{screen_name}":"%{screen_name} volgen",K:"k",M:" mln.",Tweet:"Tweeten","Tweet %{hashtag}":"%{hashtag} tweeten","Tweet to %{name}":"Tweeten naar %{name}"},no:{"%{followers_count} followers":"%{followers_count} følgere","100K+":"100 K+","10k unit":"10-K-enhet",Follow:"Følg","Follow %{screen_name}":"Følg %{screen_name}","Tweet to %{name}":"Send en tweet til %{name}"},pl:{"%{followers_count} followers":"%{followers_count} obserwujących","100K+":"100 tys.+","10k unit":"10 tys.",Follow:"Obserwuj","Follow %{screen_name}":"Obserwuj %{screen_name}",K:"tys.",M:"mln",Tweet:"Tweetnij","Tweet %{hashtag}":"Tweetnij %{hashtag}","Tweet to %{name}":"Tweetnij do %{name}"},pt:{"%{followers_count} followers":"%{followers_count} seguidores","100K+":"+100 mil","10k unit":"10 mil unidades",Follow:"Seguir","Follow %{screen_name}":"Seguir %{screen_name}",K:"Mil",Tweet:"Tweetar","Tweet %{hashtag}":"Tweetar %{hashtag}","Tweet to %{name}":"Tweetar para %{name}"},ro:{"Follow %{screen_name}":"Urmăreşte pe %{screen_name}"},ru:{"%{followers_count} followers":"Читатели: %{followers_count} ","100K+":"100 тыс.+","10k unit":"блок 10k",Follow:"Читать","Follow %{screen_name}":"Читать %{screen_name}",K:"тыс.",M:"млн.",Tweet:"Твитнуть","Tweet %{hashtag}":"Твитнуть %{hashtag}","Tweet to %{name}":"Твитнуть %{name}"},sv:{"%{followers_count} followers":"%{followers_count} följare","10k unit":"10k",Follow:"Följ","Follow %{screen_name}":"Följ %{screen_name}",Tweet:"Tweeta","Tweet %{hashtag}":"Tweeta %{hashtag}","Tweet to %{name}":"Tweeta till %{name}"},th:{"%{followers_count} followers":"%{followers_count} ผู้ติดตาม","100K+":"100พัน+","10k unit":"หน่วย 10พัน",Follow:"ติดตาม","Follow %{screen_name}":"ติดตาม %{screen_name}",M:"ล้าน",Tweet:"ทวีต","Tweet %{hashtag}":"ทวีต %{hashtag}","Tweet to %{name}":"ทวีตถึง %{name}"},tr:{"%{followers_count} followers":"%{followers_count} takipçi","100K+":"+100 bin","10k unit":"10 bin birim",Follow:"Takip et","Follow %{screen_name}":"Takip et: %{screen_name}",K:"bin",M:"milyon",Tweet:"Tweetle","Tweet %{hashtag}":"Tweetle: %{hashtag}","Tweet to %{name}":"Tweetle: %{name}"},uk:{"Follow %{screen_name}":"Читати %{screen_name}"},ur:{"%{followers_count} followers":"%{followers_count} فالورز","100K+":"ایک لاکھ سے زیادہ","10k unit":"دس ہزار یونٹ",Follow:"فالو کریں","Follow %{screen_name}":"%{screen_name} کو فالو کریں",K:"ہزار",M:"ملین",Tweet:"ٹویٹ کریں","Tweet %{hashtag}":"%{hashtag} ٹویٹ کریں","Tweet to %{name}":"%{name} کو ٹویٹ کریں"},vi:{"Follow %{screen_name}":"Theo dõi %{screen_name}"},"zh-cn":{"%{followers_count} followers":"%{followers_count} 关注者","100K+":"10万+","10k unit":"1万单元",Follow:"关注","Follow %{screen_name}":"关注 %{screen_name}",K:"千",M:"百万",Tweet:"发推","Tweet %{hashtag}":"以 %{hashtag} 发推","Tweet to %{name}":"发推给 %{name}"},"zh-tw":{"%{followers_count} followers":"%{followers_count} 位跟隨者","100K+":"超過十萬","10k unit":"1萬 單位",Follow:"跟隨","Follow %{screen_name}":"跟隨 %{screen_name}",K:"千",M:"百萬",Tweet:"推文","Tweet %{hashtag}":"推文%{hashtag}","Tweet to %{name}":"推文給%{name}"}};p.aug(n.prototype,{setLanguage:function(e){var t;return e||(e=this.params().lang||this.dataAttr("lang")||i(this.srcEl)),(e=e&&e.toLowerCase())?T[e]?this.lang=e:(t=e.replace(/[\-_].*/,""),T[t]?this.lang=t:void (this.lang="en")):this.lang="en"},_:function(e,t){var n=this.lang;return t=t||{},n&&T.hasOwnProperty(n)||(n=this.lang="en"),e=T[n]&&T[n][e]||e,this.ringo(e,t,/%\{([\w_]+)\}/g)},ringo:function(e,t,n){return n=n||/\{\{([\w_]+)\}\}/g,e.replace(n,function(e,n){return void 0!==t[n]?t[n]:e})},makeIframeSource:function(){if(this.iframeSource){var e=c.encode(this.widgetUrlParams());return[o.base(),"/",this.ringo(this.iframeSource,{lang:this.lang}),"#",e].join("")}},add:function(e){w[this.id]=e},create:function(e,t,n){var r,i=this;return n[x]=!0,r=a(p.aug({id:this.id,src:e,"class":this.classAttr.join(" ")},n),t,this.targetEl&&this.targetEl.ownerDocument),this.srcEl?this.layout(function(){return i.srcEl.parentNode.replaceChild(r,i.srcEl),i.completeResolver.fulfill(r),r}):this.targetEl?this.layout(function(){return i.targetEl.appendChild(r),i.completeResolver.fulfill(r),r}):l.reject("Did not append widget")},params:function(){var e,t;return this.srcOb?t=this.srcOb:(e=this.srcEl&&this.srcEl.href&&this.srcEl.href.split("?")[1],t=e?c.decode(e):{}),this.params=function(){return t},t},widgetUrlParams:function(){return{}},dataAttr:function(e){return this.srcEl&&this.srcEl.getAttribute("data-"+e)},attr:function(e){return this.srcEl&&this.srcEl.getAttribute(e)},layout:function(e){return S.enqueue(e)},styles:{base:[["font","normal normal normal 11px/18px 'Helvetica Neue', Arial, sans-serif"],["margin","0"],["padding","0"],["whiteSpace","nowrap"]],button:[["fontWeight","bold"],["textShadow","0 1px 0 rgba(255,255,255,.5)"]],large:[["fontSize","13px"],["lineHeight","26px"]],vbubble:[["fontSize","16px"]]},width:function(){throw new Error(name+" not implemented")},height:function(){return"m"==this.size?20:28},minWidth:function(){},maxWidth:function(){},minHeight:function(){},maxHeight:function(){},dimensions:function(){function e(e){switch(typeof e){case"string":return e;case"undefined":return;default:return e+"px"}}var t={width:this.width(),height:this.height()};return this.minWidth()&&(t["min-width"]=this.minWidth()),this.maxWidth()&&(t["max-width"]=this.maxWidth()),this.minHeight()&&(t["min-height"]=this.minHeight()),this.maxHeight()&&(t["max-height"]=this.maxHeight()),p.forIn(t,function(n,r){t[n]=e(r)}),t},generateId:function(){return this.srcEl&&this.srcEl.id||"twitter-widget-"+b++},completed:function(){return this.completePromise}}),n.afterLoad=function(e){E.push(e)},n.doLayout=function(){S.exec()},n.doLayoutAsync=function(){S.delayedExec()},n.init=function(e){s=e},n.reset=function(){w={}},n.find=function(e){return e&&w[e]?w[e].element:null},n.embed=function(e){var t=[],i=[],o=[];h.isArray(e)||(e=[e||document]),m.time("sandboxes"),e.forEach(function(e){p.forIn(s,function(n,r){var i=e.querySelectorAll(n);p.toRealArray(i).forEach(function(e){var n;e.getAttribute(x)||(e.setAttribute(x,"true"),n=new r(e),t.push(n),o.push(n.sandboxCreated))})})}),l.every.apply(null,o).then(function(){m.timeEnd("sandboxes")}),n.doLayout(),t.forEach(function(e){i.push(e.completed()),e.render()}),l.every.apply(null,i).then(function(e){e=e.filter(function(e){return e}),e.length&&(y.get("events").trigger("loaded",{widgets:e}),m.timeEnd("load"))}).then(n.trackRender),n.doLayoutAsync(),r()},n.trackRender=function(){u.endAndTrack("render","widgets-js-load","page",{widget_origin:g.rootDocumentLocation(),widget_frame:g.isFramed()&&g.currentDocumentLocation()})},window.setInterval(function(){n.doLayout()},500),t.exports=n},{"globals/pagemetadata":13,"globals/twttr":15,"performance/perf-timers":19,"tfw/util/assets":33,"util/document":48,"util/donottrack":50,"util/iframe":53,"util/layout":54,"util/logger":55,"util/promise":58,"util/querystring":59,"util/typevalidator":62,"util/util":65}],39:[function(e,t){function n(e,t){var n=e.querySelector("blockquote.subject"),r=e.querySelector("blockquote.reply"),i=n&&n.getAttribute("data-tweet-id"),s=r&&r.getAttribute("data-tweet-id"),o={},u={};i&&(o[i]={item_type:0},b.clientEvent({page:"tweet",section:"subject",component:"tweet",action:"results"},v.aug({},t,{item_ids:[i],item_details:o}),!0),y.scribeTweetAudienceImpression(),s&&(u[s]={item_type:0},b.clientEvent({page:"tweet",section:"conversation",component:"tweet",action:"results"},v.aug({},t,{item_ids:[s],item_details:u,associations:{4:{association_id:i,association_type:4}}}),!0)))}function r(e,t){var n={};e&&(n[e]={item_type:0},b.clientEvent({page:"tweet",section:"subject",component:"rawembedcode",action:"no_results"},{widget_origin:E.rootDocumentLocation(),widget_frame:E.isFramed()&&E.currentDocumentLocation(),message:t,item_ids:[e],item_details:n},!0),y.scribeTweetAudienceImpression())}function i(e,t,n,r){T[e]=T[e]||[],T[e].push({s:n,f:r,lang:t})}function s(e){if(e){var t,n,r;a.apply(this,[e]),t=this.params(),n=this.srcEl&&this.srcEl.getElementsByTagName("A"),r=n&&n[n.length-1],this.hideThread="none"==(t.conversation||this.dataAttr("conversation"))||v.contains(this.classAttr,"tw-hide-thread"),this.hideCard="hidden"==(t.cards||this.dataAttr("cards"))||v.contains(this.classAttr,"tw-hide-media"),"left"==(t.align||this.attr("align"))||v.contains(this.classAttr,"tw-align-left")?this.align="left":"right"==(t.align||this.attr("align"))||v.contains(this.classAttr,"tw-align-right")?this.align="right":("center"==(t.align||this.attr("align"))||v.contains(this.classAttr,"tw-align-center"))&&(this.align="center",this.containerWidth>this.dimensions.MIN_WIDTH*(1/.7)&&this.width>.7*this.containerWidth&&(this.width=.7*this.containerWidth)),this.narrow=t.narrow||this.width<=this.dimensions.NARROW_WIDTH,this.narrow&&this.classAttr.push("var-narrow"),this.tweetId=t.tweetId||r&&m.status(r.href)}}var o=e("assets/css"),u=e("tfw/widget/base"),a=e("tfw/widget/syndicatedbase"),f=e("util/datetime"),l=e("tfw/util/params"),c=e("dom/classname"),h=e("dom/get"),p=e("performance/perf-timers"),d=e("util/promise"),v=e("util/util"),m=e("util/twitter"),g=e("tfw/util/data"),y=e("scribe/audience"),b=e("scribe/frame"),w=e("tfw/util/media"),E=e("util/document"),S=e("globals/twttr"),x="tweetembed",T={},N=[];s.prototype=new a,v.aug(s.prototype,{renderedClassNames:"twitter-tweet twitter-tweet-rendered",dimensions:{DEFAULT_HEIGHT:"0",DEFAULT_WIDTH:"500",NARROW_WIDTH:"350",maxHeight:"375",FULL_BLEED_PHOTO_MAX_HEIGHT:"600",MIN_WIDTH:"220",MIN_HEIGHT:"0",WIDE_MEDIA_PADDING:32,NARROW_MEDIA_PADDING:32,BORDERS:0},styleSheetUrl:o.tweet,create:function(e){var t,r,i=this,s=this.sandbox.createElement("div");return s.innerHTML=e,(t=s.children[0]||!1)?("dark"==this.theme&&this.classAttr.push("thm-dark"),this.linkColor&&this.addSiteStyles(),c.present(t,"media-forward")&&(this.fullBleedPhoto=!0,this.dimensions.maxHeight=this.dimensions.FULL_BLEED_PHOTO_MAX_HEIGHT),w.retinize(t),t.id=this.id,t.className+=" "+this.classAttr.join(" "),t.lang=this.lang,this.sandbox.setTitle(t.getAttribute("data-iframe-title")||"Tweet"),this.sandbox.appendChild(t).then(function(){i.renderResolver.fulfill(i.sandbox)}),this.sandbox.style({cssText:"",display:"block",maxWidth:"99%",minWidth:this.dimensions.MIN_WIDTH+"px",padding:"0",borderRadius:"5px",margin:"10px 0",border:"#ddd 1px solid",borderTopColor:"#eee",borderBottomColor:"#bbb",boxShadow:"0 1px 3px rgba(0,0,0,0.15)",position:"absolute",visibility:"hidden"}),r=this.layout(function(){i.predefinedWidth=i.width,i.width=i.sandbox.width(i.width),i.collapseRegions()}),r.then(function(){i.constrainMedia(t,i.contentWidth(i.width)),i.setNarrow().then(function(){i.layout(function(){i.completeResolver.fulfill(i.sandbox.element())})})}),n(t,this.baseScribeData(),this.partner),t):void 0},render:function(){var e=this,t="",n=this.tweetId;return n?(this.hideCard&&(t+="c"),this.hideThread&&(t+="t"),t&&(n+="-"+t),this.rendered().then(function(t){var n=e.srcEl;n&&n.parentNode&&e.layout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)}),"center"==e.align?t.style({margin:"7px auto",cssFloat:"none"}):e.align&&(e.width==e.dimensions.DEFAULT_WIDTH&&(e.predefinedWidth=e.width=e.dimensions.NARROW_WIDTH),t.style({cssFloat:e.align})),e.layout(function(){e.height=e.sandbox.height(e.element.offsetHeight)}).then(function(){return u.doLayoutAsync(),e.layout(function(){e.height=e.sandbox.height(e.element.offsetHeight)})}).then(function(){t.onresize(e.handleResize.bind(e))}),t.style({position:"static",visibility:"visible"}),u.doLayoutAsync()}),i(n,this.lang,function(t){e.ready().then(function(){e.element=e.create(t),e.readTimestampTranslations(),e.updateTimeStamps(),e.bindIntentHandlers(),u.doLayoutAsync()})},function(){r(e.tweetId,e.partner),e.completeResolver.fulfill(e.srcEl)}),N.push(this.completed()),this.completed().then(this.scribePerformance.bind(this)),this.completed()):(this.completeResolver.fulfill(this.srcEl),this.completed())},scribePerformance:function(){p.endAndTrack("render","widgets-js-load","tweet",this.baseScribeData())},addUrlParams:function(e){var t=this,n={related:this.related,partner:this.partner,original_referer:E.rootDocumentLocation(),tw_p:x};return this.addUrlParams=l(n,function(e){var n=h.closest(".tweet",e,t.element);return{tw_i:n.getAttribute("data-tweet-id")}}),this.addUrlParams(e)},baseScribeData:function(){return{widget_origin:E.rootDocumentLocation(),widget_frame:E.isFramed()&&E.currentDocumentLocation(),message:this.partner}},handleResize:function(e){var t=this;e!=this.width&&(this.width=e,this.setNarrow(),this.constrainMedia(this.element,this.contentWidth(e)),this.collapseRegions(),this.layout(function(){t.height=t.sandbox.height(t.element.offsetHeight),S.get("events").trigger("resize",{target:t.sandbox.element()})}),u.doLayoutAsync())},readTimestampTranslations:function(){var e=this.element,t="data-dt-",n=e.getAttribute(t+"months")||"";this.datetime=new f(v.compact({phrases:{AM:e.getAttribute(t+"am"),PM:e.getAttribute(t+"pm")},months:n.split("|"),formats:{full:e.getAttribute(t+"full")}}))},updateTimeStamps:function(){var e=this.element.querySelector(".long-permalink"),t=e.getAttribute("data-datetime"),n=t&&this.datetime.localTimeStamp(t),r=e.getElementsByTagName("TIME")[0];n&&(this.layout(function(){return r&&r.innerHTML?void (r.innerHTML=n):void (e.innerHTML=n)},"Update Timestamp"),u.doLayoutAsync())}}),s.fetchAndRender=function(){var e,t,n=T,r=[];if(T={},n.keys)r=n.keys();else for(e in n)n.hasOwnProperty(e)&&r.push(e);r.length&&(b.init(),t=n[r[0]][0].lang,g.tweets({ids:r.sort(),lang:t,complete:function(e){v.forIn(e,function(e,t){var r=n[e];r.forEach(function(e){e.s&&e.s.call(this,t)}),delete n[e]}),u.doLayout(),v.forIn(n,function(e,t){t.forEach(function(t){t.f&&t.f.call(this,e)})}),u.doLayout()}}),d.every.apply(null,N).then(function(){b.flush()}),N=[])},u.afterLoad(s.fetchAndRender),t.exports=s},{"assets/css":2,"dom/classname":5,"dom/get":7,"globals/twttr":15,"performance/perf-timers":19,"scribe/audience":26,"scribe/frame":27,"tfw/util/data":34,"tfw/util/media":36,"tfw/util/params":37,"tfw/widget/base":38,"tfw/widget/syndicatedbase":42,"util/datetime":47,"util/document":48,"util/promise":58,"util/twitter":61,"util/util":65}],40:[function(e,t){function n(e){if(e){var t,n,r,i;s.apply(this,[e]),t=this.params(),n=t.size||this.dataAttr("size"),r=t.showScreenName||this.dataAttr("show-screen-name"),i=t.count||this.dataAttr("count"),this.classAttr.push("twitter-follow-button"),this.showScreenName="false"!=r,this.showCount=t.showCount!==!1&&"false"!=this.dataAttr("show-count"),"none"==i&&(this.showCount=!1),this.explicitWidth=t.width||this.dataAttr("width")||"",this.screenName=t.screen_name||t.screenName||o.screenName(this.attr("href")),this.preview=t.preview||this.dataAttr("preview")||"",this.align=t.align||this.dataAttr("align")||"",this.size="large"==n?"l":"m"}}var r=e("util/donottrack"),i=e("util/util"),s=e("tfw/widget/base"),o=e("util/twitter"),u=e("util/promise"),a=e("dom/textsize");n.prototype=new s,i.aug(n.prototype,{iframeSource:"widgets/follow_button.a5bbbb7216610af1306d56b0f28a67d7.{{lang}}.html",widgetUrlParams:function(){return i.compact({screen_name:this.screenName,lang:this.lang,show_count:this.showCount,show_screen_name:this.showScreenName,align:this.align,id:this.id,preview:this.preview,size:this.size,partner:this.partner,dnt:r.enabled(),_:+(new Date)})},width:function(){if(this.calculatedWidth)return this.calculatedWidth;if(this.explicitWidth)return this.explicitWidth;var e,t,n={cnt:13,btn:24,xlcnt:22,xlbtn:38},r=this.showScreenName?"Follow %{screen_name}":"Follow",s=this._(r,{screen_name:"@"+this.screenName}),o=this._(i.contains(["ja","ko"],this.lang)?"10k unit":"M"),u=this._("%{followers_count} followers",{followers_count:"88888"+o}),f=0,c=0,h=this.styles.base;return"l"==this.size?(h=h.concat(this.styles.large),e=n.xlbtn,t=n.xlcnt):(e=n.btn,t=n.cnt),this.showCount&&(c=a(u,"",h).width+t),f=a(s,"",h.concat(this.styles.button)).width+e,this.calculatedWidth=f+c},render:function(){if(!this.screenName)return u.reject("Missing Screen Name");var e=this,t=this.makeIframeSource(),n=this.create(t,this.dimensions(),{title:this._("Twitter Follow Button")}).then(function(t){return e.element=t});return n}}),t.exports=n},{"dom/textsize":9,"tfw/widget/base":38,"util/donottrack":50,"util/promise":58,"util/twitter":61,"util/util":65}],41:[function(e,t){function n(e){h.open(e)}function r(t,n){var r=e("tfw/hub/client");r.openIntent(t,n)}function i(e,t){if(c.isTwitterURL(e))if(d.get("eventsHub")&&t){var i=new s(u.generateId(),t);u.add(i),r(e,t),p.get("events").trigger("click",{target:t,region:"intent",type:"click",data:{}})}else n(e)}function s(e,t){this.id=e,this.element=this.srcEl=t}function o(e){this.srcEl=[],this.element=e}var u,a=e("tfw/widget/base"),f=e("util/util"),l=e("util/promise"),c=e("util/twitter"),h=e("intents/intent"),p=e("globals/twttr"),d=e("globals/private");o.prototype=new a,f.aug(o.prototype,{render:function(){return u=this,l.fulfill(document.body)}}),o.open=i,t.exports=o},{"globals/private":14,"globals/twttr":15,"intents/intent":18,"tfw/hub/client":31,"tfw/widget/base":38,"util/promise":58,"util/twitter":61,"util/util":65}],42:[function(e,t){function n(){s=r.VALID_COLOR.test(l.val("widgets:link-color"))&&RegExp.$1,u=r.VALID_COLOR.test(l.val("widgets:border-color"))&&RegExp.$1,o=l.val("widgets:theme")}function r(e){if(e){var t,n=this;this.readyPromise=new w(function(e){n.readyResolver=e}),this.renderedPromise=new w(function(e){n.renderResolver=e}),a.apply(this,[e]),t=this.params(),this.targetEl=this.srcEl&&this.srcEl.parentNode||t.targetEl||document.body,this.predefinedWidth=r.VALID_UNIT.test(t.width||this.attr("width"))&&RegExp.$1,this.layout(function(){return n.containerWidth=g.effectiveWidth(n.targetEl)}).then(function(e){var i=n.predefinedWidth||e||n.dimensions.DEFAULT_WIDTH;n.height=r.VALID_UNIT.test(t.height||n.attr("height"))&&RegExp.$1,n.width=Math.max(n.dimensions.MIN_WIDTH,Math.min(i,n.dimensions.DEFAULT_WIDTH))}),this.linkColor=r.VALID_COLOR.test(t.linkColor||this.dataAttr("link-color"))?RegExp.$1:s,this.borderColor=r.VALID_COLOR.test(t.borderColor||this.dataAttr("border-color"))?RegExp.$1:u,this.theme=t.theme||this.attr("data-theme")||o,this.theme=/(dark|light)/.test(this.theme)?this.theme:"",this.classAttr.push(b.touch()?"is-touch":"not-touch"),b.ie9()&&this.classAttr.push("ie9"),this.sandboxCreated=y.createSandbox({"class":this.renderedClassNames,id:this.id,allowfullscreen:""},{width:"1px",height:"0px",border:"none",position:"absolute",visibility:"hidden"},function(e){n.srcEl?n.targetEl.insertBefore(e,n.srcEl):n.targetEl.appendChild(e)},this.layout).then(function(e){n.setupSandbox(e),new p(e.element().contentWindow)})}}function i(e,t){return e+t}var s,o,u,a=e("tfw/widget/base"),f=e("tfw/widget/intent"),l=e("globals/pagemetadata"),c=e("tfw/util/media"),h=e("scribe/pixel"),p=e("video/video_post_message_interface"),d=e("dom/classname"),v=e("dom/get"),m=e("dom/delegate"),g=e("dom/size"),y=e("sandbox/frame"),b=e("util/env"),w=e("util/promise"),E=e("util/twitter"),S=e("util/typevalidator"),x=e("util/util"),T=[".customisable",".customisable:link",".customisable:visited",".customisable:hover",".customisable:focus",".customisable:active",".customisable-highlight:hover",".customisable-highlight:focus","a:hover .customisable-highlight","a:focus .customisable-highlight"],N=["a:hover .ic-mask","a:focus .ic-mask"],C=[".customisable-border"],k=[".timeline-header h1.summary",".timeline-header h1.summary a:link",".timeline-header h1.summary a:visited"],L={TWEET:0,RETWEET:10};r.prototype=new a,x.aug(r.prototype,{styleSheetUrl:function(){throw new Error("must set styleSheetUrl")},setupSandbox:function(e){var t=this;this.sandbox=e,w.some(e.appendCss("body{display:none}"),e.setBaseTarget("_blank"),e.appendStyleSheet(this.styleSheetUrl(this.lang))).then(function(){t.readyResolver.fulfill(e)})},ready:function(){return this.readyPromise},rendered:function(){return this.renderedPromise},contentWidth:function(e){var t=this.dimensions,n=this.borderless?0:t.BORDERS,r=this.fullBleedPhoto?0:this.chromeless&&this.narrow?t.NARROW_MEDIA_PADDING_CL:this.chromeless?t.WIDE_MEDIA_PADDING_CL:this.narrow?t.NARROW_MEDIA_PADDING:t.WIDE_MEDIA_PADDING;return(e||this.width)-(r+n)},addSiteStyles:function(){function e(e){return("dark"==t.theme?".thm-dark ":"")+e}var t=this,n=[];return this.headingStyle&&n.push(k.map(e).join(",")+"{"+this.headingStyle+"}"),this.linkColor&&(n.push(T.map(e).join(",")+"{color:"+this.linkColor+"}"),n.push(N.map(e).join(",")+"{background-color:"+this.linkColor+"}")),this.borderColor&&n.push(C.map(e).concat("dark"==this.theme?[".thm-dark.customisable-border"]:[]).join(",")+"{border-color:"+this.borderColor+"}"),n.length?this.sandbox.appendCss(n.join("")):void 0},setNarrow:function(){var e=this,t=this.narrow;return this.narrow=this.width<this.dimensions.NARROW_WIDTH,t!=this.narrow?this.layout(function(){return d.toggle(e.element,"var-narrow",e.narrow)}):w.fulfill(this.narrow)},bindIntentHandlers:function(){function e(e){var r=v.closest(".tweet",this,n),i=x.aug({},t.baseScribeData(),{item_ids:[],item_details:t.extractTweetScribeDetails(r)});x.forIn(i.item_details,function(e){i.item_ids.push(e)}),h.interaction(e,i,!0)}var t=this,n=this.element;m.delegate(n,"click","A",e),m.delegate(n,"click","BUTTON",e),m.delegate(n,"click",".profile",function(){t.addUrlParams(this)}),m.delegate(n,"click",".follow-button",function(e){var n;e.altKey||e.metaKey||e.shiftKey||b.ios()||b.android()||S.asBoolean(this.getAttribute("data-age-gate"))||(n=E.intentForFollowURL(this.href,!0),n&&(f.open(n,t.sandbox.element()),m.preventDefault(e)))}),m.delegate(n,"click",".web-intent",function(e){t.addUrlParams(this),e.altKey||e.metaKey||e.shiftKey||(f.open(this.href,t.sandbox.element()),m.preventDefault(e))})},baseScribeData:function(){return{}},extractTweetScribeDetails:function(e){var t,n,r={};return e?(t=e.getAttribute("data-tweet-id"),n=e.getAttribute("data-rendered-tweet-id")||t,n==t?r[n]={item_type:L.TWEET}:t&&(r[n]={item_type:L.RETWEET,target_type:L.TWEET,target_id:t}),r):r},constrainMedia:function(e,t){return c.constrainMedia(e||this.element,t||this.contentWidth(),this.dimensions.maxHeight,this.layout)},collapseRegions:function(){var e=this;x.toRealArray(this.element.querySelectorAll(".collapsible-container")).forEach(function(t){var n,r,s=x.toRealArray(t.children),o=s.length&&t.offsetWidth,u=s.length&&s.map(function(e){return e.offsetWidth}),a=s.length;if(s.length)for(;a>0;){if(a--,n=u.reduce(i,0),!o||!n)return;if(o>n)return;r=s[a].getAttribute("data-collapsed-class"),r&&(d.add(e.element,r),u[a]=s[a].offsetWidth)}})}}),r.VALID_UNIT=/^([0-9]+)( ?px)?$/,r.VALID_COLOR=/^(#(?:[0-9a-f]{3}|[0-9a-f]{6}))$/i,n(),t.exports=r},{"dom/classname":5,"dom/delegate":6,"dom/get":7,"dom/size":8,"globals/pagemetadata":13,"sandbox/frame":24,"scribe/pixel":28,"tfw/util/media":36,"tfw/widget/base":38,"tfw/widget/intent":41,"util/env":51,"util/promise":58,"util/twitter":61,"util/typevalidator":62,"util/util":65,"video/video_post_message_interface":67}],43:[function(e,t){function n(e){if(e){var t,n,r,i,o,u,a,f;s.apply(this,[e]),t=this.params(),n=(t.chrome||this.dataAttr("chrome")||"").split(" "),this.preview=t.previewParams,this.widgetId=t.widgetId||this.dataAttr("widget-id"),this.instanceId=++R,this.cursors={maxPosition:0,minPosition:0},this.override=(i=t.screenName||this.dataAttr("screen-name"))||(o=t.userId||this.dataAttr("user-id"))?{overrideType:"user",overrideId:o,overrideName:i,withReplies:m.asBoolean(t.showReplies||this.dataAttr("show-replies"))?"true":"false"}:(i=t.favoritesScreenName||this.dataAttr("favorites-screen-name"))||(o=t.favoritesUserId||this.dataAttr("favorites-user-id"))?{overrideType:"favorites",overrideId:o,overrideName:i}:((i=t.listOwnerScreenName||this.dataAttr("list-owner-screen-name"))||(o=t.listOwnerId||this.dataAttr("list-owner-id")))&&((u=t.listId||this.dataAttr("list-id"))||(a=t.listSlug||this.dataAttr("list-slug")))?{overrideType:"list",overrideOwnerId:o,overrideOwnerName:i,overrideId:u,overrideName:a}:(f=t.customTimelineId||this.dataAttr("custom-timeline-id"))?{overrideType:"custom",overrideId:f}:{},this.tweetLimit=m.asInt(t.tweetLimit||this.dataAttr("tweet-limit")),this.staticTimeline=this.tweetLimit>0,n.length&&(r=g.contains(n,"none"),this.chromeless=r||g.contains(n,"transparent"),this.headerless=r||g.contains(n,"noheader"),this.footerless=r||g.contains(n,"nofooter"),this.borderless=r||g.contains(n,"noborders"),this.noscrollbar=g.contains(n,"noscrollbar")),this.headingStyle=d.sanitize(t.headingStyle||this.dataAttr("heading-style"),void 0,!0),this.classAttr.push("twitter-timeline-rendered"),this.ariaPolite=t.ariaPolite||this.dataAttr("aria-polite")}}var r=e("assets/css"),i=e("tfw/widget/base"),s=e("tfw/widget/syndicatedbase"),o=e("util/datetime"),u=e("anim/transition"),a=e("performance/perf-timers"),f=e("tfw/util/data"),l=e("tfw/util/media"),c=e("scribe/audience"),h=e("scribe/frame"),p=e("tfw/util/params"),d=e("util/css"),v=e("util/env"),m=e("util/typevalidator"),g=e("util/util"),y=e("dom/delegate"),b=e("dom/classname"),w=e("dom/get"),E=e("util/donottrack"),S=e("util/document"),x=e("globals/twttr"),T=e("globals/private"),N={CLIENT_SIDE_USER:0,CLIENT_SIDE_APP:2},C=".timeline",k=".new-tweets-bar",L=".timeline-header",A=".timeline-footer",O=".stream",M=".h-feed",_=".tweet",D=".detail-expander",P=".expand",H=".permalink",B=".no-more-pane",j="expanded",F="pending-scroll-in",I="pending-new-tweet-display",q="pending-new-tweet",R=0;n.prototype=new s,g.aug(n.prototype,{renderedClassNames:"twitter-timeline twitter-timeline-rendered",dimensions:{DEFAULT_HEIGHT:"600",DEFAULT_WIDTH:"520",NARROW_WIDTH:"320",maxHeight:"375",MIN_WIDTH:"180",MIN_HEIGHT:"200",WIDE_MEDIA_PADDING:81,NARROW_MEDIA_PADDING:16,WIDE_MEDIA_PADDING_CL:60,NARROW_MEDIA_PADDING_CL:12,BORDERS:2},styleSheetUrl:r.timeline,create:function(e){var t,n,r,i,s=this,o=this.sandbox.createElement("div"),u=[];return o.innerHTML=e.body,(t=o.children[0]||!1)?(this.reconfigure(e.config),this.discardStaticOverflow(t),this.sandbox.setTitle(t.getAttribute("data-iframe-title")||"Timeline"),l.retinize(t),this.constrainMedia(t),this.searchQuery=t.getAttribute("data-search-query"),this.profileId=t.getAttribute("data-profile-id"),this.timelineType=t.getAttribute("data-timeline-type"),i=this.getTweetDetails(o.querySelector(M)),g.forIn(i,function(e){u.push(e)}),r=this.baseScribeData(),r.item_ids=u,r.item_details=i,this.timelineType&&h.clientEvent({page:this.timelineType+"_timeline",component:"timeline",element:"initial",action:u.length?"results":"no_results"},r,!0),h.clientEvent({page:"timeline",component:"timeline",element:"initial",action:u.length?"results":"no_results"},r,!0),c.scribeTimelineAudienceImpression(),h.flush(),"assertive"==this.ariaPolite&&(n=t.querySelector(k),n.setAttribute("aria-polite","assertive")),t.id=this.id,t.className+=" "+this.classAttr.join(" "),t.lang=this.lang,this.ready().then(function(e){e.appendChild(t).then(function(){s.renderResolver.fulfill(s.sandbox)}),e.style({cssText:"",border:"none",maxWidth:"100%",minWidth:s.dimensions.MIN_WIDTH+"px"}),s.layout(function(){s.srcEl&&s.srcEl.parentNode&&s.srcEl.parentNode.removeChild(s.srcEl),s.predefinedWidth=s.width,s.predefinedHeight=s.height,s.width=e.width(s.width),s.height=e.height(s.height)}).then(function(){s.setNarrow(),s.sandbox.onresize(s.handleResize.bind(s)),s.completeResolver.fulfill(s.sandbox.element())})}),t):void 0},render:function(){var e=this;return this.preview||this.widgetId?(this.rendered().then(this.staticTimeline?function(t){e.layout(function(){t.height(e.height=e.element.offsetHeight)}),i.doLayoutAsync()}:function(){e.recalculateStreamHeight(),i.doLayoutAsync()}),this.preview?this.getPreviewTimeline():this.getTimeline(),this.completed().then(this.scribePerformance.bind(this)),this.completed()):(this.completeResolver.reject(400),this.completed())},scribePerformance:function(){a.endAndTrack("render","widgets-js-load","timeline",this.baseScribeData())},getPreviewTimeline:function(){var e=this;f.timelinePreview({success:function(t){e.ready().then(function(){e.element=e.create(t),e.readTranslations(),e.bindInteractions(),e.updateCursors(t.headers,{initial:!0}),i.doLayoutAsync()})},error:function(t){return t&&t.headers?void e.completeResolver.reject(t.headers.status):void e.completeResolver.fulfill(e.srcEl)},params:this.preview})},getTimeline:function(){var e=this;h.init(),f.timeline(g.aug({id:this.widgetId,instanceId:this.instanceId,dnt:E.enabled(),lang:this.lang,success:function(t){e.ready().then(function(){e.element=e.create(t),e.readTranslations(),e.bindInteractions(),e.updateTimeStamps(),e.updateCursors(t.headers,{initial:!0}),t.headers.xPolling&&/\d/.test(t.headers.xPolling)&&(e.pollInterval=1e3*t.headers.xPolling),e.staticTimeline||e.schedulePolling(),i.doLayoutAsync()})},error:function(t){return t&&t.headers?void e.completeResolver.reject(t.headers.status):void e.completeResolver.fulfill(e.srcEl)}},this.override))},reconfigure:function(e){this.lang=e.lang,this.theme||(this.theme=e.theme),"dark"==this.theme&&this.classAttr.push("thm-dark"),this.chromeless&&this.classAttr.push("var-chromeless"),this.borderless&&this.classAttr.push("var-borderless"),this.headerless&&this.classAttr.push("var-headerless"),this.footerless&&this.classAttr.push("var-footerless"),this.staticTimeline&&this.classAttr.push("var-static"),!this.linkColor&&e.linkColor&&s.VALID_COLOR.test(e.linkColor)&&(this.linkColor=RegExp.$1),!this.height&&s.VALID_UNIT.test(e.height)&&(this.height=RegExp.$1),this.height=Math.max(this.dimensions.MIN_HEIGHT,this.height?this.height:this.dimensions.DEFAULT_HEIGHT),this.preview&&this.classAttr.push("var-preview"),this.narrow=this.width<=this.dimensions.NARROW_WIDTH,this.narrow&&this.classAttr.push("var-narrow"),this.addSiteStyles()},getTweetDetails:function(e){var t,n=this,r={};return t=e&&e.children||[],g.toRealArray(t).forEach(function(e){g.aug(r,n.extractTweetScribeDetails(e))}),r},baseScribeData:function(){return{widget_id:this.widgetId,widget_origin:S.rootDocumentLocation(),widget_frame:S.isFramed()&&S.currentDocumentLocation(),message:this.partner,query:this.searchQuery,profile_id:this.profileId}},bindInteractions:function(){var e=this,t=this.element,n=!0;this.bindIntentHandlers(),y.delegate(t,"click",".load-tweets",function(t){n&&(n=!1,e.forceLoad(),y.stop(t))}),y.delegate(t,"click",".display-sensitive-image",function(n){e.showNSFW(w.closest(_,this,t)),y.stop(n)}),y.delegate(t,"mouseover",C,function(){e.mouseOver=!0}),y.delegate(t,"mouseout",C,function(){e.mouseOver=!1}),y.delegate(t,"mouseover",k,function(){e.mouseOverNotifier=!0}),y.delegate(t,"mouseout",k,function(){e.mouseOverNotifier=!1,window.setTimeout(function(){e.hideNewTweetNotifier()},3e3)}),this.staticTimeline||(y.delegate(t,"click",P,function(n){n.altKey||n.metaKey||n.shiftKey||(e.toggleExpando(w.closest(_,this,t)),y.stop(n))}),y.delegate(t,"click","A",function(e){y.stopPropagation(e)}),y.delegate(t,"click",".with-expansion",function(t){e.toggleExpando(this),y.stop(t)}),y.delegate(t,"click",".load-more",function(){e.loadMore()}),y.delegate(t,"click",k,function(){e.scrollToTop(),e.hideNewTweetNotifier(!0)}))},scrollToTop:function(){var e=this.element.querySelector(O);e.scrollTop=0,e.focus()},update:function(){var e=this,t=this.element.querySelector(M),n=t&&t.children[0],r=n&&n.getAttribute("data-tweet-id");this.updateTimeStamps(),this.requestTweets(r,!0,function(t){t.childNodes.length>0&&e.insertNewTweets(t)})},loadMore:function(){var e=this,t=g.toRealArray(this.element.querySelectorAll(_)).pop(),n=t&&t.getAttribute("data-tweet-id");this.requestTweets(n,!1,function(t){var r=e.element.querySelector(B),i=t.childNodes[0];return r.style.cssText="",i&&i.getAttribute("data-tweet-id")==n&&t.removeChild(i),t.childNodes.length>0?void e.appendTweets(t):(b.add(e.element,"no-more"),void r.focus())})},forceLoad:function(){var e=this,t=!!this.element.querySelectorAll(M).length;this.requestTweets(1,!0,function(n){n.childNodes.length&&(e[t?"insertNewTweets":"appendTweets"](n),b.add(e.element,"has-tweets"))})},schedulePolling:function(e){var t=this;null!==this.pollInterval&&(e=T.get("timeline.pollInterval")||e||this.pollInterval||1e4,e>-1&&window.setTimeout(function(){t.isUpdating||t.update(),t.schedulePolling()},e))},updateCursors:function(e,t){(t||{}).initial?(this.cursors.maxPosition=e.maxPosition,this.cursors.minPosition=e.minPosition):(t||{}).newer?this.cursors.maxPosition=e.maxPosition||this.cursors.maxPosition:this.cursors.minPosition=e.minPosition||this.cursors.minPosition},requestTweets:function(e,t,n){var r=this,i={id:this.widgetId,instanceId:this.instanceId,screenName:this.widgetScreenName,userId:this.widgetUserId,withReplies:this.widgetShowReplies,dnt:E.enabled(),lang:this.lang};t&&this.cursors.maxPosition?i.minPosition=this.cursors.maxPosition:!t&&this.cursors.minPosition?i.maxPosition=this.cursors.minPosition:t?i.sinceId=e:i.maxId=e,i.complete=function(){r.isUpdating=!1},i.error=function(e){if(e&&e.headers){if("404"==e.headers.status)return void (r.pollInterval=null);if("503"==e.headers.status)return void (r.pollInterval*=1.5)}},i.success=function(e){var i,s,o=r.sandbox.createDocumentFragment(),u=r.sandbox.createElement("ol"),a=[];if(r.updateCursors(e.headers,{newer:t}),e&&e.headers&&e.headers.xPolling&&/\d+/.test(e.headers.xPolling)&&(r.pollInterval=1e3*e.headers.xPolling),e&&void 0!==e.body){if(u.innerHTML=e.body,u.children[0]&&"LI"!=u.children[0].tagName)return;for(s=r.getTweetDetails(u),g.forIn(s,function(e){a.push(e)}),a.length&&(i=r.baseScribeData(),i.item_ids=a,i.item_details=s,i.event_initiator=t?N.CLIENT_SIDE_APP:N.CLIENT_SIDE_USER,r.timelineType&&h.clientEvent({page:r.timelineType+"_timeline",component:"timeline",element:"initial",action:a.length?"results":"no_results"},i,!0),h.clientEvent({page:"timeline",component:"timeline",element:t?"newer":"older",action:"results"},i,!0),h.flush()),l.retinize(u),r.constrainMedia(u);u.children[0];)o.appendChild(u.children[0]);n(o)}},f.timelinePoll(g.aug(i,this.override))},insertNewTweets:function(e){var t,n=this,r=this.element.querySelector(O),i=r.querySelector(M),s=i.offsetHeight;return i.insertBefore(e,i.firstChild),t=i.offsetHeight-s,x.get("events").trigger("timelineUpdated",{target:this.sandbox.element(),region:"newer"}),r.scrollTop>40||this.mouseIsOver()?(r.scrollTop=r.scrollTop+t,this.updateTimeStamps(),void this.showNewTweetNotifier()):(b.remove(this.element,F),i.style.cssText="margin-top: -"+t+"px",window.setTimeout(function(){r.scrollTop=0,b.add(n.element,F),v.cssTransitions()?i.style.cssText="":u.animate(function(e){i.style.cssText=t>e?"margin-top: -"+(t-e)+"px":""},t,500,u.easeOut)},500),this.updateTimeStamps(),void ("custom"!=this.timelineType&&this.gcTweets(50)))},appendTweets:function(e){var t=this.element.querySelector(M);t.appendChild(e),this.updateTimeStamps(),x.get("events").trigger("timelineUpdated",{target:this.sandbox.element(),region:"older"})},gcTweets:function(e){var t,n=this.element.querySelector(M),r=n.children.length;for(e=e||50;r>e&&(t=n.children[r-1]);r--)n.removeChild(t)},showNewTweetNotifier:function(){var e=this,t=this.element.querySelector(k),n=t.children[0];t.style.cssText="",t.removeChild(n),t.appendChild(n),b.add(this.element,I),window.setTimeout(function(){b.add(e.element,q)},10),this.newNoticeDisplayTime=+(new Date),window.setTimeout(function(){e.hideNewTweetNotifier()},5e3)},hideNewTweetNotifier:function(e){var t=this;(e||!this.mouseOverNotifier)&&(b.remove(this.element,q),window.setTimeout(function(){b.remove(t.element,I)},500))},discardStaticOverflow:function(e){var t,n=e.querySelector(M);if(this.staticTimeline)for(this.height=0;t=n.children[this.tweetLimit];)n.removeChild(t)},hideStreamScrollBar:function(){var e,t=this.element.querySelector(O),n=this.element.querySelector(M);t.style.width="",e=this.element.offsetWidth-n.offsetWidth,e>0&&(t.style.width=this.element.offsetWidth+e+"px")},readTranslations:function(){var e=this.element,t="data-dt-";this.datetime=new o(g.compact({phrases:{now:e.getAttribute(t+"now"),s:e.getAttribute(t+"s"),m:e.getAttribute(t+"m"),h:e.getAttribute(t+"h"),second:e.getAttribute(t+"second"),seconds:e.getAttribute(t+"seconds"),minute:e.getAttribute(t+"minute"),minutes:e.getAttribute(t+"minutes"),hour:e.getAttribute(t+"hour"),hours:e.getAttribute(t+"hours")},months:e.getAttribute(t+"months").split("|"),formats:{abbr:e.getAttribute(t+"abbr"),shortdate:e.getAttribute(t+"short"),longdate:e.getAttribute(t+"long")}}))},updateTimeStamps:function(){for(var e,t,n,r,i=this.element.querySelectorAll(H),s=0;e=i[s];s++)n=e.getAttribute("data-datetime"),r=n&&this.datetime.timeAgo(n,this.i18n),t=e.getElementsByTagName("TIME")[0],r&&(t&&t.innerHTML?t.innerHTML=r:e.innerHTML=r)},mouseIsOver:function(){return this.mouseOver},addUrlParams:function(e){var t=this,n={tw_w:this.widgetId,related:this.related,partner:this.partner,query:this.searchQuery,profile_id:this.profileId,original_referer:S.rootDocumentLocation(),tw_p:"embeddedtimeline"};return this.addUrlParams=p(n,function(e){var n=w.closest(_,e,t.element);return n&&{tw_i:n.getAttribute("data-tweet-id")}}),this.addUrlParams(e)},showNSFW:function(e){var t,n,r,i,s,o,u=e.querySelector(".nsfw"),a=0;u&&(n=l.scaleDimensions(u.getAttribute("data-width"),u.getAttribute("data-height"),this.contentWidth(),u.getAttribute("data-height")),t=!!(i=u.getAttribute("data-player")),t?s=this.sandbox.createElement("iframe"):(s=this.sandbox.createElement("img"),i=u.getAttribute(v.retina()?"data-image-2x":"data-image"),s.alt=u.getAttribute("data-alt"),o=this.sandbox.createElement("a"),o.href=u.getAttribute("data-href"),o.appendChild(s)),s.title=u.getAttribute("data-title"),s.src=i,s.width=n.width,s.height=n.height,r=w.closest(D,u,e),a=n.height-u.offsetHeight,u.parentNode.replaceChild(t?s:o,u),r.style.cssText="height:"+(r.offsetHeight+a)+"px")},toggleExpando:function(e){var t,n,r=e.querySelector(D),s=r&&r.children[0],o=s&&s.getAttribute("data-expanded-media"),u=0,a=e.querySelector(P),f=a&&a.getElementsByTagName("B")[0],c=f&&(f.innerText||f.textContent);if(f){if(this.layout(function(){f.innerHTML=a.getAttribute("data-toggled-text"),a.setAttribute("data-toggled-text",c)}),b.present(e,j))return this.layout(function(){b.remove(e,j)}),r?(this.layout(function(){r.style.cssText="",s.innerHTML=""}),void i.doLayout()):void i.doLayout();o&&(t=this.sandbox.createElement("DIV"),t.innerHTML=o,l.retinize(t),u=this.constrainMedia(t),this.layout(function(){s.appendChild(t)})),r&&this.layout(function(){n=Math.max(s.offsetHeight,u),r.style.cssText="height:"+n+"px"}),this.layout(function(){b.add(e,j)}),i.doLayout()}},recalculateStreamHeight:function(e){var t=this,n=this.element.querySelector(L),r=this.element.querySelector(A),i=this.element.querySelector(O);this.layout(function(){var s=n.offsetHeight+(r?r.offsetHeight:0),o=e||t.sandbox.height();i.style.cssText="height:"+(o-s-2)+"px",t.noscrollbar&&t.hideStreamScrollBar()})},handleResize:function(e,t){var n=this,r=Math.min(this.dimensions.DEFAULT_WIDTH,Math.max(this.dimensions.MIN_WIDTH,Math.min(this.predefinedWidth||this.dimensions.DEFAULT_WIDTH,e)));(r!=this.width||t!=this.height)&&(this.width=r,this.height=t,this.setNarrow(),this.constrainMedia(this.element,this.contentWidth(r)),this.staticTimeline?this.layout(function(){n.height=n.element.offsetHeight,n.sandbox.height(n.height),x.get("events").trigger("resize",{target:n.sandbox.element()})}):(this.recalculateStreamHeight(t),x.get("events").trigger("resize",{target:this.sandbox.element()})),i.doLayoutAsync())}}),t.exports=n},{"anim/transition":1,"assets/css":2,"dom/classname":5,"dom/delegate":6,"dom/get":7,"globals/private":14,"globals/twttr":15,"performance/perf-timers":19,"scribe/audience":26,"scribe/frame":27,"tfw/util/data":34,"tfw/util/media":36,"tfw/util/params":37,"tfw/widget/base":38,"tfw/widget/syndicatedbase":42,"util/css":46,"util/datetime":47,"util/document":48,"util/donottrack":50,"util/env":51,"util/typevalidator":62,"util/util":65}],44:[function(e,t){function n(e){r.apply(this,[e]);var t=this.params(),n=t.count||this.dataAttr("count"),a=t.size||this.dataAttr("size"),f=o.getScreenNameFromPage(),v=""+(t.shareWithRetweet||this.dataAttr("share-with-retweet")||i.val("share-with-retweet"));this.classAttr.push("twitter-tweet-button"),"hashtag"==t.type||s.contains(this.classAttr,"twitter-hashtag-button")?(this.type="hashtag",this.classAttr.push("twitter-hashtag-button")):"mention"==t.type||s.contains(this.classAttr,"twitter-mention-button")?(this.type="mention",this.classAttr.push("twitter-mention-button")):this.classAttr.push("twitter-share-button"),this.text=t.text||this.dataAttr("text"),this.text&&/\+/.test(this.text)&&!/ /.test(this.text)&&(this.text=this.text.replace(/\+/g," ")),this.counturl=t.counturl||this.dataAttr("counturl"),this.searchlink=t.searchlink||this.dataAttr("searchlink"),this.button_hashtag=u.hashTag(t.button_hashtag||t.hashtag||this.dataAttr("button-hashtag"),!1),this.size="large"==a?"l":"m",this.align=t.align||this.dataAttr("align")||"",this.via=t.via||this.dataAttr("via"),this.hashtags=t.hashtags||this.dataAttr("hashtags"),this.screen_name=u.screenName(t.screen_name||t.screenName||this.dataAttr("button-screen-name")),this.url=t.url||this.dataAttr("url"),this.type?(this.count="none",this.shareWithRetweet="never",f&&(this.related=this.related?f+","+this.related:f)):(this.text=this.text||l,this.url=this.url||o.getCanonicalURL()||c,this.count=s.contains(h,n)?n:"horizontal",this.count="vertical"==this.count&&"l"==this.size?"none":this.count,this.via=this.via||f,v&&s.contains(p,v)&&(this.shareWithRetweet=v.replace("-","_")))}var r=e("tfw/widget/base"),i=e("globals/pagemetadata"),s=e("util/util"),o=e("util/uri"),u=e("util/twitter"),a=e("dom/textsize"),f=e("util/donottrack"),l=document.title,c=location.href,h=["vertical","horizontal","none"],p=["never","publisher-first","publisher-only","author-first","author-only"];n.prototype=new r,s.aug(n.prototype,{iframeSource:"widgets/tweet_button.62da0a34306f5c17db7d290755ed1d7d.{{lang}}.html",widgetUrlParams:function(){return s.compact({text:this.text,url:this.url,via:this.via,related:this.related,count:this.count,lang:this.lang,counturl:this.counturl,searchlink:this.searchlink,placeid:this.placeid,original_referer:location.href,id:this.id,size:this.size,type:this.type,screen_name:this.screen_name,share_with_retweet:this.shareWithRetweet,button_hashtag:this.button_hashtag,hashtags:this.hashtags,align:this.align,partner:this.partner,dnt:f.enabled(),_:+(new Date)})},height:function(){return"vertical"==this.count?62:"m"==this.size?20:28},width:function(){var e={ver:8,cnt:14,btn:24,xlcnt:18,xlbtn:38},t="vertical"==this.count,n="hashtag"==this.type&&this.button_hashtag?"Tweet %{hashtag}":"mention"==this.type&&this.screen_name?"Tweet to %{name}":"Tweet",r=this._(n,{name:"@"+this.screen_name,hashtag:"#"+this.button_hashtag}),i=this._("K"),o=this._("100K+"),u=(t?"8888":"88888")+i,f=0,l=0,c=0,h=0,p=this.styles.base,d=p;return s.contains(["ja","ko"],this.lang)?u+=this._("10k unit"):u=u.length>o.length?u:o,t?(d=p.concat(this.styles.vbubble),h=e.ver,c=e.btn):"l"==this.size?(p=d=p.concat(this.styles.large),c=e.xlbtn,h=e.xlcnt):(c=e.btn,h=e.cnt),"none"!=this.count&&(l=a(u,"",d).width+h),f=a(r,"",p.concat(this.styles.button)).width+c,t?f>l?f:l:this.calculatedWidth=f+l},render:function(){var e,t=this,n=this.makeIframeSource();return this.count&&this.classAttr.push("twitter-count-"+this.count),e=this.create(n,this.dimensions(),{title:this._("Twitter Tweet Button")}).then(function(e){return t.element=e})}}),t.exports=n},{"dom/textsize":9,"globals/pagemetadata":13,"tfw/widget/base":38,"util/donottrack":50,"util/twitter":61,"util/uri":64,"util/util":65}],45:[function(e,t){function n(e,t,n,r){y[e]=y[e]||[],y[e].push({s:n,f:r,lang:t})}function r(e,t){var n={};n[e]={item_type:0},v.clientEvent({page:"video",component:"tweet",action:"results"},c.aug({},t,{item_ids:[e],item_details:n}),!0),d.scribeVideoAudienceImpression()}function i(e,t){var n={};n[e]={item_type:0},v.clientEvent({page:"video",component:"rawembedcode",action:"no_results"},{widget_origin:h.rootDocumentLocation(),widget_frame:h.isFramed()&&h.currentDocumentLocation(),message:t,item_ids:[e],item_details:n},!0),d.scribeVideoAudienceImpression()}function s(e){if(e){a.apply(this,[e]);var t=this.srcEl&&this.srcEl.getElementsByTagName("A"),n=t&&t[t.length-1],r=this.params();this.hideStatus="hidden"===(r.status||this.dataAttr("status")),this.tweetId=r.tweetId||n&&g.status(n.href)}}var o=e("assets/css"),u=e("tfw/widget/base"),a=e("tfw/widget/syndicatedbase"),f=e("util/datetime"),l=e("util/promise"),c=e("util/util"),h=e("util/document"),p=e("tfw/util/data"),d=e("scribe/audience"),v=e("scribe/frame"),m=e("globals/twttr"),g=e("util/twitter"),y={},b=[];s.prototype=new a,c.aug(s.prototype,{renderedClassNames:"twitter-video twitter-video-rendered",videoPlayer:!0,dimensions:{DEFAULT_HEIGHT:"360",DEFAULT_WIDTH:"640",maxHeight:"500",MIN_WIDTH:"320",MIN_HEIGHT:"180",WIDE_MEDIA_PADDING:0,NARROW_MEDIA_PADDING:0,BORDERS:0},styleSheetUrl:o.video,create:function(e){var t,n=this,i=this.sandbox.createElement("div");return i.innerHTML=e,(t=i.children[0])?(this.playerConfig=JSON.parse(t.getAttribute("data-player-config")),this.sandbox.setTitle(t.getAttribute("data-iframe-title")||"Video"),this.sandbox.style({cssText:"",display:"block",width:"100%",minWidth:this.dimensions.MIN_WIDTH+"px",maxWidth:"100%",padding:"0",margin:"10px 0",position:"absolute",visibility:"hidden"}),this.sandbox.appendChild(t).then(function(){n.renderResolver.fulfill(n.sandbox)}),this.layout(function(){n.predefinedWidth=n.width,n.width=n.sandbox.width(n.width),n.constrainMedia(t,n.contentWidth(n.width)),n.completeResolver.fulfill(n.sandbox.element())}),r(this.tweetId,this.baseScribeData()),t):void 0},render:function(){var e=this;return this.tweetId?(this.rendered().then(function(t){var n=e.srcEl;n&&n.parentNode&&e.layout(function(){n&&n.parentNode&&n.parentNode.removeChild(n)}),e.layout(function(){e.height=e.sandbox.height(e.element.offsetHeight)}).then(function(){t.onresize(e.handleResize.bind(e))}),t.style({position:"static",visibility:"visible"}),u.doLayoutAsync()}),n(this.tweetId,this.lang,function(t){e.ready().then(function(){e.element=e.create(t),e.readTimestampTranslations(),e.writePlayerConfig(),u.doLayoutAsync()})},function(){i(e.tweetId,e.partner),e.completeResolver.fulfill(e.srcEl)}),b.push(this.completed()),this.completed()):(this.completeResolver.fulfill(this.srcEl),this.completed())},handleResize:function(e){var t=this;e!=this.width&&(this.width=e,this.constrainMedia(this.element,this.contentWidth(this.width)),this.layout(function(){t.height=t.sandbox.height(t.element.offsetHeight),m.get("events").trigger("resize",{target:t.sandbox.element()})}),u.doLayoutAsync())},baseScribeData:function(){return{widget_origin:h.rootDocumentLocation(),widget_frame:h.isFramed()&&h.currentDocumentLocation(),message:this.partner}},readTimestampTranslations:function(){var e=this.element,t="data-dt-",n=e.getAttribute(t+"months")||"";this.datetime=new f(c.compact({phrases:{AM:e.getAttribute(t+"am"),PM:e.getAttribute(t+"pm")},months:n.split("|"),formats:{full:e.getAttribute(t+"full")}}))},getTimestamp:function(){var e=this.element.getAttribute("data-datetime"),t=e&&this.datetime.localTimeStamp(e);return{local:t}},writePlayerConfig:function(){this.playerConfig.statusTimestamp=this.getTimestamp(),this.playerConfig.hideStatus=this.hideStatus,this.element.setAttribute("data-player-config",JSON.stringify(this.playerConfig))}}),s.fetchAndRender=function(){var e=y,t=[];y={};for(var n in e)e.hasOwnProperty(n)&&t.push(n);t.length&&(p.videos({ids:t.sort(),lang:e[t[0]][0].lang,complete:function(t){c.forIn(t,function(t,n){var r=e[t];r.forEach(function(e){e.s&&e.s.call(this,n)}),delete e[t]}),u.doLayout(),c.forIn(e,function(e,t){t.forEach(function(t){t.f&&t.f.call(this,e)})}),u.doLayout()}}),l.every.apply(null,b),b=[])},u.afterLoad(s.fetchAndRender),t.exports=s},{"assets/css":2,"globals/twttr":15,"scribe/audience":26,"scribe/frame":27,"tfw/util/data":34,"tfw/widget/base":38,"tfw/widget/syndicatedbase":42,"util/datetime":47,"util/document":48,"util/promise":58,"util/twitter":61,"util/util":65}],46:[function(e,t){t.exports={sanitize:function(e,t,n){var r,i=/^[\w ,%\/"'\-_#]+$/,s=e&&e.split(";").map(function(e){return e.split(":").slice(0,2).map(function(e){return e.trim()})}),o=0,u=[],a=n?"!important":"";for(t=t||/^(font|text\-|letter\-|color|line\-)[\w\-]*$/;s&&(r=s[o]);o++)r[0].match(t)&&r[1].match(i)&&u.push(r.join(":")+a);return u.join(";")}}},{}],47:[function(e,t){function n(e){return 10>e?"0"+e:e}function r(e){function t(e,t){return i&&i[e]&&(e=i[e]),e.replace(/%\{([\w_]+)\}/g,function(e,n){return void 0!==t[n]?t[n]:e})}var i=e&&e.phrases,s=e&&e.months||u,o=e&&e.formats||a;this.timeAgo=function(e){var n,i=r.parseDate(e),u=+(new Date),a=u-i;return i?isNaN(a)||2*f>a?t("now"):l>a?(n=Math.floor(a/f),t(o.abbr,{number:n,symbol:t(p,{abbr:t("s"),expanded:t(n>1?"seconds":"second")})})):c>a?(n=Math.floor(a/l),t(o.abbr,{number:n,symbol:t(p,{abbr:t("m"),expanded:t(n>1?"minutes":"minute")})})):h>a?(n=Math.floor(a/c),t(o.abbr,{number:n,symbol:t(p,{abbr:t("h"),expanded:t(n>1?"hours":"hour")})})):365*h>a?t(o.shortdate,{day:i.getDate(),month:t(s[i.getMonth()])}):t(o.longdate,{day:i.getDate(),month:t(s[i.getMonth()]),year:i.getFullYear().toString().slice(2)}):""},this.localTimeStamp=function(e){var i=r.parseDate(e),u=i&&i.getHours();return i?t(o.full,{day:i.getDate(),month:t(s[i.getMonth()]),year:i.getFullYear(),hours24:n(u),hours12:13>u?u?u:"12":u-12,minutes:n(i.getMinutes()),seconds:n(i.getSeconds()),amPm:t(12>u?"AM":"PM")}):""}}var i=/(\d{4})-?(\d{2})-?(\d{2})T(\d{2}):?(\d{2}):?(\d{2})(Z|[\+\-]\d{2}:?\d{2})/,s=/[a-z]{3,4} ([a-z]{3}) (\d{1,2}) (\d{1,2}):(\d{2}):(\d{2}) ([\+\-]\d{2}:?\d{2}) (\d{4})/i,o=/^\d+$/,u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a={abbr:"%{number}%{symbol}",shortdate:"%{day} %{month}",longdate:"%{day} %{month} %{year}",full:"%{hours12}:%{minutes} %{amPm} - %{day} %{month} %{year}"},f=1e3,l=60*f,c=60*l,h=24*c,p='<abbr title="%{expanded}">%{abbr}</abbr>';r.parseDate=function(e){var t,n,r=e||"",a=r.toString();return(t=function(){var e;return o.test(a)?parseInt(a,10):(e=a.match(s))?Date.UTC(e[7],u.indexOf(e[1]),e[2],e[3],e[4],e[5]):(e=a.match(i))?Date.UTC(e[1],e[2]-1,e[3],e[4],e[5],e[6]):void 0}())?(n=new Date(t),!isNaN(n.getTime())&&n):!1},t.exports=r},{}],48:[function(e,t){function n(e){return e&&o.isType("string",e)&&(u=e),u}function r(){return a}function i(){return u!==a}var s=e("util/uri"),o=e("util/util"),u=s.getCanonicalURL()||document.location.href,a=u;t.exports={isFramed:i,rootDocumentLocation:n,currentDocumentLocation:r}},{"util/uri":64,"util/util":65}],49:[function(e,t){function n(){o=1;for(var e=0,t=u.length;t>e;e++)u[e]()}var r,i,s,o=0,u=[],a=!1,f=document.createElement("a");/^loade|c/.test(document.readyState)&&(o=1),document.addEventListener&&document.addEventListener("DOMContentLoaded",i=function(){document.removeEventListener("DOMContentLoaded",i,a),n()},a),f.doScroll&&document.attachEvent("onreadystatechange",r=function(){/^c/.test(document.readyState)&&(document.detachEvent("onreadystatechange",r),n())}),s=f.doScroll?function(e){window.self!=window.top?o?e():u.push(e):!function(){try{f.doScroll("left")}catch(t){return setTimeout(function(){s(e)},50)}e()}()}:function(e){o?e():u.push(e)},t.exports=s},{}],50:[function(e,t){function n(){a=!0}function r(e,t){return a?!0:o.asBoolean(u.val("dnt"))?!0:document.navigator&&1==document.navigator.doNotTrack?!0:!navigator||1!=navigator.doNotTrack&&1!=navigator.msDoNotTrack?s.isUrlSensitive(t||document.location.host)?!0:i.isFramed()&&s.isUrlSensitive(i.rootDocumentLocation())?!0:(e=f.test(e||document.referrer)&&RegExp.$1,e&&s.isUrlSensitive(e)?!0:!1):!0}var i=e("util/document"),s=e("util/tld"),o=e("util/typevalidator"),u=e("globals/pagemetadata"),a=!1,f=/https?:\/\/([^\/]+).*/i;t.exports={setOn:n,enabled:r}},{"globals/pagemetadata":13,"util/document":48,"util/tld":60,"util/typevalidator":62}],51:[function(e,t){function n(e){return e=e||window,e.devicePixelRatio?e.devicePixelRatio>=1.5:e.matchMedia?e.matchMedia("only screen and (min-resolution: 144dpi)").matches:!1}function r(e){return e=e||g,/(Trident|MSIE \d)/.test(e)}function i(e){return e=e||g,/MSIE 9/.test(e)}function s(e){return e=e||g,/(iPad|iPhone|iPod)/.test(e)}function o(e){return e=e||g,/^Mozilla\/5\.0 \(Linux; (U; )?Android/.test(e)}function u(){return y}function a(e,t){return e=e||window,t=t||g,e.postMessage&&(!r(t)||!e.opener)}function f(e){e=e||navigator;try{return!!e.plugins["Shockwave Flash"]||!!(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){return!1}}function l(e,t,n){return e=e||window,t=t||navigator,n=n||g,"ontouchstart"in e||/Opera Mini/.test(n)||t.msMaxTouchPoints>0}function c(){var e=document.body.style;return void 0!==e.transition||void 0!==e.webkitTransition||void 0!==e.mozTransition||void 0!==e.oTransition||void 0!==e.msTransition}var h=e("util/domready"),p=e("util/typevalidator"),d=e("util/logger"),v=e("globals/pagemetadata"),m=e("globals/private"),g=window.navigator.userAgent,y=!1,b=!1,w="twitter-csp-test";m.set("verifyCSP",function(e){var t=document.getElementById(w);b=!0,y=!!e,t&&t.parentNode.removeChild(t)}),h(function(){var e;return p.asBoolean(v.val("widgets:csp"))?y=!0:(e=document.createElement("script"),e.id=w,e.text=m.fullPath("verifyCSP")+"(false);",document.body.appendChild(e),void window.setTimeout(function(){b||(d.warn('TWITTER: Content Security Policy restrictions may be applied to your site. Add <meta name="twitter:widgets:csp" content="on"> to supress this warning.'),d.warn("TWITTER: Please note: Not all embedded timeline and embedded Tweet functionality is supported when CSP is applied."))},5e3))}),t.exports={retina:n,anyIE:r,ie9:i,ios:s,android:o,cspEnabled:u,flashEnabled:f,canPostMessage:a,touch:l,cssTransitions:c}},{"globals/pagemetadata":13,"globals/private":14,"util/domready":49,"util/logger":55,"util/typevalidator":62}],52:[function(e,t){var n=e("util/util"),r={bind:function(e,t){return this._handlers=this._handlers||{},this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)},unbind:function(e,t){if(this._handlers[e])if(t){var n=this._handlers[e].indexOf(t);n>=0&&this._handlers[e].splice(n,1)}else this._handlers[e]=[]},trigger:function(e,t){var r=this._handlers&&this._handlers[e];t=t||{},t.type=e,r&&r.forEach(function(e){n.async(e.bind(this,t))})}};t.exports={Emitter:r}},{"util/util":65}],53:[function(e,t){var n=e("util/util");t.exports=function(e,t,r){var s;if(r=r||document,e=e||{},t=t||{},e.name){try{s=r.createElement('<iframe name="'+e.name+'"></iframe>')}catch(o){s=r.createElement("iframe"),s.name=e.name}delete e.name}else s=r.createElement("iframe");return e.id&&(s.id=e.id,delete e.id),s.allowtransparency="true",s.scrolling="no",s.setAttribute("frameBorder",0),s.setAttribute("allowTransparency",!0),n.forIn(e,function(e,t){s.setAttribute(e,t)}),n.forIn(t,function(e,t){s.style[e]=t}),s}},{"util/util":65}],54:[function(e,t){function n(){}var r,i=e("util/promise"),s=[];n.prototype.enqueue=function(e,t){return new i(function(n){s.push({action:e,resolver:n,note:t})})},n.prototype.exec=function(){var e,t=s;if(t.length)for(s=[];t.length;)e=t.shift(),e&&e.action?e.resolver.fulfill(e.action()):e.resolver.reject()},n.prototype.delayedExec=function(){r&&window.clearTimeout(r),r=window.setTimeout(this.exec,100)},t.exports=n},{"util/promise":58}],55:[function(e,t){function n(){a("info",f.toRealArray(arguments))}function r(){a("warn",f.toRealArray(arguments))}function i(){a("error",f.toRealArray(arguments))}function s(e){h&&(c[e]=u())}function o(e){var t;h&&(c[e]?(t=u(),n("_twitter",e,t-c[e])):i("timeEnd() called before time() for id: ",e))}function u(){return window.performance&&+window.performance.now()||+(new Date)}function a(e,t){if(window[l]&&window[l][e])switch(t.length){case 1:window[l][e](t[0]);break;case 2:window[l][e](t[0],t[1]);break;case 3:window[l][e](t[0],t[1],t[2]);break;case 4:window[l][e](t[0],t[1],t[2],t[3]);break;case 5:window[l][e](t[0],t[1],t[2],t[3],t[4]);break;default:0!==t.length&&window[l].warn&&window[l].warn("too many params passed to logger."+e)}}var f=e("util/util"),l=["con","sole"].join(""),c={},h=f.contains(location.href,"tw_debug=true");t.exports={info:n,warn:r,error:i,time:s,timeEnd:o}},{"util/util":65}],56:[function(e,t){function n(e){return function(t){return e in t}}function r(){this.assertions=[],this._defaults={}}var i=e("util/util");r.prototype.assert=function(e,t){return this.assertions.push({fn:e,msg:t||"assertion failed"}),this},r.prototype.defaults=function(e){return this._defaults=e||this._defaults,this},r.prototype.require=function(e){var t=this;return e=Array.isArray(e)?e:i.toRealArray(arguments),e.forEach(function(e){t.assert(n(e),"required: "+e)}),this},r.prototype.parse=function(e){var t,n;if(t=i.aug({},this._defaults,e||{}),n=this.assertions.reduce(function(e,n){return n.fn(t)||e.push(n.msg),e},[]),n.length>0)throw new Error(n.join("\n"));return t},t.exports=r},{"util/util":65}],57:[function(e,t){var n,r,i,s=e("util/querystring");n=function(e){var t=e.search.substr(1);return s.decode(t)},r=function(e){var t=e.href,n=t.indexOf("#"),r=0>n?"":t.substring(n+1);return s.decode(r)},i=function(e){var t,i={},s=n(e),o=r(e);for(t in s)s.hasOwnProperty(t)&&(i[t]=s[t]);for(t in o)o.hasOwnProperty(t)&&(i[t]=o[t]);return i},t.exports={combined:i,fromQuery:n,fromFragment:r}},{"util/querystring":59}],58:[function(e,t){var n=e("util/util"),r=function(e){try{var t=e.then;if("function"==typeof t)return!0}catch(n){}return!1},i=function(e){Error.call(this,e)};i.prototype=Object.create(Error.prototype);var s=function(){var e=[];return e.pump=function(t){n.async(function(){for(var n=e.length,r=0;n>r;)r++,e.shift()(t)})},e},o=function(e,t,i,s,o,u){var a=!1,f=this,l=function(e){n.async(function(){u("fulfilled"),s(e),t.pump(e)})},c=function(e){n.async(function(){u("rejected"),o(e),i.pump(e)})},h=function(e){return r(e)?void e.then(h,c):void l(e)},p=function(e){return function(t){a||(a=!0,e(t))}};this.resolve=p(h,"resolve"),this.fulfill=p(l,"fulfill"),this.reject=p(c,"reject"),this.cancel=function(){f.reject(new Error("Cancel"))},this.timeout=function(){f.reject(new Error("Timeout"))},u("pending")},u=function(e){var t,n,r=new s,i=new s,u="pending";this._addAcceptCallback=function(e){r.push(e),"fulfilled"==u&&r.pump(t)},this._addRejectCallback=function(e){i.push(e),"rejected"==u&&i.pump(n)};var a=new o(this,r,i,function(e){t=e},function(e){n=e},function(e){u=e});try{e&&e(a)}catch(f){a.reject(f)}},a=function(e){return"function"==typeof e},f=function(e,t,n){return a(e)?function(){try{var n=e.apply(null,arguments);t.resolve(n)}catch(r){t.reject(r)}}:t[n].bind(t)},l=function(e,t,n){return a(e)&&n._addAcceptCallback(e),a(t)&&n._addRejectCallback(t),n};n.aug(u.prototype,{then:function(e,t){var n=this;return new u(function(r){l(f(e,r,"resolve"),f(t,r,"reject"),n)})},"catch":function(e){var t=this;return new u(function(n){l(null,f(e,n,"reject"),t)})}}),u.isThenable=r;var c=function(e){return n.toRealArray(e).map(u.resolve)};u.any=function(){var e=c(arguments);return new u(function(t){if(e.length){var n=!1,r=function(e){n||(n=!0,t.resolve(e))},i=function(e){n||(n=!0,t.reject(e))};e.forEach(function(e){e.then(r,i)})}else t.reject("No futures passed to Promize.any()")})},u.every=function(){var e=c(arguments);return new u(function(t){if(e.length){var n=new Array(e.length),r=0,i=function(i,s){r++,n[i]=s,r==e.length&&t.resolve(n)};e.forEach(function(e,n){e.then(i.bind(null,n),t.reject)})}else t.reject("No futures passed to Promize.every()")})},u.some=function(){var e=c(arguments);return new u(function(t){if(e.length){var n=0,r=function(){n++,n==e.length&&t.reject()};e.forEach(function(e){e.then(t.resolve,r)})}else t.reject("No futures passed to Promize.some()")})},u.fulfill=function(e){return new u(function(t){t.fulfill(e)})},u.resolve=function(e){return new u(function(t){t.resolve(e)})},u.reject=function(e){return new u(function(t){t.reject(e)})},t.exports=u},{"util/util":65}],59:[function(e,t){function n(e){return encodeURIComponent(e).replace(/\+/g,"%2B").replace(/'/g,"%27")}function r(e){return decodeURIComponent(e)}function i(e){var t=[];return f.forIn(e,function(e,r){var i=n(e);f.isType("array",r)||(r=[r]),r.forEach(function(e){a.hasValue(e)&&t.push(i+"="+n(e))})}),t.sort().join("&")}function s(e){var t,n={};return e?(t=e.split("&"),t.forEach(function(e){var t=e.split("="),i=r(t[0]),s=r(t[1]);return 2==t.length?f.isType("array",n[i])?void n[i].push(s):i in n?(n[i]=[n[i]],void n[i].push(s)):void (n[i]=s):void 0}),n):{}}function o(e,t){var n=i(t);return n.length>0?f.contains(e,"?")?e+"&"+i(t):e+"?"+i(t):e}function u(e){var t=e&&e.split("?");return 2==t.length?s(t[1]):{}}var a=e("util/typevalidator"),f=e("util/util");t.exports={url:o,decodeURL:u,decode:s,encode:i,encodePart:n,decodePart:r}},{"util/typevalidator":62,"util/util":65}],60:[function(e,t){function n(e){return e in s?s[e]:s[e]=i.test(e)}function r(){return n(document.location.host)}var i=/^[^#?]*\.(gov|mil)(:\d+)?([#?].*)?$/i,s={};t.exports={isUrlSensitive:n,isHostPageSensitive:r}},{}],61:[function(e,t){function n(e){return"string"==typeof e&&d.test(e)&&RegExp.$1.length<=20}function r(e){return n(e)?RegExp.$1:void 0}function i(e,t){var n=p.decodeURL(e);return t=t||!1,n.screen_name=r(e),n.screen_name?p.url("https://twitter.com/intent/"+(t?"follow":"user"),n):void 0}function s(e){return i(e,!0)}function o(e){return"string"==typeof e&&y.test(e)}function u(e,t){return t=void 0===t?!0:t,o(e)?(t?"#":"")+RegExp.$1:void 0}function a(e){return"string"==typeof e&&v.test(e)}function f(e){return a(e)&&RegExp.$1}function l(e){return m.test(e)}function c(e){return g.test(e)}function h(e){return b.test(e)}var p=e("util/querystring"),d=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?(?:\/intent\/(?:follow|user)\/?\?screen_name=|(?:\/#!)?\/))@?([\w]+)(?:\?|&|$)/i,v=/(?:^|(?:https?\:)?\/\/(?:www\.)?twitter\.com(?:\:\d+)?\/(?:#!\/)?[\w_]+\/status(?:es)?\/)(\d+)/i,m=/^http(s?):\/\/(\w+\.)*twitter\.com([\:\/]|$)/i,g=/^http(s?):\/\/pbs\.twimg\.com\//,y=/^#?([^.,<>!\s\/#\-\(\)\'\"]+)$/,b=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/;t.exports={isHashTag:o,hashTag:u,isScreenName:n,screenName:r,isStatus:a,status:f,intentForProfileURL:i,intentForFollowURL:s,isTwitterURL:l,isTwimgURL:c,isIntentURL:h,regexen:{profile:d}}},{"util/querystring":59}],62:[function(e,t){function n(e){return void 0!==e&&null!==e&&""!==e}function r(e){return s(e)&&e%1===0}function i(e){return s(e)&&!r(e)}function s(e){return n(e)&&!isNaN(e)}function o(e){return n(e)&&"array"==c.toType(e)}function u(e){if(!n(e))return!1;switch(e){case"1":case"on":case"ON":case"true":case"TRUE":case"yes":case"YES":return!0;case"0":case"off":case"OFF":case"false":case"FALSE":case"no":case"NO":return!1;default:return!!e}}function a(e){return s(e)?e:void 0}function f(e){return i(e)?e:void 0}function l(e){return r(e)?e:void 0}var c=e("util/util");t.exports={hasValue:n,isInt:r,isFloat:i,isNumber:s,isArray:o,asInt:l,asFloat:f,asNumber:a,asBoolean:u}},{"util/util":65}],63:[function(e,t){function n(){return String(+(new Date))+Math.floor(1e5*Math.random())+r++}var r=0;t.exports={generate:n}},{}],64:[function(e,t){function n(e,t){var n,r;return t=t||location,/^https?:\/\//.test(e)?e:/^\/\//.test(e)?t.protocol+e:(n=t.host+(t.port.length?":"+t.port:""),0!==e.indexOf("/")&&(r=t.pathname.split("/"),r.pop(),r.push(e),e="/"+r.join("/")),[t.protocol,"//",n,e].join(""))}function r(){for(var e,t=document.getElementsByTagName("link"),r=0;e=t[r];r++)if("canonical"==e.rel)return n(e.href)}function i(){for(var e,t,n,r=document.getElementsByTagName("a"),i=document.getElementsByTagName("link"),u=[r,i],a=0,f=0,l=/\bme\b/;e=u[a];a++)for(f=0;t=e[f];f++)if(l.test(t.rel)&&(n=s.screenName(t.href)))return n}var s=e("util/twitter");t.exports={absolutize:n,getCanonicalURL:r,getScreenNameFromPage:i}},{"util/twitter":61}],65:[function(e,t){function n(e){return l(arguments).slice(1).forEach(function(t){i(t,function(t,n){e[t]=n})}),e}function r(e){return i(e,function(t,n){u(n)&&(r(n),a(n)&&delete e[t]),(void 0===n||null===n||""===n)&&delete e[t]}),e}function i(e,t){for(var n in e)(!e.hasOwnProperty||e.hasOwnProperty(n))&&t(n,e[n]);return e}function s(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function o(e,t){return e==s(t)}function u(e){return e===Object(e)}function a(e){if(!u(e))return!1;if(Object.keys)return!Object.keys(e).length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function f(e,t){window.setTimeout(function(){e.call(t||null)},0)}function l(e){return Array.prototype.slice.call(e)}function c(e,t){return e&&e.indexOf?e.indexOf(t)>-1:!1}t.exports={aug:n,async:f,compact:r,contains:c,forIn:i,isObject:u,isEmptyObject:a,toType:s,isType:o,toRealArray:l}},{}],66:[function(e,t){function n(){if(i)return i;if(o.isDynamicWidget()){var e,t=0,n=parent.frames.length;try{if(i=parent.frames[f])return i}catch(r){}if(u.anyIE())for(;n>t;t++)try{if(e=parent.frames[t],e&&"function"==typeof e.openIntent)return i=e}catch(r){}}}function r(){var e,t,i,u,a,f,p={};if("function"===(typeof arguments[0]).toLowerCase()?p.success=arguments[0]:p=arguments[0],e=p.success||function(){},t=p.timeout||function(){},i=p.nohub||function(){},u=p.complete||function(){},a=void 0!==p.attempt?p.attempt:h,!o.isDynamicWidget()||s)return i(),u(),!1;f=n(),a--;try{if(f&&f.trigger)return e(f),void u()}catch(v){}return 0>=a?(s=!0,t(),void u()):+(new Date)-l>c*h?(s=!0,void i()):void window.setTimeout(function(){r({success:e,timeout:t,nohub:i,attempt:a,complete:u})},c)}var i,s,o=e("tfw/util/env"),u=e("util/env"),a="twttrHubFrameSecure",f="http:"==document.location.protocol?"twttrHubFrame":a,l=+(new Date),c=100,h=20;t.exports={withHub:r,contextualHubId:f,secureHubId:a}},{"tfw/util/env":35,"util/env":51}],67:[function(e,t){function n(e,t){return e&&e.getAttribute?e.getAttribute("data-"+t):void 0}function r(e,t){return{element:e.element||m,action:e.action||g,page:i(t)?"video":void 0}}function i(e){return f.closest(".embedded-video",e)}function s(e){return JSON.parse(n(i(e),"player-config"))}function o(e,t){var r,s,o,u=i(t);return u?r=a.aug({item_type:d,card_type:v,id:n(u,"tweet-id"),card_name:n(u,"card-name"),publisher_id:n(u,"publisher-id"),content_id:n(u,"content-id")},e.itemData||{}):(s=f.closest(".cards-multimedia",t),o=f.closest(".tweet",t),r=a.aug({item_type:d,card_type:v,id:n(o,"tweet-id"),card_name:n(s,"card-name"),publisher_id:n(s,"publisher-id"),content_id:n(s,"video-content-id")},e.itemData||{})),{items:[r]}}function u(e){var t=this;this.global=e,this.server=(new l).attachReceiver(new h.Receiver(e)).bind("scribe",function(e){t.scribe(e,this)}).bind("requestPlayerConfig",function(){return t.requestPlayerConfig(this)}).bind("intent",function(e){return t.intent(e,this)})}var a=e("util/util"),f=e("dom/get"),l=e("rpc/jsonrpc/server"),c=e("scribe/pixel"),h=e("rpc/postmessage"),p=e("tfw/widget/intent"),d=0,v=6,m="amplify_player",g="undefined";u.prototype.findIframeByWindow=function(e){for(var t=this.global.document.getElementsByTagName("iframe"),n=t.length,r=0;n>r;r++)if(t[r].contentWindow==e)return t[r]},u.prototype.intent=function(e,t){var n=this.findIframeByWindow(t),r=e&&e.url;r&&n&&p.open(r,n)},u.prototype.requestPlayerConfig=function(e){var t=this.findIframeByWindow(e);if(t)return s(t)},u.prototype.scribe=function(e,t){var n,i,s,u;n=e&&e.customScribe,i=this.findIframeByWindow(t),n&&i&&(s=r(n,i),u=o(n,i),c.clientEvent2(s,u,!0))},t.exports=u},{"dom/get":7,"rpc/jsonrpc/server":21,"rpc/postmessage":22,"scribe/pixel":28,"tfw/widget/intent":41,"util/util":65}],68:[function(e){!function(){var n=Function&&Function.prototype&&Function.prototype.bind,r=/MSIE [678]/.test(window.navigator.userAgent);if(n&&!r){var i=e("tfw/util/article"),s=e("util/domready"),o=e("util/logger"),u=e("performance/perf-timers"),a=e("tfw/widget/base"),f=e("tfw/widget/follow"),l=e("tfw/widget/tweetbutton"),c=e("tfw/widget/embed"),h=e("tfw/widget/timeline"),p=e("tfw/widget/video"),d=e("tfw/widget/intent"),v=e("tfw/factories"),m=e("util/events"),g=e("tfw/hub/client"),y=e("intents/delegate"),b=e("globals/twttr"),w=e("globals/private"),E=e("events/ready"),S=e("util/promise");if(w.init("host","platform.twitter.com"),u.start("widgets-js-load"),i.requestArticleUrl(),w.get("widgets.loaded"))return b.call("widgets.load"),!1;if(w.get("widgets.init"))return!1;w.set("widgets.init",!0),b.set("init",!0);var x,T=new S(function(e){x=e.fulfill.bind(e)});E.exposeReadyPromise(T,b.base,"_e"),b.set("events",{bind:function(e,t){T.then(function(n){n.events.bind(e,t)})}}),s(function(){function e(){w.set("eventsHub",g.init()),g.init(!0)}var t,n={"a.twitter-share-button":l,"a.twitter-mention-button":l,"a.twitter-hashtag-button":l,"a.twitter-follow-button":f,"blockquote.twitter-tweet":c,"a.twitter-timeline":h,"div.twitter-timeline":h,"blockquote.twitter-video":p,body:d},r=w.get("eventsHub")?b.get("events"):{};b.aug("widgets",v,{load:function(e){o.time("load"),a.init(n),a.embed(e),w.set("widgets.loaded",!0)}}),b.aug("events",r,m.Emitter),t=b.get("events.bind"),b.set("events.bind",function(n,r){e(),this.bind=t,this.bind(n,r)}),x(b.base),y.attachTo(document),b.call("widgets.load")})}}()},{"events/ready":11,"globals/private":14,"globals/twttr":15,"intents/delegate":17,"performance/perf-timers":19,"tfw/factories":30,"tfw/hub/client":31,"tfw/util/article":32,"tfw/widget/base":38,"tfw/widget/embed":39,"tfw/widget/follow":40,"tfw/widget/intent":41,"tfw/widget/timeline":43,"tfw/widget/tweetbutton":44,"tfw/widget/video":45,"util/domready":49,"util/events":52,"util/logger":55,"util/promise":58}],69:[function(e,t){function n(){}var r=e("util/util"),i=e("util/events");r.aug(n.prototype,i.Emitter,{transportMethod:"",init:function(){},send:function(e){var t;this._ready?this._performSend(e):t=this.bind("ready",function(){this.unbind("ready",t),this._performSend(e)})},ready:function(){this.trigger("ready",this),this._ready=!0},isReady:function(){return!!this._ready},receive:function(e){this.trigger("message",e)}}),t.exports={Connection:n}},{"util/events":52,"util/util":65}],70:[function(e,t){function n(e,t){var n=t||Math.floor(100*Math.random()),r=['<object id="xdflashshim'+n+'" name="xdflashshim'+n+'"','type="application/x-shockwave-flash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"','width="1" height="1" style="position:absolute;left:-9999px;top:-9999px;">','<param name="movie" value="'+e+"&debug="+window.__XDDEBUG__+'">','<param name="wmode" value="window">','<param name="allowscriptaccess" value="always">',"</object>"].join(" ");return r}t.exports={object:n}},{}],71:[function(e,t){function n(e){return(JSON.parse||JSON.decode)(e)}function r(e){this.con=e}function i(){this.id=i.id++}var s=e("util/util"),o=e("util/events");s.aug(r.prototype,{expose:function(e){this.con.bind("message",this._handleRequest(e))},call:function(e){var t,r=this;return this._requests||(this._requests={},this.con.bind("message",function(e){var t;try{e=n(e)}catch(i){return}e.callback&&"number"==typeof e.id&&(t=r._requests[e.id])&&(e.error?t.trigger("error",e):t.trigger("success",e),delete r._requests[e.id])})),t=new i,this._requests[t.id]=t,t.send(this.con,e,Array.prototype.slice.call(arguments,1))},_handleRequest:function(e){var t=this;return function(r){var i,s;try{r=n(r)}catch(o){return}r.callback||"number"==typeof r.id&&"function"==typeof e[r.method]&&(s=t._responseCallbacks(r.id),i=e[r.method].apply(e,r.params.concat(s)),"undefined"!=typeof i&&s[0](i))}},_responseCallbacks:function(e){var t=this.con;return[function(n){t.send(JSON.stringify({id:e,result:n,callback:!0}))},function n(r){t.send(JSON.stringify({id:e,error:n,callback:r}))}]}}),i.id=0,s.aug(i.prototype,o.Emitter,{send:function(e,t,n){return e.send(JSON.stringify({id:this.id,method:t,params:n})),this},success:function(e){return this.bind("success",e),this},error:function(e){return this.bind("error",e),this}}),t.exports=function(e){return new r(e)}},{"util/events":52,"util/util":65}],72:[function(e,t){function n(){}function r(e){this.transportMethod="PostMessage",this.options=e,this._createChild()}function i(e){this.transportMethod="Flash",this.options=e,this.token=Math.random().toString(16).substring(2),this._setup()}function s(e){this.transportMethod="Fallback",this.options=e,this._createChild()}var o,u=e("xd/base"),a=e("util/util"),f=e("util/env"),l=e("intents/intent"),c="__ready__",h=0;n.prototype=new u.Connection,a.aug(n.prototype,{_createChild:function(){this.options.window?this._createWindow():this._createIframe()},_createIframe:function(){function e(){s.child=t.contentWindow,s._ready||s.init()}var t,n,r,i,s=this,u={allowTransparency:!0,frameBorder:"0",scrolling:"no",tabIndex:"0",name:this._name()},f=a.aug(a.aug({},u),this.options.iframe);window.postMessage?(o||(o=document.createElement("iframe")),t=o.cloneNode(!1)):t=document.createElement('<iframe name="'+f.name+'">'),t.id=f.name,a.forIn(f,function(e,n){"style"!=e&&t.setAttribute(e,n)}),i=t.getAttribute("style"),i&&"undefined"!=typeof i.cssText?i.cssText=f.style:t.style.cssText=f.style,t.addEventListener("load",e,!1),t.src=this._source(),(n=this.options.appendTo)?n.appendChild(t):(r=this.options.replace)?(n=r.parentNode,n&&n.replaceChild(t,r)):document.body.insertBefore(t,document.body.firstChild)},_createWindow:function(){var e=l.open(this._source()).popup;e&&e.focus(),this.child=e,this.init()},_source:function(){return this.options.src},_name:function(){var e="_xd_"+h++;return window.parent&&window.parent!=window&&window.name&&(e=window.name+e),e}}),r.prototype=new n,a.aug(r.prototype,{init:function(){function e(e){e.source===t.child&&(t._ready||e.data!==c?t.receive(e.data):t.ready())}var t=this;window.addEventListener("message",e,!1)},_performSend:function(e){this.child.postMessage(e,this.options.src)}}),i.prototype=new n,a.aug(i.prototype,{_setup:function(){var t=this,n=e("xd/flash");window["__xdcb"+t.token]={receive:function(e){t._ready||e!==c?t.receive(e):t.ready()},loaded:function(){}};var r=document.createElement("div");r.innerHTML=n.object("https://platform.twitter.com/xd/ft.swf?&token="+t.token+"&parent=true&callback=__xdcb"+t.token+"&xdomain="+t._host(),t.token),document.body.insertBefore(r,document.body.firstChild),t.proxy=r.firstChild,t._createChild()},init:function(){},_performSend:function(e){this.proxy.send(e)},_host:function(){return this.options.src.replace(/https?:\/\//,"").split(/(:|\/)/)[0]},_source:function(){return this.options.src+(this.options.src.match(/\?/)?"&":"?")+"xd_token="+window.escape(this.token)}}),s.prototype=new n,a.aug(s.prototype,{init:function(){},_performSend:function(){}}),t.exports={connect:function(e){return!f.canPostMessage()||f.anyIE()&&e.window?f.anyIE()&&f.flashEnabled()?new i(e):new s(e):new r(e)}}},{"intents/intent":18,"util/env":51,"util/util":65,"xd/base":69,"xd/flash":70}]},{},[68]),define("twitter",function(e){return function(){var t,n;return t||e.twitter}}(this)),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/social",["builders2/content","underscore","jquery","twitter"],function(e,n,r){var i,s;return i=function(e){function n(){return s=n.__super__.constructor.apply(this,arguments),s}return t(n,e),n.type="Social",n.icon="/img/visualization_icons/type_text.png",n.prototype.savedAttributes=["padding"],n.prototype.createGraphic=function(){return n.__super__.createGraphic.call(this),this.links=function(e){var t,n;t=e.selectAll("div.j_social").data([null]),n=t.enter().append("div").attr({"class":"j_social"}).each(function(e,n){var i,s;return i=(s=r("body").data("tweet-url"))!=null?s:"http://www.two-n.com",t.html("<a href='https://twitter.com/share?via=TWO-N' class='twitter-share-button' data-url='"+i+"'>Tweet</a>")});if(n.node()!=null)return twttr.widgets!=null?twttr.widgets.load():setTimeout(function(){if(twttr.widgets!=null)return twttr.widgets.load()},500)},this.graphic.add(this.links)},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/sponsor_logo",["builders2/image","underscore"],function(e,n){var r,i;return r=function(e){function r(){return i=r.__super__.constructor.apply(this,arguments),i}return t(r,e),r.type="Sponsor",r.prototype.render=function(e){return d3.select(this.el.parentNode).classed("disabled",!this.get("url")),r.__super__.render.call(this,e)},r.prototype.defaults=function(){return n.extend(r.__super__.defaults.call(this),{target:"_blank",url:"",href:"",verticalAlignment:"50%",horizontalAlignment:"100%",sizing:"",padding:{t:0,r:0,b:0,l:0},customClass:"l_sponsor-image"})},r}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/story",["builders2/grid","builders2/content","builders2/text","underscore"],function(e,n,r,i){var s,o;return s=function(e){function s(){return o=s.__super__.constructor.apply(this,arguments),o}return t(s,e),s.type="Story",s.prototype.initialize=function(){var e;return s.__super__.initialize.call(this),e=this.get("children"),this.header=e.findWhere({type:"StoryHeader"}),this.chapters=e.findWhere({type:"Chapters"})},s.prototype.render=function(e){var t;return this.header.row!=null&&(t=this.header.row.dy,this.chapters&&(this.chapters.row.height=(this.get("height")||0)-this.header.row.dy-this.footer.row.dy)),s.__super__.render.call(this,e),t!=null&&t!==this.header.row.dy&&this.render(e),this.dy=this.get("grid").dy},s.prototype.toJSON=function(){var e,t;return e=this.header.toJSON(),this.chapters?i.extend({},e,(t=this.chapters)!=null?t.toJSON():void 0,n.prototype.toJSON.call(this),this.chapters.weight!==.2?{chaptersWeight:this.chapters.weight}:void 0):i.extend({},e,s.__super__.toJSON.call(this))},s.prototype.parse=function(e){var t,n;return e=i.clone(e),t=(n=e.chaptersWeight)!=null?n:.2,e.chapters||(e.chapters=[{type:"Chapter",content:{type:"Visualization"}}]),e.grid||(e.grid=[{height:10,children:[i.extend({},e,{type:"StoryHeader"})]},{height:100,resizable:!1,children:[i.extend({},e,{type:"Chapters",weight:t,padding:{t:0,r:0,b:0,l:-12}}),{type:"Pager",weight:1-t,customClass:"s_pager"}]},{height:17,resizable:!1,children:[this.footer=new r({type:"Text",text:"&copy;TWO-N Inc. 2015. All rights reserved.",textAlign:"right",fontSize:"small",lineHeight:"tight",padding:{t:5,r:0,b:0,l:0},removable:!1,selectable:!1,draggable:!1})]}]),s.__super__.parse.call(this,e)},s}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/story_header",["builders2/html_layout","builders2/social","underscore"],function(e,n,r){var i,s;return i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments),s}return t(i,e),i.type="StoryHeader",i.prototype.savedAttributes=["title","author","time"],i.prototype.defaults=function(){return r.extend(i.__super__.defaults.apply(this,arguments),{customClass:"s_story-header",html:'<div class="sponsor-wrapper">\n  <div data-name="title" class="story-title masonry-editor-cell"></div>\n  <div data-name="author" class="story-author masonry-editor-cell"></div>\n  <div data-name="time" class="story-time masonry-editor-cell"></div>\n  <div data-name="social" class="social" ></div>\n</div>'})},i.prototype.toJSON=function(){var e;return e=i.__super__.toJSON.call(this),delete e.children,e},i.prototype.parse=function(e){var t;return t={hasPadding:!1,selectable:!1,scope:"story",multiLine:!1},e=r.extend({},e,{children:[r.extend(new n(r.extend({name:"social"},t)),t),r.extend({type:"Text",name:"title",text:e.title,defaultText:"Enter story title",tabIndex:1,fontSize:"title",lineHeight:"tight",padding:{t:0,r:0,b:0,l:0},bold:!0,weight:.75},t),r.extend({type:"Text",name:"author",text:e.author,defaultText:"Author Name",tabIndex:2,fontSize:"small",padding:{t:0,r:3,b:0,l:0},weight:.2},t),r.extend({type:"Text",name:"time",text:e.time,defaultText:"Publish date",tabIndex:3,fontSize:"small",padding:{t:0,r:0,b:0,l:0},italic:!0,weight:.8},t)]}),i.__super__.parse.call(this,e)},i.prototype.delegateEvents=function(){var e=this;return this.get("children").on({"change:text":function(t){return e.set(t.get("name"),t.get("text"),{silent:!0})}}),i.__super__.delegateEvents.call(this)},i}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/trendline",["builders2/content","builders2/props_impl","bloomer/lib","underscore","d3"],function(e,n,r,i,s){var o,u;return o=function(e){function s(){return u=s.__super__.constructor.apply(this,arguments),u}return t(s,e),s.type="Trendline",s.label="Trendline",s.icon="/img/visualization_icons/type_line.png",s.prototype.savedAttributes=["padding"],s.prototype.properties=[new n.TrendlineOptions({name:"options"})],s.prototype.createGraphic=function(){var e,t,n,i,o,u=this;s.__super__.createGraphic.call(this),this.chart=r.chart.trendline(),this.graphic.add(this.chart),this.chart.dimension("key").value(function(e){return e.name}),this.chart.dimension("focus").value(function(e){return u.get("parent").set("focusTime",u.___datasets.nearest(e).seq)}),this.chart.layer("focus").xAtFocus(function(e){return u.___datasets.length&&u.chart.dimension("x")(u.___datasets.nearest(e))}),this.chart.dimension("defined").value(function(e){return e.value!=null}),i=this.properties,o=[];for(t=0,n=i.length;t<n;t++)e=i[t],e.createGraphic!=null&&o.push(e.createGraphic(this));return o},s.prototype.prepare=function(e){return s.__super__.prepare.call(this,e),this.chart.data(this.___entities)},s.prototype.render=function(e){var t,n,r,i;i=this.properties;for(n=0,r=i.length;n<r;n++)t=i[n],t.render!=null&&t.render(this);return s.__super__.render.call(this)},s.prototype.defaults=function(){return i.extend(s.__super__.defaults.call(this),{padding:{t:10,r:10,b:30,l:50}})},s}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("builders2/time_selector",["builders2/content","models/dataset","builders2/props_impl","bloomer/lib","underscore"],function(e,n,r,i,s){var o,u;return o=function(e){function o(){return u=o.__super__.constructor.apply(this,arguments),u}return t(o,e),o.type="TimeSelector",o.label="time selector",o.icon="/img/visualization_icons/time_slider.png",o.prototype.savedAttributes=["padding","showPlayButton","frameDuration"],o.prototype.properties=[new r.TimeFormat({token:"selector",name:"timeFormat","for":"label"})],o.prototype.prepare=function(){},o.prototype.render=function(){var e,t,r,i,s,u,a,f,l,c,h,p,d=this;this.___format=this.property("timeFormat").derive(this),u=this.get("parent").get("children").filter(function(e){return"timeSlider"===e.get("timeOptions")||e.get("focusTimeOption")}),this.___combined=n([]);for(a=0,l=u.length;a<l;a++){e=u[a];if(e.___datasets!=null){h=e.___datasets;for(r=f=0,c=h.length;f<c;r=++f){t=h[r];if(e.get("focusTimeOption")!=="timeSlider"||!t.isSequential)continue;r===0&&((p=t.meta)!=null?p.seqType:void 0)==="relative"&&(i=d3.format(",.0f"),this.___format=function(e){return"T+"+i(e)}),this.___combined.push(t)}}}this.timeSlider.dimension("time").domain([this.___combined.seqMin,this.___combined.seqMax]).value(function(e){return d.___combined.length===0?e:d.___combined.nearest(e).seq}),s=this.get("parent").get("focusTime");if(s==null||isNaN(s)){s=this.timeSlider.selectedTime();if(s==null||isNaN(s)){s=new Date(this.___combined.seqMax);if(s==null||isNaN(s))s=null}}return this.timeSlider.size([this.dx,this.dy]).selectedTime(s).invert(function(e){return d.___combined.nearest(d.timeSlider.dimension("time").scale().invert(e)).seq}).timeFormat(this.___format).showPlay(this.get("showPlayButton")==="on").frameDuration(this.get("frameDuration")*1e3),o.__super__.render.call(this)},o.prototype.delegateEvents=function(){var e=this;return this.timeSlider.on("scrub",function(){var t,n;t=e.get("parent"),n=e.timeSlider.selectedTime();if(n===t.get("focusTime"))return;return t.set("focusTime",n,{silent:!0}).render({skipTransition:!0})}).on("change",function(t,n){return e.get("parent").set({focusTime:e.timeSlider.selectedTime(),forceLinearTransition:!!t,transitionDuration:n})}).on("commit",function(){return e.get("parent").set({focusTime:e.timeSlider.selectedTime(),sortTime:e.timeSlider.selectedTime()}).render()})},o.prototype.createGraphic=function(){var e=this;return o.__super__.createGraphic.call(this),this.timeSlider=i.time.slider().nextTime(function(t){var n,r,i,s,o,u;r=e.___combined.nearest(t).seq,u=e.timeSlider.dimension("time").domain()[1],n=0,o=null;while(++n<20){i=(r+u)/2,s=e.___combined.nearest(i).seq,s===r?r=i:s<u?u=s:s===u&&(o=s);if(o!=null)return o}if(n>=20||o==null)throw new Error("nextTime() algorithm failed.")}),this.graphic.add(this.timeSlider,0)},o.prototype.defaults=function(){return s.extend(o.__super__.defaults.apply(this,arguments),{showPlayButton:"on",frameDuration:.05,height:35,padding:{t:0,r:80,b:0,l:100}})},o}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};define("builders2/visualization",["builders2/grid","underscore"],function(e,r){var i,s;return i=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments),s}return t(i,e),i.type="Visualization",i.prototype.savedAttributes=["focusTime"],i.prototype.parse=function(e,t){var n;if(n=e.focusTime)e=r.clone(e),e.focusTime=new Date(n),e.sortTime=new Date(n);return i.__super__.parse.call(this,e,t)},i.prototype.delegateEvents=function(){var e=this;return this.on({"change:focusTime":function(){return e.render()},"change:highlightedEntityName":function(t,i){var s,o;return e.___highlightedNames=(o=e.get("highlightedEntityName"))!=null?o.split(/\s*\,\s*/):void 0,s=e.get("children"),e.___anyDimmed=e.___highlightedNames!=null&&r.any(e.___highlightedNames,function(e){var t;return t=s.filter(function(t){return t.___entityDisplayNames&&n.call(t.___entityDisplayNames,e)>=0}),t.length>1}),e.render()}}),i.__super__.delegateEvents.call(this)},i.prototype.defaults=function(){return r.extend(i.__super__.defaults.call(this),{focusTime:null,customClass:"s_visualization"})},i}(e)})}.call(this),function(){define("builders2/lib",["builders2/bar_chart","builders2/blank_cell","builders2/chapter_selector","builders2/chapter_tab","builders2/content_container","builders2/data_grid","builders2/grid","builders2/html_layout","builders2/image","builders2/map","builders2/pager","builders2/scatter","builders2/social","builders2/sponsor_logo","builders2/story","builders2/story_header","builders2/text","builders2/trendline","builders2/time_selector","builders2/visualization"],function(){var e,t,n,r,i;t=arguments,r=0,i=function(){return t[r++]},n={synonyms:{}};while(e=i())n[e.type]=n.synonyms[e.type.toLowerCase()]=e;return n.synonyms.timeslider=n.TimeSelector,n})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("cms/story_viewer",["content_renderer","builders2/content","builders2/lib","backbone","jquery","d3"],function(e,n,r,i,s,o){var u,a;return u=function(e){function i(){return a=i.__super__.constructor.apply(this,arguments),a}return t(i,e),i.prototype.initialize=function(e){var t=this;i.__super__.initialize.call(this,e),this.$el.addClass("story-viewer"),s(window).on("resize",_.throttle(function(){if(t.$el.is(":visible"))return t.render()},400));if(this.model!=null)return this.setModel(this.model)},i.prototype.remove=function(){return s(window).off("resize"),i.__super__.remove.call(this)},i.prototype.setModel=function(e){var t,i;return this.model=e,n.use({db:this.model.get("db"),builders:(i=this.options.builders)!=null?i:r,isEditable:!1}),t=this.model.get("root"),t==null?t=n.getNew(this.model.get("content")):t=n.getNew(t.toJSON()),this.model.set("root",t,{silent:!0}),this.setRootCell(t),this},i}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define("player_router",["models/story","cms/story_viewer","backbone","jquery"],function(e,n,r,i){var s,o;return s=function(r){function s(){return o=s.__super__.constructor.apply(this,arguments),o}return t(s,r),s.prototype.routes={"*splat":"view"},s.prototype.initialize=function(){return this.$spinner=i(".loading-spinner"),this.viewer=new n({el:".story-viewer",height:"viewport"})},s.prototype.view=function(){var e=this;return window.storyJson!=null?this._viewStoryJson(window.storyJson):i.getJSON("story.json",function(t){return e._viewStoryJson(t)})},s.prototype._viewStoryJson=function(t){return this.viewer.setModel(new e(t)),this.$spinner.remove()},s}(r.Router)})}.call(this),function(){requirejs(["player_router","models/spreadsheet_parser","models/map_utility","backbone"],function(e,t,n,r){var i;return t.aliasName(n.getA3),i=new e,r.history.start({pushState:!1})})}.call(this),define("player",function(){});